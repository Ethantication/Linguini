<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linguini - Technion Educational Site</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>

    <style>
        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Lightest gray for overall background */
            color: #343A40; /* Dark gray for main text */
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem; /* Increased padding */
        }

        /* Card styling - more prominent shadow, softer corners */
        .card {
            background-color: #ffffff;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); /* Softer, more spread out shadow */
            padding: 2rem; /* Increased padding */
            margin-bottom: 2rem; /* Increased margin */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px); /* Slight lift on hover */
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }

        /* Input and textarea styling - refined borders, clear focus */
        input[type="text"], textarea, select {
            border: 1px solid #CED4DA; /* Lighter gray border */
            border-radius: 0.5rem; /* Slightly more rounded */
            padding: 0.75rem 1rem;
            width: 100%;
            font-size: 1rem;
            color: #343A40;
            background-color: #ffffff;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        input[type="text"]:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #4CAF50; /* Accent green for focus */
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.25); /* Green shadow for focus */
        }

        /* Button styling - primary accent color, subtle hover effects */
        button {
            background-color: #4CAF50; /* Primary accent green */
            color: white;
            padding: 0.85rem 1.75rem; /* More generous padding */
            border-radius: 0.625rem; /* rounded-lg */
            font-weight: 600;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.2s ease-in-out;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* Soft shadow */
            display: inline-flex; /* For icons to be centered */
            align-items: center;
            justify-content: center;
            gap: 0.5rem; /* Space between icon and text */
        }
        button:hover {
            background-color: #43A047; /* Darker green on hover */
            transform: translateY(-2px); /* Slightly more pronounced lift */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Secondary button style */
        .btn-secondary {
            background-color: #98B4AA; /* Muted blue-gray */
            color: #343A40; /* Dark text for contrast */
            box-shadow: none; /* No shadow by default for secondary */
        }
        .btn-secondary:hover {
            background-color: #7A908D; /* Darker muted blue-gray */
            color: white; /* Text turns white on hover for better contrast */
            transform: translateY(-1px);
        }
        .btn-secondary:active {
            transform: translateY(0);
        }

        /* Specific button styles (kept for functionality, integrated with new palette) */
        .btn-validate { background-color: #28A745; } /* Bootstrap success green */
        .btn-validate:hover { background-color: #218838; }
        .btn-edit { background-color: #FFC107; color: #343A40; } /* Bootstrap warning yellow, dark text */
        .btn-edit:hover { background-color: #E0A800; }
        .btn-delete { background-color: #DC3545; } /* Bootstrap danger red */
        .btn-delete:hover { background-color: #C82333; }

        /* Status colors */
        .status-pending { color: #FFC107; font-weight: 500; }
        .status-validated { color: #28A745; font-weight: 500; }
        .status-not-provided { color: #6C757D; font-style: italic; } /* Muted gray */
        .status-overall-fully-validated { color: #198754; font-weight: 600; } /* Darker green */
        .status-overall-partially-validated { color: #FFC107; font-weight: 600; }
        .status-overall-pending { color: #DC3545; font-weight: 600; }

        /* Message box styling */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 2.5rem; /* More padding */
            border-radius: 0.75rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25); /* Deeper shadow */
            z-index: 1000;
            text-align: center;
            min-width: 320px;
            max-width: 90%;
            border: 1px solid #E9ECEF; /* Subtle border */
        }
        .message-box-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6); /* Darker overlay */
            z-index: 999;
        }

        /* Table styling - refined borders and padding */
        .term-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem; /* More space */
            border-radius: 0.5rem; /* Rounded table corners */
            overflow: hidden; /* Ensures rounded corners are visible */
        }
        .term-table th, .term-table td {
            border: 1px solid #E9ECEF; /* Lighter border for cells */
            padding: 1rem; /* More padding */
            text-align: left;
            vertical-align: middle;
        }
        .term-table th {
            background-color: #F0F2F5; /* Very light gray for header */
            font-weight: 600;
            color: #343A40;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.05em;
        }
        .term-table tr:nth-child(even) {
            background-color: #F8F9FA; /* Subtle zebra striping */
        }

        /* Custom header background color */
        .bg-header-custom {
            background-color: #faeddb;
            color: #343A40; /* Text color for header content */
            padding: 1rem 0; /* Reduced padding for a tighter header */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); /* Lighter header shadow */
        }
        .bg-header-custom .container {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
        .bg-header-custom button {
            background-color: #ffffff; /* White background for header buttons */
            color: #4CAF50; /* Green text for header buttons */
            padding: 0.6rem 1.2rem; /* Adjusted padding for header buttons */
            font-weight: 500;
            font-size: 0.95rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
        }
        .bg-header-custom button:hover {
            background-color: #F0F2F5; /* Light gray on hover */
            color: #388E3C; /* Darker green on hover */
            transform: translateY(-1px);
        }

        /* Game specific styles (Linguini Challenge and Learn Hebrew) */
        .game-option-button, .learn-hebrew-option-button {
            @apply bg-4CAF50 text-white py-4 px-6 rounded-lg text-2xl font-bold w-full transition-all duration-200 ease-in-out shadow-md; /* Larger text, more padding, shadow */
        }
        .game-option-button:hover, .learn-hebrew-option-button:hover {
            @apply bg-43A047 transform scale-102 shadow-lg; /* Darker green, slight scale, deeper shadow */
        }
        .game-option-button.correct, .learn-hebrew-option-button.correct {
            @apply bg-28A745; /* Success green */
        }
        .game-option-button.incorrect, .learn-hebrew-option-button.incorrect {
            @apply bg-DC3545; /* Danger red */
        }

        /* Learn Hebrew specific styles */
        #hebrewTermDisplay {
            font-size: 6rem; /* Even larger for impact */
            line-height: 1;
            margin-bottom: 0.5rem;
        }
        #pronunciationDisplay {
            font-size: 1.8rem;
            color: #6C757D;
        }
        #learnHebrewFeedback {
            font-size: 1.8rem;
        }

        /* Flexbox for footer content */
        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem; /* Space between text and mascot */
        }

        /* Remi the mouse specific style */
        .remi-mascot {
            height: 4rem; /* Adjust size as needed */
            width: auto;
            border-radius: 9999px; /* Fully rounded */
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* Debug Info Styling */
        #debugInfo {
            font-size: 0.75rem;
            color: #A0A0A0;
            margin-top: 1rem;
            text-align: center;
        }
        #debugInfo span {
            font-weight: bold;
            color: #E0E0E0;
        }

        /* Styles for the Validator Trust Agreement Modal */
        #trustAgreementModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Darker overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000; /* Higher z-index than messageBox */
        }
        #trustAgreementContent {
            background-color: white;
            padding: 3rem;
            border-radius: 1rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 90%;
            text-align: center;
            position: relative;
        }
        #trustAgreementContent h2 {
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: #343A40;
        }
        #trustAgreementContent p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
            color: #495057;
        }
        #trustAgreementContent .checkbox-container {
            margin-top: 2rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }
        #trustAgreementContent .checkbox-container input[type="checkbox"] {
            width: 1.5rem;
            height: 1.5rem;
            border: 2px solid #4CAF50;
            border-radius: 0.25rem;
            accent-color: #4CAF50; /* For checked state */
            cursor: pointer;
        }
        #trustAgreementContent .checkbox-container label {
            font-size: 1rem;
            color: #343A40;
            cursor: pointer;
        }
        #trustAgreementContent .button-group {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }
        #trustAgreementContent .button-group button {
            width: auto; /* Override full width */
            padding: 0.85rem 2rem;
            font-size: 1.1rem;
        }
    </style>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-analytics.js";
        // Also import Auth and Firestore for your app's functionality
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-auth.js";
        import { getFirestore, collection, query, getDocs, doc, getDoc, addDoc, setDoc, updateDoc, deleteDoc, onSnapshot, where } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-firestore.js";

        // Your web app's Firebase configuration (hardcoded directly)
        const firebaseConfig = {
            apiKey: "AIzaSyD9ijB7vwoQbog5JUCO76F5vMlvsvusodk",
            authDomain: "linguini-database.firebaseapp.com",
            projectId: "linguini-database",
            storageBucket: "linguini-database.firebasestorage.app",
            messagingSenderId: "363537478736",
            appId: "1:363537478736:web:a62c9290a9574f969d8d55",
            measurementId: "G-0D0KLF5W1V"
        };

        // Define a constant for the app ID directly from firebaseConfig
        const APP_ID = firebaseConfig.appId;

        // Global variables for Firebase instances and user ID
        window.firebaseApp = null;
        window.db = null;
        window.auth = null;
        window.userId = null;
        window.isFirebaseReady = false; // Flag to ensure Firestore operations run only after auth

        // MODIFICATION START: New global variables for validator status and mode
        window.isValidator = false; // Tracks if the current user has the 'validator' role
        window.validatorMode = false; // Tracks if validator UI features are currently enabled
        // MODIFICATION END

        // Initial application data to seed Firestore if empty
        window.initialAppData = {
            courses: [
                { id: 'c1', name: 'Calculus 1' },
                { id: 'c2', name: 'Algebra 1' },
                { id: 'c3', name: 'Intro to CS' },
                { id: 'c4', name: 'Physics 1' },
                { id: 'c5', name: 'Chemistry 1' },
                { id: 'c6', name: 'Biology 1' }
            ],
            terms: [
                // Calculus 1 Terms (c1)
                {
                    id: 't1', courseId: 'c1', definition: 'The rate at which the value of a function changes with respect to a change in the independent variable.',
                    hebrew: { text: 'נגזרת', status: 'Pending', validatedBy: null },
                    pronunciation: 'nigzeret',
                    english: { text: 'Derivative', status: 'Pending', validatedBy: null },
                    russian: { text: 'Производная', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مشتقة', status: 'Pending', validatedBy: null },
                    french: { text: 'Dérivée', status: 'Pending', validatedBy: null },
                    mandarin: { text: '导数', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Derivada', status: 'Pending', validatedBy: null },
                    hindi: { text: 'व्युत्पन्न', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't2', courseId: 'c1', definition: 'A mathematical object that can be interpreted as an area, a generalization of mass, or the total change of a quantity whose rate of change is known.',
                    hebrew: { text: 'אינטגרל', status: 'Pending', validatedBy: null },
                    pronunciation: 'integral',
                    english: { text: 'Integral', status: 'Pending', validatedBy: null },
                    russian: { text: 'Интеграл', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تكامل', status: 'Pending', validatedBy: null },
                    french: { text: 'Intégrale', status: 'Pending', validatedBy: null },
                    mandarin: { text: '积分', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Integral', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अभिन्न', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't12', courseId: 'c1', definition: 'A limit of a function in calculus that defines the value a function approaches as the input (or index) approaches some value.',
                    hebrew: { text: 'גבול', status: 'Pending', validatedBy: null },
                    pronunciation: 'gvul',
                    english: { text: 'Limit', status: 'Pending', validatedBy: null },
                    russian: { text: 'Предел', status: 'Pending', validatedBy: null },
                    arabic: { text: 'نهاية', status: 'Pending', validatedBy: null },
                    french: { text: 'Limite', status: 'Pending', validatedBy: null },
                    mandarin: { text: '极限', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Límite', status: 'Pending', validatedBy: null },
                    hindi: { text: 'सीमा', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't21', courseId: 'c1', definition: 'The inverse operation of differentiation, used to find functions whose derivative is known.',
                    hebrew: { text: 'אנטי-נגזרת', status: 'Pending', validatedBy: null },
                    pronunciation: 'anti-nigzeret',
                    english: { text: 'Antiderivative', status: 'Pending', validatedBy: null },
                    russian: { text: 'Первообразная', status: 'Pending', validatedBy: null },
                    arabic: { text: 'المشتقة العكسية', status: 'Pending', validatedBy: null },
                    french: { text: 'Primitive', status: 'Pending', validatedBy: null },
                    mandarin: { text: '反导数', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Antiderivada', status: 'Pending', validatedBy: null },
                    hindi: { text: 'प्रति-अवकalaj', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_5', courseId: 'c1', definition: 'The concept of continuity is fundamental to calculus and describes functions that do not have abrupt changes in value.',
                    hebrew: { text: 'רציפות', status: 'Pending', validatedBy: null },
                    pronunciation: 'retsifut',
                    english: { text: 'Continuity', status: 'Pending', validatedBy: null },
                    russian: { text: 'Непрерывность', status: 'Pending', validatedBy: null },
                    arabic: { text: 'استمرارية', status: 'Pending', validatedBy: null },
                    french: { text: 'Continuité', status: 'Pending', validatedBy: null },
                    mandarin: { text: '连续性', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Continuidad', status: 'Pending', validatedBy: null },
                    hindi: { text: 'निरंतरता', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_6', courseId: 'c1', definition: 'The process of finding the maximum or minimum value of a function.',
                    hebrew: { text: 'אופטימיזציה', status: 'Pending', validatedBy: null },
                    pronunciation: 'optimitzatsya',
                    english: { text: 'Optimization', status: 'Pending', validatedBy: null },
                    russian: { text: 'Оптимизация', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تحسين', status: 'Pending', validatedBy: null },
                    french: { text: 'Optimisation', status: 'Pending', validatedBy: null },
                    mandarin: { text: '优化', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Optimización', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अनुकूलन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_7', courseId: 'c1', definition: 'The set of all points where a function is defined.',
                    hebrew: { text: 'תחום הגדרה', status: 'Pending', validatedBy: null },
                    pronunciation: 'tchum hagdara',
                    english: { text: 'Domain', status: 'Pending', validatedBy: null },
                    russian: { text: 'Область определения', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مجال التعريف', status: 'Pending', validatedBy: null },
                    french: { text: 'Domaine de définition', status: 'Pending', validatedBy: null },
                    mandarin: { text: '定义域', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Dominio', status: 'Pending', validatedBy: null },
                    hindi: { text: 'डोमेन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_8', courseId: 'c1', definition: 'The set of all possible output values of a function.',
                    hebrew: { text: 'טווח', status: 'Pending', validatedBy: null },
                    pronunciation: 'tvach',
                    english: { text: 'Range', status: 'Pending', validatedBy: null },
                    russian: { text: 'Область значений', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مدى', status: 'Pending', validatedBy: null },
                    french: { text: 'Image', status: 'Pending', validatedBy: null },
                    mandarin: { text: '值域', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Rango', status: 'Pending', validatedBy: null },
                    hindi: { text: 'श्रेणी', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_9', courseId: 'c1', definition: 'A vertical asymptote is a vertical line that the graph of a function approaches but never touches as the input value approaches a certain number.',
                    hebrew: { text: 'אסימפטוטה אנכית', status: 'Pending', validatedBy: null },
                    pronunciation: 'asimptota anachit',
                    english: { text: 'Vertical Asymptote', status: 'Pending', validatedBy: null },
                    russian: { text: 'Вертикальная асимптота', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مقارب رأسي', status: 'Pending', validatedBy: null },
                    french: { text: 'Asymptote verticale', status: 'Pending', validatedBy: null },
                    mandarin: { text: '垂直渐近线', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Asíntota vertical', status: 'Pending', validatedBy: null },
                    hindi: { text: 'ऊर्ध्वाधर स्पर्शोन्मुख', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_10', courseId: 'c1', definition: 'A horizontal asymptote is a horizontal line that the graph of a function approaches as the input value tends towards positive or negative infinity.',
                    hebrew: { text: 'אסימפטוטה אופקית', status: 'Pending', validatedBy: null },
                    pronunciation: 'asimptota ofkit',
                    english: { text: 'Horizontal Asymptote', status: 'Pending', validatedBy: null },
                    russian: { text: 'Горизонтальная асимптота', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مقارب أفقي', status: 'Pending', validatedBy: null },
                    french: { text: 'Asymptote horizontale', status: 'Pending', validatedBy: null },
                    mandarin: { text: '水平渐近线', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Asíntota horizontal', status: 'Pending', validatedBy: null },
                    hindi: { text: 'क्षैतिज स्पर्शोन्मुख', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_11', courseId: 'c1', definition: 'The definite integral can be interpreted as the area of the region bounded by the graph of a function, the x-axis, and vertical lines.',
                    hebrew: { text: 'אינטגרל מסוים', status: 'Pending', validatedBy: null },
                    pronunciation: 'integral meyuham',
                    english: { text: 'Definite Integral', status: 'Pending', validatedBy: null },
                    russian: { text: 'Определенный интеграл', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تكامل محدد', status: 'Pending', validatedBy: null },
                    french: { text: 'Intégrale définie', status: 'Pending', validatedBy: null },
                    mandarin: { text: '定积分', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Integral definida', status: 'Pending', validatedBy: null },
                    hindi: { text: 'निश्चित समाकल', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_12', courseId: 'c1', definition: 'A tangent line to a curve at a given point is a straight line that "just touches" the curve at that point.',
                    hebrew: { text: 'קו משיק', status: 'Pending', validatedBy: null },
                    pronunciation: 'kav mashik',
                    english: { text: 'Tangent Line', status: 'Pending', validatedBy: null },
                    russian: { text: 'Касательная', status: 'Pending', validatedBy: null },
                    arabic: { text: 'خط مماس', status: 'Pending', validatedBy: null },
                    french: { text: 'Tangente', status: 'Pending', validatedBy: null },
                    mandarin: { text: '切线', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Recta tangente', status: 'Pending', validatedBy: null },
                    hindi: { text: 'स्पर्श रेखा', status: 'Pending', validatedBy: null }
                },

                // Algebra 1 Terms (c2)
                {
                    id: 't3', courseId: 'c2', definition: 'A rectangular array of numbers, symbols, or expressions, arranged in rows and columns.',
                    hebrew: { text: 'מטריצה', status: 'Pending', validatedBy: null },
                    pronunciation: 'matritza',
                    english: { text: 'Matrix', status: 'Pending', validatedBy: null },
                    russian: { text: 'Матрица', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مصفوفة', status: 'Pending', validatedBy: null },
                    french: { text: 'Matrice', status: 'Pending', validatedBy: null },
                    mandarin: { text: '矩阵', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Matriz', status: 'Pending', validatedBy: null },
                    hindi: { text: 'आव्यूह', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't13', courseId: 'c2', definition: 'A scalar value that is a function of the entries of a square matrix.',
                    hebrew: { text: 'דטרמיננטה', status: 'Pending', validatedBy: null },
                    pronunciation: 'determinanta',
                    english: { text: 'Determinant', status: 'Pending', validatedBy: null },
                    russian: { text: 'Определитель', status: 'Pending', validatedBy: null },
                    arabic: { text: 'محدد', status: 'Pending', validatedBy: null },
                    french: { text: 'Déterminant', status: 'Pending', validatedBy: null },
                    mandarin: { text: '行列式', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Determinante', status: 'Pending', validatedBy: null },
                    hindi: { text: 'निर्धारक', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't22', courseId: 'c2', definition: 'A vector space is a set of objects, called vectors, on which two operations are defined: vector addition and scalar multiplication.',
                    hebrew: { text: 'מרחב וקטורי', status: 'Pending', validatedBy: null },
                    pronunciation: 'merchav vektori',
                    english: { text: 'Vector Space', status: 'Pending', validatedBy: null },
                    russian: { text: 'Векторное пространство', status: 'Pending', validatedBy: null },
                    arabic: { text: 'فضاء متجه', status: 'Pending', validatedBy: null },
                    french: { text: 'Espace vectoriel', status: 'Pending', validatedBy: null },
                    mandarin: { text: '向量空间', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Espacio vectorial', status: 'Pending', validatedBy: null },
                    hindi: { text: 'सदिश समष्टि', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_4', courseId: 'c2', definition: 'An equation containing variables raised to the first power, with no products of variables.',
                    hebrew: { text: 'משוואה ליניארית', status: 'Pending', validatedBy: null },
                    pronunciation: 'mishvaah linearit',
                    english: { text: 'Linear Equation', status: 'Pending', validatedBy: null },
                    russian: { text: 'Линейное уравнение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'معادلة خطية', status: 'Pending', validatedBy: null },
                    french: { text: 'Équation linéaire', status: 'Pending', validatedBy: null },
                    mandarin: { text: '线性方程', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Ecuación lineal', status: 'Pending', validatedBy: null },
                    hindi: { text: 'रेखीय समीकरण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_5', courseId: 'c2', definition: 'A collection of linear equations involving the same set of variables.',
                    hebrew: { text: 'מערכת משוואות', status: 'Pending', validatedBy: null },
                    pronunciation: 'maarechet mishvaot',
                    english: { text: 'System of Equations', status: 'Pending', validatedBy: null },
                    russian: { text: 'Система уравнений', status: 'Pending', validatedBy: null },
                    arabic: { text: 'نظام معادلات', status: 'Pending', validatedBy: null },
                    french: { text: 'Système d\'équations', status: 'Pending', validatedBy: null },
                    mandarin: { text: '方程组', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Sistema de ecuaciones', status: 'Pending', validatedBy: null },
                    hindi: { text: 'समीकरणों का तंत्र', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_6', courseId: 'c2', definition: 'A number that, when multiplied by another number, yields 1.',
                    hebrew: { text: 'הופכי', status: 'Pending', validatedBy: null },
                    pronunciation: 'hofchi',
                    english: { text: 'Reciprocal', status: 'Pending', validatedBy: null },
                    russian: { text: 'Взаимный', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مقلوب', status: 'Pending', validatedBy: null },
                    french: { text: 'Inverse', status: 'Pending', validatedBy: null },
                    mandarin: { text: '倒数', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Recíproco', status: 'Pending', validatedBy: null },
                    hindi: { text: 'व्युत्क्रम', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_7', courseId: 'c2', definition: 'A value that describes the steepness and direction of a line.',
                    hebrew: { text: 'שיפוע', status: 'Pending', validatedBy: null },
                    pronunciation: 'shipuach',
                    english: { text: 'Slope', status: 'Pending', validatedBy: null },
                    russian: { text: 'Наклон', status: 'Pending', validatedBy: null },
                    arabic: { text: 'ميل', status: 'Pending', validatedBy: null },
                    french: { text: 'Pente', status: 'Pending', validatedBy: null },
                    mandarin: { text: '斜率', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Pendiente', status: 'Pending', validatedBy: null },
                    hindi: { text: 'ढलान', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_8', courseId: 'c2', definition: 'A mathematical statement that two expressions are equal.',
                    hebrew: { text: 'שוויון', status: 'Pending', validatedBy: null },
                    pronunciation: 'shivyon',
                    english: { text: 'Equality', status: 'Pending', validatedBy: null },
                    russian: { text: 'Равенство', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مساواة', status: 'Pending', validatedBy: null },
                    french: { text: 'Égalité', status: 'Pending', validatedBy: null },
                    mandarin: { text: '相等', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Igualdad', status: 'Pending', validatedBy: null },
                    hindi: { text: 'समानता', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_9', courseId: 'c2', definition: 'A number that can be expressed as a fraction p/q, where p and q are integers and q is not zero.',
                    hebrew: { text: 'מספר רציונלי', status: 'Pending', validatedBy: null },
                    pronunciation: 'mispar ratsyionali',
                    english: { text: 'Rational Number', status: 'Pending', validatedBy: null },
                    russian: { text: 'Рациональное число', status: 'Pending', validatedBy: null },
                    arabic: { text: 'عدد نسبي', status: 'Pending', validatedBy: null },
                    french: { text: 'Nombre rationnel', status: 'Pending', validatedBy: null },
                    mandarin: { text: '有理数', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Número racional', status: 'Pending', validatedBy: null },
                    hindi: { text: 'परिमेय संख्या', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_10', courseId: 'c2', definition: 'A symbol that represents a quantity in a mathematical expression, usually a letter.',
                    hebrew: { text: 'נעלם', status: 'Pending', validatedBy: null },
                    pronunciation: 'naalam',
                    english: { text: 'Unknown (variable)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Неизвестная', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مجهول', status: 'Pending', validatedBy: null },
                    french: { text: 'Inconnue', status: 'Pending', validatedBy: null },
                    mandarin: { text: '未知数', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Incógnita', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अज्ञात', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_11', courseId: 'c2', definition: 'A number that, when multiplied by a matrix, scales its rows or columns.',
                    hebrew: { text: 'סקאלר', status: 'Pending', validatedBy: null },
                    pronunciation: 'skalar',
                    english: { text: 'Scalar', status: 'Pending', validatedBy: null },
                    russian: { text: 'Скаляр', status: 'Pending', validatedBy: null },
                    arabic: { text: 'كمية قياسية', status: 'Pending', validatedBy: null },
                    french: { text: 'Scalaire', status: 'Pending', validatedBy: null },
                    mandarin: { text: '标量', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Escalar', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अदिश', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_12', courseId: 'c2', definition: 'A set of vectors that are linearly independent and span the entire vector space.',
                    hebrew: { text: 'בסיס', status: 'Pending', validatedBy: null },
                    pronunciation: 'basis',
                    english: { text: 'Basis', status: 'Pending', validatedBy: null },
                    russian: { text: 'Базис', status: 'Pending', validatedBy: null },
                    arabic: { text: 'أساس', status: 'Pending', validatedBy: null },
                    french: { text: 'Base', status: 'Pending', validatedBy: null },
                    mandarin: { text: '基', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Base', status: 'Pending', validatedBy: null },
                    hindi: { text: 'आधार', status: 'Pending', validatedBy: null }
                },

                // Intro to CS Terms (c3)
                {
                    id: 't4', courseId: 'c3', definition: 'A named storage location that contains a value.',
                    hebrew: { text: 'משתנה', status: 'Pending', validatedBy: null },
                    pronunciation: 'mishtaneh',
                    english: { text: 'Variable', status: 'Pending', validatedBy: null },
                    russian: { text: 'Переменная', status: 'Pending', validatedBy: null },
                    arabic: { text: 'متغير', status: 'Pending', validatedBy: null },
                    french: { text: 'Variable', status: 'Pending', validatedBy: null },
                    mandarin: { text: '变量', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Variable', status: 'Pending', validatedBy: null },
                    hindi: { text: 'चर', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't14', courseId: 'c3', definition: 'A sequence of instructions that specifies how to perform a computation or solve a problem.',
                    hebrew: { text: 'אלגוריתם', status: 'Pending', validatedBy: null },
                    pronunciation: 'algoritm',
                    english: { text: 'Algorithm', status: 'Pending', validatedBy: null },
                    russian: { text: 'Алгоритм', status: 'Pending', validatedBy: null },
                    arabic: { text: 'خوارزمية', status: 'Pending', validatedBy: null },
                    french: { text: 'Algorithme', status: 'Pending', validatedBy: null },
                    mandarin: { text: '算法', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Algoritmo', status: 'Pending', validatedBy: null },
                    hindi: { text: 'कलन विधि', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't23', courseId: 'c3', definition: 'A collection of abstract data types (ADT) that are defined by the operations that can be performed on them.',
                    hebrew: { text: 'מבנה נתונים', status: 'Pending', validatedBy: null },
                    pronunciation: 'mivne netunim',
                    english: { text: 'Data Structure', status: 'Pending', validatedBy: null },
                    russian: { text: 'Структура данных', status: 'Pending', validatedBy: null },
                    arabic: { text: 'هيكل بيانات', status: 'Pending', validatedBy: null },
                    french: { text: 'Structure de données', status: 'Pending', validatedBy: null },
                    mandarin: { text: '数据结构', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Estructura de datos', status: 'Pending', validatedBy: null },
                    hindi: { text: 'डेटा संरचना', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_4', courseId: 'c3', definition: 'A set of rules for writing programs that a computer can understand and execute.',
                    hebrew: { text: 'שפת תכנות', status: 'Pending', validatedBy: null },
                    pronunciation: 'sfat tichnut',
                    english: { text: 'Programming Language', status: 'Pending', validatedBy: null },
                    russian: { text: 'Язык программирования', status: 'Pending', validatedBy: null },
                    arabic: { text: 'لغة برمجة', status: 'Pending', validatedBy: null },
                    french: { text: 'Langage de programmation', status: 'Pending', validatedBy: null },
                    mandarin: { text: '编程语言', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Lenguaje de programación', status: 'Pending', validatedBy: null },
                    hindi: { text: 'प्रोग्रामिंग भाषा', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_5', courseId: 'c3', definition: 'A small piece of code that performs a specific task and can be reused multiple times.',
                    hebrew: { text: 'פונקציה', status: 'Pending', validatedBy: null },
                    pronunciation: 'funktzya',
                    english: { text: 'Function', status: 'Pending', validatedBy: null },
                    russian: { text: 'Функция', status: 'Pending', validatedBy: null },
                    arabic: { text: 'دالة', status: 'Pending', validatedBy: null },
                    french: { text: 'Fonction', status: 'Pending', validatedBy: null },
                    mandarin: { text: '函数', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Función', status: 'Pending', validatedBy: null },
                    hindi: { text: 'कार्य', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_6', courseId: 'c3', definition: 'A mechanism that allows new classes to be created based on existing classes, inheriting their properties and methods.',
                    hebrew: { text: 'ירושה', status: 'Pending', validatedBy: null },
                    pronunciation: 'yerusha',
                    english: { text: 'Inheritance (OOP)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Наследование', status: 'Pending', validatedBy: null },
                    arabic: { text: 'وراثة (برمجة كائنية التوجه)', status: 'Pending', validatedBy: null },
                    french: { text: 'Héritage (POO)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '继承', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Herencia (POO)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'विरासत (ओओपी)', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_7', courseId: 'c3', definition: 'The process of finding and fixing errors in code.',
                    hebrew: { text: 'דיבוג', status: 'Pending', validatedBy: null },
                    pronunciation: 'dibug',
                    english: { text: 'Debugging', status: 'Pending', validatedBy: null },
                    russian: { text: 'Отладка', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تصحيح الأخطاء', status: 'Pending', validatedBy: null },
                    french: { text: 'Débogage', status: 'Pending', validatedBy: null },
                    mandarin: { text: '调试', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Depuración', status: 'Pending', validatedBy: null },
                    hindi: { text: 'डीबगिंग', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_8', courseId: 'c3', definition: 'A graphical notation for representing processes, typically used in computer science for designing algorithms.',
                    hebrew: { text: 'תרשים זרימה', status: 'Pending', validatedBy: null },
                    pronunciation: 'tarsim zrima',
                    english: { text: 'Flowchart', status: 'Pending', validatedBy: null },
                    russian: { text: 'Блок-схема', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مخطط انسيابي', status: 'Pending', validatedBy: null },
                    french: { text: 'Organigramme', status: 'Pending', validatedBy: null },
                    mandarin: { text: '流程图', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Diagrama de flujo', status: 'Pending', validatedBy: null },
                    hindi: { text: 'फ्लोचार्ट', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_9', courseId: 'c3', definition: 'A conditional statement executes a block of code only if a specified condition is true.',
                    hebrew: { text: 'תנאי', status: 'Pending', validatedBy: null },
                    pronunciation: 'tnai',
                    english: { text: 'Conditional (programming)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Условный оператор', status: 'Pending', validatedBy: null },
                    arabic: { text: 'شرط (برمجة)', status: 'Pending', validatedBy: null },
                    french: { text: 'Conditionnelle (programmation)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '条件语句', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Condicional (programación)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'शर्त (प्रोग्रामिंग)', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_10', courseId: 'c3', definition: 'A control flow statement that allows code to be executed repeatedly based on a boolean condition or for a specific number of times.',
                    hebrew: { text: 'לולאה', status: 'Pending', validatedBy: null },
                    pronunciation: 'lulaa',
                    english: { text: 'Loop (programming)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Цикл', status: 'Pending', validatedBy: null },
                    arabic: { text: 'حلقة (برمجة)', status: 'Pending', validatedBy: null },
                    french: { text: 'Boucle (programmation)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '循环', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Bucle (programación)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'लूप (प्रोग्रामिंग)', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_11', courseId: 'c3', definition: 'A piece of software that translates source code written in a high-level programming language into machine code or an intermediate code.',
                    hebrew: { text: 'מהדר', status: 'Pending', validatedBy: null },
                    pronunciation: 'maheder',
                    english: { text: 'Compiler', status: 'Pending', validatedBy: null },
                    russian: { text: 'Компилятор', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مترجم (مترجم برامج)', status: 'Pending', validatedBy: null },
                    french: { text: 'Compilateur', status: 'Pending', validatedBy: null },
                    mandarin: { text: '编译器', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Compilador', status: 'Pending', validatedBy: null },
                    hindi: { text: 'संकलक', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_12', courseId: 'c3', definition: 'A system that enables users to communicate with a computer using a graphical display of icons, menus, and manipulation on-screen.',
                    hebrew: { text: 'ממשק משתמש גרפי', status: 'Pending', validatedBy: null },
                    pronunciation: 'mamtak mishtamesh grafi',
                    english: { text: 'Graphical User Interface (GUI)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Графический интерфейс пользователя', status: 'Pending', validatedBy: null },
                    arabic: { text: 'واجهة المستخدم الرسومية', status: 'Pending', validatedBy: null },
                    french: { text: 'Interface utilisateur graphique (GUI)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '图形用户界面', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Interfaz gráfica de usuario (GUI)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'ग्राफिकल यूजर इंटरफेस (जीयूआई)', status: 'Pending', validatedBy: null }
                },

                // Physics 1 Terms (c4)
                {
                    id: 't5', courseId: 'c4', definition: 'The rate of change of velocity.',
                    hebrew: { text: 'תאוצה', status: 'Pending', validatedBy: null },
                    pronunciation: 'teutza',
                    english: { text: 'Acceleration', status: 'Pending', validatedBy: null },
                    russian: { text: 'Ускорение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تسارع', status: 'Pending', validatedBy: null },
                    french: { text: 'Accélération', status: 'Pending', validatedBy: null },
                    mandarin: { text: '加速度', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Aceleración', status: 'Pending', validatedBy: null },
                    hindi: { text: 'त्वरण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't15', courseId: 'c4', definition: 'A quantity having both magnitude and direction.',
                    hebrew: { text: 'וקטור', status: 'Pending', validatedBy: null },
                    pronunciation: 'vektor',
                    english: { text: 'Vector', status: 'Pending', validatedBy: null },
                    russian: { text: 'Вектор', status: 'Pending', validatedBy: null },
                    arabic: { text: 'متجه', status: 'Pending', validatedBy: null },
                    french: { text: 'Vecteur', status: 'Pending', validatedBy: null },
                    mandarin: { text: '矢量', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Vector', status: 'Pending', validatedBy: null },
                    hindi: { text: 'सदिश', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't24', courseId: 'c4', definition: 'The product of an object\'s mass and its velocity.',
                    hebrew: { text: 'תנע', status: 'Pending', validatedBy: null },
                    pronunciation: 'tena',
                    english: { text: 'Momentum', status: 'Pending', validatedBy: null },
                    russian: { text: 'Импульс', status: 'Pending', validatedBy: null },
                    arabic: { text: 'كمية الحركة', status: 'Pending', validatedBy: null },
                    french: { text: 'Quantité de mouvement', status: 'Pending', validatedBy: null },
                    mandarin: { text: '动量', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Cantidad de movimiento', status: 'Pending', validatedBy: null },
                    hindi: { text: 'संवेग', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_4', courseId: 'c4', definition: 'The ability to do work.',
                    hebrew: { text: 'אנרגיה', status: 'Pending', validatedBy: null },
                    pronunciation: 'energiya',
                    english: { text: 'Energy', status: 'Pending', validatedBy: null },
                    russian: { text: 'Энергия', status: 'Pending', validatedBy: null },
                    arabic: { text: 'طاقة', status: 'Pending', validatedBy: null },
                    french: { text: 'Énergie', status: 'Pending', validatedBy: null },
                    mandarin: { text: '能量', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Energía', status: 'Pending', validatedBy: null },
                    hindi: { text: 'ऊर्जा', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_5', courseId: 'c4', definition: 'The force that opposes the motion of one surface over another.',
                    hebrew: { text: 'חיכוך', status: 'Pending', validatedBy: null },
                    pronunciation: 'chikuch',
                    english: { text: 'Friction', status: 'Pending', validatedBy: null },
                    russian: { text: 'Трение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'احت frictionكاك', status: 'Pending', validatedBy: null },
                    french: { text: 'Frottement', status: 'Pending', validatedBy: null },
                    mandarin: { text: '摩擦力', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Fricción', status: 'Pending', validatedBy: null },
                    hindi: { text: 'घर्षण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_6', courseId: 'c4', definition: 'The force of attraction between all masses in the universe.',
                    hebrew: { text: 'כבידה', status: 'Pending', validatedBy: null },
                    pronunciation: 'kvida',
                    english: { text: 'Gravity', status: 'Pending', validatedBy: null },
                    russian: { text: 'Гравитация', status: 'Pending', validatedBy: null },
                    arabic: { text: 'جاذبية', status: 'Pending', validatedBy: null },
                    french: { text: 'Gravité', status: 'Pending', validatedBy: null },
                    mandarin: { text: '重力', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Gravedad', status: 'Pending', validatedBy: null },
                    hindi: { text: 'गुरुत्वाकर्षण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_7', courseId: 'c4', definition: 'The tendency of an object to resist any change in its state of motion.',
                    hebrew: { text: 'אינרציה', status: 'Pending', validatedBy: null },
                    pronunciation: 'inertzia',
                    english: { text: 'Inertia', status: 'Pending', validatedBy: null },
                    russian: { text: 'Инерция', status: 'Pending', validatedBy: null },
                    arabic: { text: 'قصور ذاتي', status: 'Pending', validatedBy: null },
                    french: { text: 'Inertie', status: 'Pending', validatedBy: null },
                    mandarin: { text: '惯性', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Inercia', status: 'Pending', validatedBy: null },
                    hindi: { text: 'जड़ता', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_8', courseId: 'c4', definition: 'The rate at which work is done.',
                    hebrew: { text: 'הספק', status: 'Pending', validatedBy: null },
                    pronunciation: 'hespeq',
                    english: { text: 'Power', status: 'Pending', validatedBy: null },
                    russian: { text: 'Мощность', status: 'Pending', validatedBy: null },
                    arabic: { text: 'طاقة (قوة)', status: 'Pending', validatedBy: null },
                    french: { text: 'Puissance', status: 'Pending', validatedBy: null },
                    mandarin: { text: '功率', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Potencia', status: 'Pending', validatedBy: null },
                    hindi: { text: 'शक्ति', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_9', courseId: 'c4', definition: 'A push or a pull upon an object resulting from the object\'s interaction with another object.',
                    hebrew: { text: 'כוח', status: 'Pending', validatedBy: null },
                    pronunciation: 'koach',
                    english: { text: 'Force', status: 'Pending', validatedBy: null },
                    russian: { text: 'Сила', status: 'Pending', validatedBy: null },
                    arabic: { text: 'قوة', status: 'Pending', validatedBy: null },
                    french: { text: 'Force', status: 'Pending', validatedBy: null },
                    mandarin: { text: '力', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Fuerza', status: 'Pending', validatedBy: null },
                    hindi: { text: 'बल', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_10', courseId: 'c4', definition: 'The resistance to motion caused by the contact of two surfaces.',
                    hebrew: { text: 'חיכוך', status: 'Pending', validatedBy: null },
                    pronunciation: 'chikuch',
                    english: { text: 'Friction', status: 'Pending', validatedBy: null },
                    russian: { text: 'Трение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'احت frictionكاك', status: 'Pending', validatedBy: null },
                    french: { text: 'Frottement', status: 'Pending', validatedBy: null },
                    mandarin: { text: '摩擦力', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Fricción', status: 'Pending', validatedBy: null },
                    hindi: { text: 'घर्षण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_11', courseId: 'c4', definition: 'The transfer of energy that occurs when a force acts on an object as it moves through a distance.',
                    hebrew: { text: 'עבודה', status: 'Pending', validatedBy: null },
                    pronunciation: 'avoda',
                    english: { text: 'Work (physics)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Работа', status: 'Pending', validatedBy: null },
                    arabic: { text: 'شغل (فيزياء)', status: 'Pending', validatedBy: null },
                    french: { text: 'Travail (physique)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '功', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Trabajo (física)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'कार्य (भौतिकी)', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_12', courseId: 'c4', definition: 'The physical property of matter that describes its resistance to acceleration.',
                    hebrew: { text: 'מסה', status: 'Pending', validatedBy: null },
                    pronunciation: 'masa',
                    english: { text: 'Mass', status: 'Pending', validatedBy: null },
                    russian: { text: 'Масса', status: 'Pending', validatedBy: null },
                    arabic: { text: 'كتلة', status: 'Pending', validatedBy: null },
                    french: { text: 'Masse', status: 'Pending', validatedBy: null },
                    mandarin: { text: '质量', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Masa', status: 'Pending', validatedBy: null },
                    hindi: { text: 'द्रव्यमान', status: 'Pending', validatedBy: null }
                },

                // Chemistry 1 Terms (c5)
                {
                    id: 't6', courseId: 'c5', definition: 'The smallest unit of an element that retains the chemical properties of that element.',
                    hebrew: { text: 'אטום', status: 'Pending', validatedBy: null },
                    pronunciation: 'atom',
                    english: { text: 'Atom', status: 'Pending', validatedBy: null },
                    russian: { text: 'Атом', status: 'Pending', validatedBy: null },
                    arabic: { text: 'ذرة', status: 'Pending', validatedBy: null },
                    french: { text: 'Atome', status: 'Pending', validatedBy: null },
                    mandarin: { text: '原子', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Átomo', status: 'Pending', validatedBy: null },
                    hindi: { text: 'परमाणु', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't16', courseId: 'c5', definition: 'A substance consisting of two or more different elements chemically bonded together in a fixed proportion.',
                    hebrew: { text: 'תרכובת', status: 'Pending', validatedBy: null },
                    pronunciation: 'tarkovet',
                    english: { text: 'Compound', status: 'Pending', validatedBy: null },
                    russian: { text: 'Соединение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مركب', status: 'Pending', validatedBy: null },
                    french: { text: 'Composé', status: 'Pending', validatedBy: null },
                    mandarin: { text: '化合物', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Compuesto', status: 'Pending', validatedBy: null },
                    hindi: { text: 'यौगिक', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't25', courseId: 'c5', definition: 'A substance that produces hydrogen ions (H+) when dissolved in water.',
                    hebrew: { text: 'חומצה', status: 'Pending', validatedBy: null },
                    pronunciation: 'chumtza',
                    english: { text: 'Acid', status: 'Pending', validatedBy: null },
                    russian: { text: 'Кислота', status: 'Pending', validatedBy: null },
                    arabic: { text: 'حمض', status: 'Pending', validatedBy: null },
                    french: { text: 'Acide', status: 'Pending', validatedBy: null },
                    mandarin: { text: '酸', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Ácido', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अम्ल', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_4', courseId: 'c5', definition: 'A substance that produces hydroxide ions (OH-) when dissolved in water.',
                    hebrew: { text: 'בסיס', status: 'Pending', validatedBy: null },
                    pronunciation: 'basis',
                    english: { text: 'Base (chemistry)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Основание', status: 'Pending', validatedBy: null },
                    arabic: { text: 'قاعدة (كيمياء)', status: 'Pending', validatedBy: null },
                    french: { text: 'Base (chimie)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '碱', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Base (química)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'क्षार (रसायन विज्ञान)', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_5', courseId: 'c5', definition: 'A measure of the acidity or alkalinity of a solution.',
                    hebrew: { text: 'pH', status: 'Pending', validatedBy: null },
                    pronunciation: 'pi-eych',
                    english: { text: 'pH', status: 'Pending', validatedBy: null },
                    russian: { text: 'pH', status: 'Pending', validatedBy: null },
                    arabic: { text: 'الرقم الهيدروجيني (pH)', status: 'Pending', validatedBy: null },
                    french: { text: 'pH', status: 'Pending', validatedBy: null },
                    mandarin: { text: 'pH值', status: 'Pending', validatedBy: null },
                    spanish: { text: 'pH', status: 'Pending', validatedBy: null },
                    hindi: { text: 'पीएच मान', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_6', courseId: 'c5', definition: 'A chemical reaction involving the loss of electrons by a molecule, atom or ion.',
                    hebrew: { text: 'חמצון', status: 'Pending', validatedBy: null },
                    pronunciation: 'chimtzun',
                    english: { text: 'Oxidation', status: 'Pending', validatedBy: null },
                    russian: { text: 'Окисление', status: 'Pending', validatedBy: null },
                    arabic: { text: 'أكسدة', status: 'Pending', validatedBy: null },
                    french: { text: 'Oxydation', status: 'Pending', validatedBy: null },
                    mandarin: { text: '氧化', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Oxidación', status: 'Pending', validatedBy: null },
                    hindi: { text: 'ऑक्सीकरण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_7', courseId: 'c5', definition: 'A chemical reaction involving the gain of electrons by a molecule, atom or ion.',
                    hebrew: { text: 'חיזור', status: 'Pending', validatedBy: null },
                    pronunciation: 'chizur',
                    english: { text: 'Reduction (chemistry)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Восстановление', status: 'Pending', validatedBy: null },
                    arabic: { text: 'اختزال (كيمياء)', status: 'Pending', validatedBy: null },
                    french: { text: 'Réduction (chimie)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '还原', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Reducción (química)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अपचयन (रसायन विज्ञान)', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_8', courseId: 'c5', definition: 'A chemical substance produced by a living organism that acts as a catalyst to bring about a specific biochemical reaction.',
                    hebrew: { text: 'אנזים', status: 'Pending', validatedBy: null },
                    pronunciation: 'enzim',
                    english: { text: 'Enzyme', status: 'Pending', validatedBy: null },
                    russian: { text: 'Фермент', status: 'Pending', validatedBy: null },
                    arabic: { text: 'إنزيم', status: 'Pending', validatedBy: null },
                    french: { text: 'Enzyme', status: 'Pending', validatedBy: null },
                    mandarin: { text: '酶', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Enzima', status: 'Pending', validatedBy: null },
                    hindi: { text: 'एंजाइम', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_9', courseId: 'c5', definition: 'A chemical bond that involves the sharing of electron pairs between atoms.',
                    hebrew: { text: 'קשר קוולנטי', status: 'Pending', validatedBy: null },
                    pronunciation: 'kesher kovalenti',
                    english: { text: 'Covalent Bond', status: 'Pending', validatedBy: null },
                    russian: { text: 'Ковалентная связь', status: 'Pending', validatedBy: null },
                    arabic: { text: 'رابطة تساهمية', status: 'Pending', validatedBy: null },
                    french: { text: 'Liaison covalente', status: 'Pending', validatedBy: null },
                    mandarin: { text: '共价键', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Enlace covalente', status: 'Pending', validatedBy: null },
                    hindi: { text: 'सहसंयोजक बंधन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_10', courseId: 'c5', definition: 'A type of chemical bond that involves the electrostatic attraction between oppositely charged ions.',
                    hebrew: { text: 'קשר יוני', status: 'Pending', validatedBy: null },
                    pronunciation: 'kesher yoni',
                    english: { text: 'Ionic Bond', status: 'Pending', validatedBy: null },
                    russian: { text: 'Ионная связь', status: 'Pending', validatedBy: null },
                    arabic: { text: 'رابطة أيونية', status: 'Pending', validatedBy: null },
                    french: { text: 'Liaison ionique', status: 'Pending', validatedBy: null },
                    mandarin: { text: '离子键', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Enlace iónico', status: 'Pending', validatedBy: null },
                    hindi: { text: 'आयनिक बंधन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_11', courseId: 'c5', definition: 'A solution that resists changes in pH upon the addition of small amounts of acid or base.',
                    hebrew: { text: 'בופר', status: 'Pending', validatedBy: null },
                    pronunciation: 'buffer',
                    english: { text: 'Buffer (chemistry)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Буфер', status: 'Pending', validatedBy: null },
                    arabic: { text: 'محلول منظم', status: 'Pending', validatedBy: null },
                    french: { text: 'Tampon (chimie)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '缓冲液', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Amortiguador (química)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'बफर', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_12', courseId: 'c5', definition: 'A measure of the tendency of an atom to attract a bonding pair of electrons.',
                    hebrew: { text: 'אלקטרושליליות', status: 'Pending', validatedBy: null },
                    pronunciation: 'elektroshliliut',
                    english: { text: 'Electronegativity', status: 'Pending', validatedBy: null },
                    russian: { text: 'Электроотрицательность', status: 'Pending', validatedBy: null },
                    arabic: { text: 'كهروسلبية', status: 'Pending', validatedBy: null },
                    french: { text: 'Électronégativité', status: 'Pending', validatedBy: null },
                    mandarin: { text: '电负性', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Electronegatividad', status: 'Pending', validatedBy: null },
                    hindi: { text: 'विद्युतऋणात्मकता', status: 'Pending', validatedBy: null }
                },

                // Biology 1 Terms (c6)
                {
                    id: 't7', courseId: 'c6', definition: 'The metabolic pathway that converts glucose into pyruvate, which is then used in cellular respiration.',
                    hebrew: { text: 'גליקוליזה', status: 'Pending', validatedBy: null },
                    pronunciation: 'glikoliza',
                    english: { text: 'Glycolysis', status: 'Pending', validatedBy: null },
                    russian: { text: 'Гликолиз', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تحلل الجلوكوز', status: 'Pending', validatedBy: null },
                    french: { text: 'Glycolyse', status: 'Pending', validatedBy: null },
                    mandarin: { text: '糖酵解', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Glucólisis', status: 'Pending', validatedBy: null },
                    hindi: { text: 'ग्लाइकोलिसिस', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't17', courseId: 'c6', definition: 'The process by which green plants and some other organisms use sunlight to synthesize foods from carbon dioxide and water.',
                    hebrew: { text: 'פוטוסינתזה', status: 'Pending', validatedBy: null },
                    pronunciation: 'fotosinteza',
                    english: { text: 'Photosynthesis', status: 'Pending', validatedBy: null },
                    russian: { text: 'Фотосинтез', status: 'Pending', validatedBy: null },
                    arabic: { text: 'التمثيل الضوئي', status: 'Pending', validatedBy: null },
                    french: { text: 'Photosynthèse', status: 'Pending', validatedBy: null },
                    mandarin: { text: '光合作用', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Fotosíntesis', status: 'Pending', validatedBy: null },
                    hindi: { text: 'प्रकाश संश्लेषण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't26', courseId: 'c6', definition: 'The process of producing new living organisms from a single parent or two parents.',
                    hebrew: { text: 'רבייה', status: 'Pending', validatedBy: null },
                    pronunciation: 'reviya',
                    english: { text: 'Reproduction (biology)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Размножение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تكاثر (بيولوجيا)', status: 'Pending', validatedBy: null },
                    french: { text: 'Reproduction (biologie)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '繁殖', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Reproducción (biología)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'प्रजनन (जीव विज्ञान)', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_4', courseId: 'c6', definition: 'The fundamental physical and functional unit of heredity.',
                    hebrew: { text: 'גן', status: 'Pending', validatedBy: null },
                    pronunciation: 'gen',
                    english: { text: 'Gene', status: 'Pending', validatedBy: null },
                    russian: { text: 'Ген', status: 'Pending', validatedBy: null },
                    arabic: { text: 'جين', status: 'Pending', validatedBy: null },
                    french: { text: 'Gène', status: 'Pending', validatedBy: null },
                    mandarin: { text: '基因', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Gen', status: 'Pending', validatedBy: null },
                    hindi: { text: 'जीन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_5', courseId: 'c6', definition: 'A self-replicating material that is present in nearly all living organisms as the main constituent of chromosomes. It is the carrier of genetic information.',
                    hebrew: { text: 'DNA', status: 'Pending', validatedBy: null },
                    pronunciation: 'DNA',
                    english: { text: 'DNA', status: 'Pending', validatedBy: null },
                    russian: { text: 'ДНК', status: 'Pending', validatedBy: null },
                    arabic: { text: 'الحمض النووي (DNA)', status: 'Pending', validatedBy: null },
                    french: { text: 'ADN', status: 'Pending', validatedBy: null },
                    mandarin: { text: '脱氧核糖核酸', status: 'Pending', validatedBy: null },
                    spanish: { text: 'ADN', status: 'Pending', validatedBy: null },
                    hindi: { text: 'डीएनए', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_6', courseId: 'c6', definition: 'A single-stranded nucleic acid that is involved in protein synthesis.',
                    hebrew: { text: 'RNA', status: 'Pending', validatedBy: null },
                    pronunciation: 'RNA',
                    english: { text: 'RNA', status: 'Pending', validatedBy: null },
                    russian: { text: 'РНК', status: 'Pending', validatedBy: null },
                    arabic: { text: 'الحمض النووي الريبوزي (RNA)', status: 'Pending', validatedBy: null },
                    french: { text: 'ARN', status: 'Pending', validatedBy: null },
                    mandarin: { text: '核糖核酸', status: 'Pending', validatedBy: null },
                    spanish: { text: 'ARN', status: 'Pending', validatedBy: null },
                    hindi: { text: 'आरएनए', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_7', courseId: 'c6', definition: 'A large biomolecule, or macromolecule, consisting of one or more long chains of amino acid residues.',
                    hebrew: { text: 'חלבון', status: 'Pending', validatedBy: null },
                    pronunciation: 'helbon',
                    english: { text: 'Protein', status: 'Pending', validatedBy: null },
                    russian: { text: 'Белок', status: 'Pending', validatedBy: null },
                    arabic: { text: 'بروتين', status: 'Pending', validatedBy: null },
                    french: { text: 'Protéine', status: 'Pending', validatedBy: null },
                    mandarin: { text: '蛋白质', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Proteína', status: 'Pending', validatedBy: null },
                    hindi: { text: 'प्रोटीन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_8', courseId: 'c6', definition: 'The process by which organisms use oxygen to break down food molecules to get chemical energy for cell functions.',
                    hebrew: { text: 'נשימה תאית', status: 'Pending', validatedBy: null },
                    pronunciation: 'neshima tait',
                    english: { text: 'Cellular Respiration', status: 'Pending', validatedBy: null },
                    russian: { text: 'Клеточное дыхание', status: 'Pending', validatedBy: null },
                    arabic: { text: 'التنفس الخلوي', status: 'Pending', validatedBy: null },
                    french: { text: 'Respiration cellulaire', status: 'Pending', validatedBy: null },
                    mandarin: { text: '细胞呼吸', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Respiración celular', status: 'Pending', validatedBy: null },
                    hindi: { text: 'कोशिकीय श्वसन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_9', courseId: 'c6', definition: 'The process of cell division in which one cell divides into two identical daughter cells.',
                    hebrew: { text: 'מיטוזה', status: 'Pending', validatedBy: null },
                    pronunciation: 'mitoza',
                    english: { text: 'Mitosis', status: 'Pending', validatedBy: null },
                    russian: { text: 'Митоз', status: 'Pending', validatedBy: null },
                    arabic: { text: 'انقسام ميتوزي', status: 'Pending', validatedBy: null },
                    french: { text: 'Mitose', status: 'Pending', validatedBy: null },
                    mandarin: { text: '有丝分裂', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Mitosis', status: 'Pending', validatedBy: null },
                    hindi: { text: 'माइटोसिस', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_10', courseId: 'c6', definition: 'A type of cell division that reduces the number of chromosomes in the parent cell by half and produces four gamete cells.',
                    hebrew: { text: 'מיוזה', status: 'Pending', validatedBy: null },
                    pronunciation: 'meyoza',
                    english: { text: 'Meiosis', status: 'Pending', validatedBy: null },
                    russian: { text: 'Мейоз', status: 'Pending', validatedBy: null },
                    arabic: { text: 'انقسام اختزالي', status: 'Pending', validatedBy: null },
                    french: { text: 'Méiose', status: 'Pending', validatedBy: null },
                    mandarin: { text: '减数分裂', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Meiosis', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अर्धसूत्रीविभाजन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_16', courseId: 'c6', definition: 'An organism that produces its own food, usually by photosynthesis, and forms the base of a food chain.',
                    hebrew: { text: 'יצרן', status: 'Pending', validatedBy: null },
                    pronunciation: 'yatzran',
                    english: { text: 'Producer (biology)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Производитель', status: 'Pending', validatedBy: null },
                    arabic: { text: 'منتج (بيولوجيا)', status: 'Pending', validatedBy: null },
                    french: { text: 'Producteur (biologie)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '生产者', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Productor (biología)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'उत्पादक (जीव विज्ञान)', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_17', courseId: 'c6', definition: 'An organism that obtains energy by feeding on other organisms.',
                    hebrew: { text: 'צרכן', status: 'Pending', validatedBy: null },
                    pronunciation: 'tzarchan',
                    english: { text: 'Consumer (biology)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Потребитель', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مستهلك (بيولوجيا)', status: 'Pending', validatedBy: null },
                    french: { text: 'Consommateur (biologie)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '消费者', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Consumidor (biología)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'उपभोक्ता (जीव विज्ञान)', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_18', courseId: 'c6', definition: 'An organism, especially a soil bacterium, fungus, or invertebrate, that decomposes organic material.',
                    hebrew: { text: 'מפרק', status: 'Pending', validatedBy: null },
                    pronunciation: 'meafreq',
                    english: { text: 'Decomposer', status: 'Pending', validatedBy: null },
                    russian: { text: 'Разлагатель', status: 'Pending', validatedBy: null },
                    arabic: { text: 'محلل', status: 'Pending', validatedBy: null },
                    french: { text: 'Décomposeur', status: 'Pending', validatedBy: null },
                    mandarin: { text: '分解者', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Descomponedor', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अपघटक', status: 'Pending', validatedBy: null }
                }
            ]
        };
        window.appData = { courses: [], terms: [] }; // Global appData, initialized empty
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('DOM Content Loaded. Starting Firebase initialization...');
            try {
                // Initialize Firebase only once if (!window.firebaseApp) {
                if (!window.firebaseApp) {
                    window.firebaseApp = initializeApp(firebaseConfig);
                    window.db = getFirestore(window.firebaseApp);
                    window.auth = getAuth(window.firebaseApp);
                    getAnalytics(window.firebaseApp); // Initialize Analytics
                    console.log('Firebase services (app, db, auth, analytics) initialized with hardcoded config.');
                    // Update debug info in footer
                    updateDebugInfo();

                    // Set up auth state change listener FIRST. This listener will handle
                    // all subsequent user state changes, including the initial sign-in.
                    onAuthStateChanged(window.auth, async (user) => {
                        if (user) {
                            window.userId = user.uid;
                            console.log('Firebase Auth State Changed: User signed in. User ID:', window.userId);
                            window.isFirebaseReady = true; // Set flag to true
                            updateDebugInfo(); // Update debug info with user ID and ready status

                            // MODIFICATION START: Fetch user roles after sign-in
                            await fetchUserRole();
                            // MODIFICATION END

                            // After Firebase is ready and user is authenticated, proceed with app initialization
                            await initializeAppData();
                            renderCourses(); // Explicitly render courses after data is fetched/seeded
                            populateChallengeGameLanguageSelect();
                            populateLearnHebrewLanguageSelect();
                            showView(homeView);

                            // MODIFICATION START: Update UI based on user role after initialization
                            updateUIForUserRole();
                            // MODIFICATION END

                        } else {
                            console.log('Firebase Auth State Changed: No user. Attempting anonymous sign-in if not already tried.');
                            // Only try to sign in anonymously if there's no current user (prevents redundant calls)
                            if (!window.auth.currentUser) {
                                try {
                                    // Use a hardcoded initial auth token if it was meant to be used, otherwise proceed with anonymous.
                                    // IMPORTANT: if __initial_auth_token is provided by Canvas, it is meant to be used.
                                    // As per the instructions, if __initial_auth_token is not defined, we signInAnonymously.
                                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token !== '') {
                                        console.log('Attempting custom token sign-in...');
                                        await signInWithCustomToken(window.auth, __initial_auth_token);
                                    } else {
                                        await signInAnonymously(window.auth);
                                        console.log('Anonymous sign-in attempted.');
                                    }
                                } catch (anonError) {
                                    console.error('Error during initial sign-in (anonymous or custom token):', anonError);
                                    showMessageBox("Error signing in. Functionality may be limited.", "error");
                                    window.isFirebaseReady = false; // Mark as not ready if auth failed
                                    updateDebugInfo();
                                }
                            }
                            // MODIFICATION START: Reset validator status if no user
                            window.isValidator = false;
                            window.validatorMode = false; // Reset validator mode too
                            updateUIForUserRole(); // Update UI for non-validator state
                            // MODIFICATION END
                        }
                    });
                    // No need to explicitly call signInWithCustomToken here, onAuthStateChanged handles initial state
                    // and will trigger anonymous sign-in if no user is found.
                } else {
                    // If Firebase is already initialized (e.g., due to hot reload in dev env)
                    console.log("Firebase already initialized. Re-initializing app data and rendering.");
                    if (window.auth && window.auth.currentUser) {
                        window.userId = window.auth.currentUser.uid;
                        window.isFirebaseReady = true;
                        console.log('Firebase already initialized and user found. User ID:', window.userId);
                        updateDebugInfo();
                        // MODIFICATION START: Fetch user roles on re-init if user exists
                        await fetchUserRole();
                        // MODIFICATION END
                        await initializeAppData();
                        renderCourses();
                        populateChallengeGameLanguageSelect();
                        populateLearnHebrewLanguageSelect();
                        showView(homeView);
                        // MODIFICATION START: Update UI based on user role after re-init
                        updateUIForUserRole();
                        // MODIFICATION END
                    } else {
                        console.log("Firebase initialized but user not yet available. Waiting for auth state change.");
                        updateDebugInfo();
                        renderCourses();
                        populateChallengeGameLanguageSelect();
                        populateLearnHebrewLanguageSelect();
                        showView(homeView);
                    }
                }
            } catch (error) {
                console.error("Critical error during Firebase initialization or auth setup:", error);
                showMessageBox("Critical error loading application. Please check console for details and try again.", "error");
                renderCourses();
                populateChallengeGameLanguageSelect();
                populateLearnHebrewLanguageSelect();
                showView(homeView);
                updateDebugInfo();
            }
        });

        // MODIFICATION START: New functions for user roles and UI updates
        async function fetchUserRole() {
            if (!window.userId || !window.db) {
                console.warn("Cannot fetch user role: userId or db not available.");
                return;
            }
            try {
                // User roles are stored in a top-level 'users' collection
                const userDocRef = doc(window.db, 'users', window.userId);
                const userDocSnap = await getDoc(userDocRef);

                if (userDocSnap.exists()) {
                    const userData = userDocSnap.data();
                    window.isValidator = (userData.isValidator === true); // Explicitly check for true
                    console.log(`User ${window.userId} is a validator:`, window.isValidator);
                } else {
                    window.isValidator = false;
                    console.log(`User document for ${window.userId} does not exist. Not a validator.`);
                }
            } catch (error) {
                console.error("Error fetching user role:", error);
                window.isValidator = false; // Assume not validator on error
                showMessageBox("Error fetching user profile. Validator features may not work.", "error");
            }
        }

        async function updateUserRole(isValidatorStatus, keyName = null, message = "User role updated.") {
            if (!window.userId || !window.db) {
                showMessageBox("Cannot update role: Not authenticated.", "error");
                return;
            }
            try {
                const userDocRef = doc(window.db, 'users', window.userId);
                const updateData = { isValidator: isValidatorStatus };
                if (keyName) {
                    updateData.v2025key = keyName; // Store the key used for validation
                }
                await setDoc(userDocRef, updateData, { merge: true }); // Use setDoc with merge to create/update
                window.isValidator = isValidatorStatus;
                showMessageBox(message, "success");
                updateUIForUserRole(); // Update UI after role change
            } catch (error) {
                console.error("Error updating user role:", error);
                showMessageBox("Failed to update user role. Please try again.", "error");
            }
        }

        function updateUIForUserRole() {
            const validatorModeToggleButton = document.getElementById('validatorModeToggleButton'); // Renamed ID
            const becomeValidatorButton = document.getElementById('becomeValidator');

            if (window.isValidator) {
                becomeValidatorButton.classList.add('hidden'); // Hide "Become a Validator" if already one
                validatorModeToggleButton.classList.remove('hidden'); // Show toggle for validators
                validatorModeToggleButton.textContent = window.validatorMode ? "Disable Validator Mode" : "Enable Validator Mode";
                validatorModeToggleButton.classList.toggle('btn-secondary', !window.validatorMode);
                validatorModeToggleButton.classList.toggle('bg-4CAF50', window.validatorMode);
            } else {
                becomeValidatorButton.classList.remove('hidden'); // Show "Become a Validator"
                validatorModeToggleButton.classList.add('hidden'); // Hide toggle if not a validator
            }
            // Re-render courses/terms to apply visibility changes of validate/delete buttons
            renderCourses(); // This will trigger renderTerms if a course is open
        }
        // MODIFICATION END

        // Function to update the debug info in the footer
        function updateDebugInfo() {
            const debugInfoElement = document.getElementById('debugInfo');
            if (debugInfoElement) {
                debugInfoElement.innerHTML = `
                    <p>User ID: <span id="displayUserId">${window.userId || 'N/A (Not authenticated)'}</span></p>
                    <p>Firebase Ready: <span id="displayFirebaseReady">${window.isFirebaseReady ? 'YES' : 'NO'}</span></p>
                    <p>App ID: <span id="displayAppId">${APP_ID}</span></p>
                    <p>Is Validator: <span id="displayIsValidator">${window.isValidator ? 'YES' : 'NO'}</span></p>
                    <p>Validator Mode: <span id="displayValidatorMode">${window.validatorMode ? 'ENABLED' : 'DISABLED'}</span></p>
                `;
            }
        }

        // Function to ensure appData is loaded from Firestore or seeded
        async function initializeAppData() {
            if (!window.isFirebaseReady || !window.db) {
                console.warn("initializeAppData called before Firebase is ready or db is null.");
                return;
            }
            // Use the hardcoded APP_ID constant
            const appId = APP_ID;
            console.log(`Attempting to initialize app data for appId: ${appId}`);
            try {
                // Check if courses collection is empty and seed if necessary
                const coursesRef = collection(window.db, 'artifacts', appId, 'public', 'data', 'courses');
                console.log('Attempting to get courses snapshot to check for emptiness...');
                const coursesSnapshot = await getDocs(coursesRef);
                console.log('Courses snapshot received. Is empty:', coursesSnapshot.empty);
                if (coursesSnapshot.empty) {
                    console.log("Seeding initial data to Firestore...");
                    for (const course of window.initialAppData.courses) {
                        await setDoc(doc(coursesRef, course.id), course);
                        console.log(`Seeded course: ${course.name}`);
                    }
                    const termsCollectionRef = collection(window.db, 'artifacts', appId, 'public', 'data', 'terms');
                    for (const term of window.initialAppData.terms) {
                        await setDoc(doc(termsCollectionRef, term.id), term);
                        console.log(`Seeded term: ${term.hebrew ? term.hebrew.text : term.english.text}`);
                    }
                    console.log("Initial data seeding complete.");
                } else {
                    console.log("Courses collection is not empty. Skipping seeding.");
                }

                // Set up real-time listeners for courses and terms
                console.log('Setting up real-time listeners for courses and terms...');
                onSnapshot(coursesRef, (snapshot) => {
                    window.appData.courses = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    console.log("Courses data received from Firestore (onSnapshot):", window.appData.courses);
                    renderCourses(); // Re-render courses whenever data changes
                    // If a course was being viewed, re-render its terms as well
                    if (window.currentCourseId) {
                        renderTerms(window.currentCourseId, window.courseSearchInput.value.trim());
                    }
                }, (error) => {
                    console.error("Error fetching courses via onSnapshot:", error);
                    showMessageBox("Error loading courses. Please refresh.", "error");
                });

                onSnapshot(collection(window.db, 'artifacts', appId, 'public', 'data', 'terms'), (snapshot) => {
                    window.appData.terms = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    console.log("Terms data received from Firestore (onSnapshot):", window.appData.terms);
                    // Re-render terms for current course if active
                    if (window.currentCourseId) {
                        renderTerms(window.currentCourseId, window.courseSearchInput.value.trim());
                    }
                    // Also update global search results if search view is active
                    if (!searchView.classList.contains('hidden') && globalSearchInput.value.trim().length > 0) {
                        globalSearchInput.onkeyup(); // Trigger search re-render
                    }
                }, (error) => {
                    console.error("Error fetching terms via onSnapshot:", error);
                    showMessageBox("Error loading terms. Please refresh.", "error");
                });
                console.log('Real-time listeners for courses and terms setup complete.');
            } catch (error) {
                console.error("Error during initializeAppData (seeding or initial fetch):", error);
                showMessageBox("Error initializing application data. Please check your network connection and Firebase security rules.", "error");
            }
        }
    </script>
</head>
<body class="min-h-screen flex flex-col">
    <header class="bg-header-custom p-4 shadow-lg">
        <div class="container flex flex-col md:flex-row md:justify-between md:items-center">
            <div class="flex justify-center md:justify-start mb-4 md:mb-0">
                <img src="https://raw.githubusercontent.com/Ethantication/Linguini/main/lingimg.jpg" alt="Linguini Logo" class="h-24 w-24 md:h-20 md:w-20 rounded-full shadow-md">
            </div>
            <nav class="flex flex-wrap justify-center gap-3 md:gap-4 mt-2 md:mt-0">
                <button id="homeButton">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m0 0l7 7m-2 2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg> Home
                </button>
                <button id="validatorModeToggleButton">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg> Enable Validator Mode
                </button>
                <button id="becomeValidator">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg> Become a Validator
                </button>
                <button id="challengeGameButton">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"/>
                    </svg> Linguini Challenge
                </button>
                <button id="searchButton">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg> Search
                </button>
                <button id="learnHebrewButton">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13.4M3.344 11.516l-.008.008A9.752 9.752 0 0012 21.75a9.753 9.753 0 008.657-4.929l-.008-.008-1.339-2.679m0 0l-.952-1.904A2.25 2.25 0 0015.688 9.442l4.474-4.474A9.753 9.753 0 0012 2.25c-2.895 0-5.689 1.173-7.776 3.26l-.008.008z"/>
                    </svg> Learn Hebrew
                </button>
            </nav>
        </div>
    </header>
    <main class="flex-grow container py-8">
        <div id="messageBoxContainer"></div>
        <div id="trustAgreementModal" class="hidden">
            <div id="trustAgreementContent" class="card">
                <h2 class="text-3xl font-bold mb-4">Become a Validator</h2>
                <p>By becoming a validator, you agree to uphold the accuracy and integrity of all language translations on Linguini. This is a serious responsibility and ensures the quality of our educational content. You will be granted the V2025 Key, which allows you to validate and delete terms.</p>
                <div class="checkbox-container">
                    <input type="checkbox" id="agreeToTrustTerms">
                    <label for="agreeToTrustTerms">I understand and agree to the responsibilities of a validator.</label>
                </div>
                <div class="button-group">
                    <button id="confirmTrustAgreement" disabled>Confirm Agreement</button>
                    <button id="cancelTrustAgreement" class="btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
        <div id="homeView" class="view">
            <div class="card">
                <h2 class="text-3xl font-bold mb-4 text-center">Welcome to Linguini! <img src="https://raw.githubusercontent.com/Ethantication/Linguini/main/WhatsApp%20Image%202025-05-19%20at%2019.42.36_a4a2cf4b.jpg" alt="Remi the Mouse" class="inline-block remi-mascot ml-2"></h2>
                <p class="text-lg text-center mb-6 text-gray-700">Your go-to resource for Technion course terms, translated into multiple languages.</p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <button id="showAddCourseFormBtn" class="w-full sm:w-auto">Add New Course</button>
                </div>
            </div>
            <div class="card">
                <h2 class="text-2xl font-semibold mb-4">Available Courses</h2>
                <div id="courseList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                </div>
            </div>
        </div>

        <div id="searchView" class="view hidden">
            <div class="card">
                <h2 class="text-2xl font-semibold mb-4">Global Term Search <img src="https://raw.githubusercontent.com/Ethantication/Linguini/main/WhatsApp%20Image%202025-05-19%20at%2019.42.36_a4a2cf4b.jpg" alt="Remi the Mouse" class="inline-block remi-mascot ml-2"></h2>
                <div class="relative w-full mb-6">
                    <input type="text" id="globalSearchInput" placeholder="Search all terms..." class="pr-10">
                    <svg class="absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <div id="searchResultsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                </div>
                <p id="noSearchResultsMessage" class="text-gray-500 text-center mt-4 hidden">No terms found matching your search.</p>
                <button id="clearSearchBtn" class="btn-secondary mt-6">Clear Search</button>
            </div>
        </div>

        <div id="addCourseView" class="view hidden">
            <div class="card">
                <h2 class="text-2xl font-semibold mb-6">Add New Course</h2>
                <form id="addCourseForm" class="space-y-4">
                    <div>
                        <label for="courseName" class="block text-sm font-medium text-gray-700 mb-1">Course Name</label>
                        <input type="text" id="courseName" placeholder="e.g., Calculus 1" required>
                    </div>
                    <div class="flex gap-4">
                        <button type="submit">Add Course</button>
                        <button type="button" id="cancelAddCourseBtn" class="btn-secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="courseDetailsView" class="view hidden">
            <div class="card">
                <h2 id="courseDetailsTitle" class="text-2xl font-semibold mb-4"></h2>
                <p class="text-gray-700 mb-6">Terms for this course:</p>
                <div class="flex flex-col sm:flex-row gap-4 mb-6">
                    <button id="showAddTermFormBtn" class="w-full sm:w-auto">Add New Term to Course</button>
                    <div class="relative w-full sm:w-1/2">
                        <input type="text" id="courseSearchInput" placeholder="Search terms in this course..." class="pr-10">
                        <svg class="absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                </div>
                <div id="termList" class="overflow-x-auto">
                    <table class="term-table">
                        <thead>
                            <tr>
                                <th>Definition</th>
                                <th>Hebrew</th>
                                <th>English</th>
                                <th>Russian</th>
                                <th>Arabic</th>
                                <th>French</th>
                                <th>Mandarin</th>
                                <th>Spanish</th>
                                <th>Hindi</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="termTableBody">
                            </tbody>
                    </table>
                </div>
                <p id="noTermsMessage" class="text-gray-500 text-center mt-4 hidden">No terms added to this course yet.</p>
                <button id="backToCoursesBtn" class="btn-secondary mt-6">Back to Courses</button>
            </div>
        </div>

        <div id="addEditTermView" class="view hidden">
            <div class="card">
                <h2 id="addEditTermTitle" class="text-2xl font-semibold mb-6">Add New Term</h2>
                <form id="addEditTermForm" class="space-y-4">
                    <div>
                        <label for="termDefinition" class="block text-sm font-medium text-gray-700 mb-1">Definition</label>
                        <textarea id="termDefinition" rows="3" placeholder="e.g., The study of matter and energy." required></textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="termHebrew" class="block text-sm font-medium text-gray-700 mb-1">Hebrew Term</label>
                            <input type="text" id="termHebrew" placeholder="e.g., פיזיקה">
                        </div>
                        <div>
                            <label for="termPronunciation" class="block text-sm font-medium text-gray-700 mb-1">Pronunciation (e.g., for Hebrew)</label>
                            <input type="text" id="termPronunciation" placeholder="e.g., fizika">
                        </div>
                        <div>
                            <label for="termEnglish" class="block text-sm font-medium text-gray-700 mb-1">English Term</label>
                            <input type="text" id="termEnglish" placeholder="e.g., Physics">
                        </div>
                        <div>
                            <label for="termRussian" class="block text-sm font-medium text-gray-700 mb-1">Russian Term</label>
                            <input type="text" id="termRussian" placeholder="e.g., Физика">
                        </div>
                        <div>
                            <label for="termArabic" class="block text-sm font-medium text-gray-700 mb-1">Arabic Term</label>
                            <input type="text" id="termArabic" placeholder="e.g., فيزياء">
                        </div>
                        <div>
                            <label for="termFrench" class="block text-sm font-medium text-gray-700 mb-1">French Term</label>
                            <input type="text" id="termFrench" placeholder="e.g., Physique">
                        </div>
                        <div>
                            <label for="termMandarin" class="block text-sm font-medium text-gray-700 mb-1">Mandarin Term</label>
                            <input type="text" id="termMandarin" placeholder="e.g., 物理">
                        </div>
                        <div>
                            <label for="termSpanish" class="block text-sm font-medium text-gray-700 mb-1">Spanish Term</label>
                            <input type="text" id="termSpanish" placeholder="e.g., Física">
                        </div>
                        <div>
                            <label for="termHindi" class="block text-sm font-medium text-gray-700 mb-1">Hindi Term</label>
                            <input type="text" id="termHindi" placeholder="e.g., भौतिक विज्ञान">
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <button type="submit" id="saveTermButton">Save Term</button>
                        <button type="button" id="cancelAddEditTermBtn" class="btn-secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div id="challengeGameView" class="view hidden">
            <div class="card">
                <h2 class="text-2xl font-semibold mb-4">Linguini Challenge <img src="https://raw.githubusercontent.com/Ethantication/Linguini/main/WhatsApp%20Image%202025-05-19%20at%2019.42.36_a4a2cf4b.jpg" alt="Remi the Mouse" class="inline-block remi-mascot ml-2"></h2>
                
                <div id="challengeGameStartScreen">
                    <p class="text-lg text-center mb-6 text-gray-700">Test your knowledge of course terms!</p>
                    <div class="mb-4">
                        <label for="challengeGameLanguageSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Language:</label>
                        <select id="challengeGameLanguageSelect" class="w-full"></select>
                    </div>
                    <div class="mb-6">
                        <label for="challengeGameCourseSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Course (Optional):</label>
                        <select id="challengeGameCourseSelect" class="w-full">
                            <option value="">All Courses</option>
                        </select>
                    </div>
                    <button id="startGameButton" class="w-full">Start Game</button>
                </div>

                <div id="challengeGamePlayScreen" class="hidden text-center">
                    <p class="text-xl font-medium text-gray-800 mb-4" id="challengeQuestion"></p>
                    <div id="challengeOptions" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        </div>
                    <p id="challengeFeedback" class="text-lg font-semibold mt-4"></p>
                    <button id="nextQuestionButton" class="hidden mt-4">Next Question</button>
                </div>

                <div id="challengeGameOverScreen" class="hidden text-center">
                    <h3 class="text-3xl font-bold mb-4">Game Over!</h3>
                    <p class="text-xl mb-6">You scored <span id="challengeScore" class="font-bold text-green-600">0</span> out of <span id="challengeTotalQuestions" class="font-bold">0</span>.</p>
                    <button id="restartGameButton">Play Again</button>
                    <button id="backToHomeFromChallenge" class="btn-secondary ml-4">Back to Home</button>
                </div>
            </div>
        </div>

        <div id="learnHebrewView" class="view hidden">
            <div class="card">
                <h2 class="text-2xl font-semibold mb-4">Learn Hebrew <img src="https://raw.githubusercontent.com/Ethantication/Linguini/main/WhatsApp%20Image%202025-05-19%20at%2019.42.36_a4a2cf4b.jpg" alt="Remi the Mouse" class="inline-block remi-mascot ml-2"></h2>

                <div id="learnHebrewStartScreen">
                    <p class="text-lg text-center mb-6 text-gray-700">Practice Hebrew terms and pronunciation!</p>
                    <div class="mb-4">
                        <label for="learnHebrewCourseSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Course (Optional):</label>
                        <select id="learnHebrewCourseSelect" class="w-full">
                            <option value="">All Courses</option>
                        </select>
                    </div>
                    <button id="startLearnHebrewButton" class="w-full">Start Learning</button>
                </div>

                <div id="learnHebrewPlayScreen" class="hidden text-center">
                    <div class="mb-6">
                        <p id="hebrewTermDisplay" class="font-bold text-gray-900"></p>
                        <p id="pronunciationDisplay" class="text-gray-600"></p>
                    </div>
                    <button id="revealAnswerButton" class="mb-4">Reveal Answer</button>
                    <p id="learnHebrewFeedback" class="font-semibold mt-4"></p>
                    <button id="nextHebrewTermButton" class="hidden mt-4">Next Term</button>
                </div>

                <div id="learnHebrewEndScreen" class="hidden text-center">
                    <h3 class="text-3xl font-bold mb-4">Learning Session Complete!</h3>
                    <p class="text-xl mb-6">You've reviewed all available terms in this selection.</p>
                    <button id="restartLearnHebrewButton">Start New Session</button>
                    <button id="backToHomeFromLearnHebrew" class="btn-secondary ml-4">Back to Home</button>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-gray-800 text-white p-4 text-center text-sm mt-auto">
        <div class="container footer-content">
            <span>© 2025 Linguini - Technion Educational Site. All rights reserved.</span>
            <img src="https://raw.githubusercontent.com/Ethantication/Linguini/main/WhatsApp%20Image%202025-05-19%20at%2019.42.36_a4a2cf4b.jpg" alt="Remi the Mouse" class="remi-mascot">
        </div>
        <div id="debugInfo" class="mt-2">
            </div>
    </footer>

    <script type="module">
        // View management
        const homeView = document.getElementById('homeView');
        const searchView = document.getElementById('searchView');
        const addCourseView = document.getElementById('addCourseView');
        const courseDetailsView = document.getElementById('courseDetailsView');
        const addEditTermView = document.getElementById('addEditTermView');
        const challengeGameView = document.getElementById('challengeGameView');
        const learnHebrewView = document.getElementById('learnHebrewView');
        const views = [homeView, searchView, addCourseView, courseDetailsView, addEditTermView, challengeGameView, learnHebrewView];

        function showView(viewToShow) {
            views.forEach(view => {
                view.classList.add('hidden');
            });
            viewToShow.classList.remove('hidden');
        }

        // Global UI elements
        const messageBoxContainer = document.getElementById('messageBoxContainer');

        function showMessageBox(message, type = "info") {
            const box = document.createElement('div');
            box.classList.add('message-box', 'p-4', 'rounded-lg', 'shadow-lg', 'text-center');

            const backdrop = document.createElement('div');
            backdrop.classList.add('message-box-backdrop');

            let bgColor = 'bg-blue-100';
            let textColor = 'text-blue-800';
            if (type === 'success') {
                bgColor = 'bg-green-100';
                textColor = 'text-green-800';
            } else if (type === 'error') {
                bgColor = 'bg-red-100';
                textColor = 'text-red-800';
            } else if (type === 'warning') {
                bgColor = 'bg-yellow-100';
                textColor = 'text-yellow-800';
            }

            box.classList.add(bgColor, textColor);
            box.innerHTML = `
                <p class="text-xl font-semibold mb-4">${message}</p>
                <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded-md mt-2" onclick="this.closest('.message-box').remove(); this.closest('.message-box-backdrop').remove();">OK</button>
            `;

            messageBoxContainer.appendChild(backdrop);
            messageBoxContainer.appendChild(box);

            // Close after 5 seconds if not an error
            if (type !== 'error') {
                setTimeout(() => {
                    if (box.parentNode) {
                        box.remove();
                        backdrop.remove();
                    }
                }, 5000);
            }
        }

        // Course Management
        const courseList = document.getElementById('courseList');
        const showAddCourseFormBtn = document.getElementById('showAddCourseFormBtn');
        const addCourseForm = document.getElementById('addCourseForm');
        const courseNameInput = document.getElementById('courseName');
        const cancelAddCourseBtn = document.getElementById('cancelAddCourseBtn');

        async function addCourse(name) {
            if (!window.isFirebaseReady || !window.db) {
                showMessageBox("Application not ready. Please wait.", "warning");
                return;
            }
            try {
                const coursesRef = collection(window.db, 'artifacts', APP_ID, 'public', 'data', 'courses');
                // Generate a simple unique ID
                const newCourseRef = doc(coursesRef); // Firestore generates ID automatically
                await setDoc(newCourseRef, { name: name });
                showMessageBox("Course added successfully!", "success");
                addCourseForm.reset();
                showView(homeView); // Go back to home view
            } catch (e) {
                console.error("Error adding course: ", e);
                showMessageBox("Error adding course. Please try again.", "error");
            }
        }

        function renderCourses() {
            courseList.innerHTML = '';
            window.appData.courses.forEach(course => {
                const courseCard = document.createElement('div');
                courseCard.classList.add('card', 'flex', 'flex-col', 'items-center', 'justify-center', 'text-center', 'p-6');
                courseCard.innerHTML = `
                    <h3 class="text-xl font-bold mb-3">${course.name}</h3>
                    <button data-course-id="${course.id}" class="view-details-btn">View Details</button>
                `;
                courseList.appendChild(courseCard);
            });

            document.querySelectorAll('.view-details-btn').forEach(button => {
                button.onclick = (e) => {
                    const courseId = e.target.dataset.courseId;
                    viewCourseDetails(courseId);
                };
            });
        }

        // Term Management
        const courseDetailsTitle = document.getElementById('courseDetailsTitle');
        const termTableBody = document.getElementById('termTableBody');
        const showAddTermFormBtn = document.getElementById('showAddTermFormBtn');
        const addEditTermTitle = document.getElementById('addEditTermTitle');
        const addEditTermForm = document.getElementById('addEditTermForm');
        const termDefinitionInput = document.getElementById('termDefinition');
        const termHebrewInput = document.getElementById('termHebrew');
        const termPronunciationInput = document.getElementById('termPronunciation');
        const termEnglishInput = document.getElementById('termEnglish');
        const termRussianInput = document.getElementById('termRussian');
        const termArabicInput = document.getElementById('termArabic');
        const termFrenchInput = document.getElementById('termFrench');
        const termMandarinInput = document='termMandarin';
        const termSpanishInput = document.getElementById('termSpanish');
        const termHindiInput = document.getElementById('termHindi');
        const saveTermButton = document.getElementById('saveTermButton');
        const cancelAddEditTermBtn = document.getElementById('cancelAddEditTermBtn');
        const backToCoursesBtn = document.getElementById('backToCoursesBtn');
        const noTermsMessage = document.getElementById('noTermsMessage');
        const courseSearchInput = document.getElementById('courseSearchInput');

        window.currentCourseId = null;
        window.currentTermId = null;

        async function viewCourseDetails(courseId) {
            window.currentCourseId = courseId;
            const course = window.appData.courses.find(c => c.id === courseId);
            if (course) {
                courseDetailsTitle.textContent = course.name;
                showView(courseDetailsView);
                renderTerms(courseId, courseSearchInput.value.trim());
            } else {
                showMessageBox("Course not found.", "error");
                showView(homeView);
            }
        }

        function renderTerms(courseId, searchTerm = '') {
            const termsForCourse = window.appData.terms.filter(term => term.courseId === courseId);
            termTableBody.innerHTML = '';

            const filteredTerms = searchTerm
                ? termsForCourse.filter(term =>
                    term.definition.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    (term.hebrew && term.hebrew.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.english && term.english.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.russian && term.russian.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.arabic && term.arabic.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.french && term.french.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.mandarin && term.mandarin.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.spanish && term.spanish.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.hindi && term.hindi.text.toLowerCase().includes(searchTerm.toLowerCase()))
                )
                : termsForCourse;

            if (filteredTerms.length === 0) {
                noTermsMessage.classList.remove('hidden');
            } else {
                noTermsMessage.classList.add('hidden');
                filteredTerms.forEach(term => {
                    const row = termTableBody.insertRow();
                    row.innerHTML = `
                        <td class="max-w-xs overflow-hidden text-ellipsis whitespace-nowrap" title="${term.definition}">${term.definition}</td>
                        ${renderTermLanguageCell(term.hebrew, 'hebrew')}
                        ${renderTermLanguageCell(term.english, 'english')}
                        ${renderTermLanguageCell(term.russian, 'russian')}
                        ${renderTermLanguageCell(term.arabic, 'arabic')}
                        ${renderTermLanguageCell(term.french, 'french')}
                        ${renderTermLanguageCell(term.mandarin, 'mandarin')}
                        ${renderTermLanguageCell(term.spanish, 'spanish')}
                        ${renderTermLanguageCell(term.hindi, 'hindi')}
                        <td>
                            <button class="btn-edit text-sm p-2 rounded" data-term-id="${term.id}">Edit</button>
                            ${window.isValidator && window.validatorMode ? `<button class="btn-delete text-sm p-2 rounded ml-2" data-term-id="${term.id}">Delete</button>` : ''}
                            </td>
                    `;
                });
            }

            document.querySelectorAll('.edit-term-btn').forEach(button => {
                button.onclick = (e) => {
                    const termId = e.target.dataset.termId;
                    editTerm(termId);
                };
            });
            // MODIFICATION START: Add event listeners for validate buttons
            document.querySelectorAll('.validate-term-btn').forEach(button => {
                button.onclick = (e) => {
                    const termId = e.target.dataset.termId;
                    const lang = e.target.dataset.lang;
                    validateTerm(termId, lang);
                };
            });
            // MODIFICATION END
            // MODIFICATION START: Add event listeners for delete buttons
            document.querySelectorAll('.btn-delete').forEach(button => {
                button.onclick = (e) => {
                    const termId = e.target.dataset.termId;
                    deleteTerm(termId);
                };
            });
            // MODIFICATION END
        }

        // Helper function to render a language cell with validation button
        function renderTermLanguageCell(langData, langKey) {
            const text = langData && langData.text ? langData.text : 'N/A';
            const status = langData && langData.status ? langData.status : 'Not Provided';
            const validatedBy = langData && langData.validatedBy ? `Validated by: ${langData.validatedBy}` : '';
            const statusClass = `status-${status.toLowerCase().replace(' ', '-')}`;

            // MODIFICATION START: Conditionally render validate button
            const validateButtonHtml = (window.isValidator && window.validatorMode && status === 'Pending' && text !== 'N/A')
                ? `<button class="btn-validate text-xs p-1 mt-1 rounded validate-term-btn" data-term-id="${langData.termId || ''}" data-lang="${langKey}">Validate</button>`
                : '';
            // Pass term.id to validate button through langData if needed. If termId is present on langData, it means it's a sub-object
            // This is a correction: term.id should always be used, not langData.termId.
            // Adjusting based on original `renderTerms` which filters by courseId and loops `filteredTerms`
            // The `langData` parameter here is just a *part* of the term object.
            // The `data-term-id` should come from the main `term.id`.
            // The `renderTermLanguageCell` needs the `term.id` passed explicitly.
            // Let's adjust `renderTerms` to pass `term.id` to `renderTermLanguageCell`.
            // For now, I'll use a placeholder for `data-term-id` and will fix this when I integrate the whole solution.
            // Corrected: `renderTermLanguageCell` now expects `termId` as an argument.
            // MODIFICATION END

            return `
                <td>
                    <div class="flex flex-col items-start">
                        <span>${text}</span>
                        <span class="${statusClass} text-xs">${status} ${validatedBy}</span>
                        ${validateButtonHtml}
                    </div>
                </td>
            `;
        }

        // Corrected renderTerms function to pass term.id to renderTermLanguageCell
        function renderTerms(courseId, searchTerm = '') {
            const termsForCourse = window.appData.terms.filter(term => term.courseId === courseId);
            termTableBody.innerHTML = '';

            const filteredTerms = searchTerm
                ? termsForCourse.filter(term =>
                    term.definition.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    (term.hebrew && term.hebrew.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.english && term.english.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.russian && term.russian.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.arabic && term.arabic.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.french && term.french.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.mandarin && term.mandarin.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.spanish && term.spanish.text.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    (term.hindi && term.hindi.text.toLowerCase().includes(searchTerm.toLowerCase()))
                )
                : termsForCourse;

            if (filteredTerms.length === 0) {
                noTermsMessage.classList.remove('hidden');
            } else {
                noTermsMessage.classList.add('hidden');
                filteredTerms.forEach(term => {
                    const row = termTableBody.insertRow();
                    row.innerHTML = `
                        <td class="max-w-xs overflow-hidden text-ellipsis whitespace-nowrap" title="${term.definition}">${term.definition}</td>
                        ${renderTermLanguageCellWithTermId(term.hebrew, 'hebrew', term.id)}
                        ${renderTermLanguageCellWithTermId(term.english, 'english', term.id)}
                        ${renderTermLanguageCellWithTermId(term.russian, 'russian', term.id)}
                        ${renderTermLanguageCellWithTermId(term.arabic, 'arabic', term.id)}
                        ${renderTermLanguageCellWithTermId(term.french, 'french', term.id)}
                        ${renderTermLanguageCellWithTermId(term.mandarin, 'mandarin', term.id)}
                        ${renderTermLanguageCellWithTermId(term.spanish, 'spanish', term.id)}
                        ${renderTermLanguageCellWithTermId(term.hindi, 'hindi', term.id)}
                        <td>
                            <button class="btn-edit text-sm p-2 rounded" data-term-id="${term.id}">Edit</button>
                            ${window.isValidator && window.validatorMode ? `<button class="btn-delete text-sm p-2 rounded ml-2" data-term-id="${term.id}">Delete</button>` : ''}
                            </td>
                    `;
                });
            }

            document.querySelectorAll('.edit-term-btn').forEach(button => {
                button.onclick = (e) => {
                    const termId = e.target.dataset.termId;
                    editTerm(termId);
                };
            });
            // MODIFICATION START: Add event listeners for validate buttons
            document.querySelectorAll('.validate-term-btn').forEach(button => {
                button.onclick = (e) => {
                    const termId = e.target.dataset.termId;
                    const lang = e.target.dataset.lang;
                    validateTerm(termId, lang);
                };
            });
            // MODIFICATION END
            // MODIFICATION START: Add event listeners for delete buttons
            document.querySelectorAll('.btn-delete').forEach(button => {
                button.onclick = (e) => {
                    const termId = e.target.dataset.termId;
                    deleteTerm(termId);
                };
            });
            // MODIFICATION END
        }

        // Corrected helper function to render a language cell with validation button
        function renderTermLanguageCellWithTermId(langData, langKey, termId) {
            const text = langData && langData.text ? langData.text : 'N/A';
            const status = langData && langData.status ? langData.status : 'Not Provided';
            const validatedBy = langData && langData.validatedBy ? `Validated by: ${langData.validatedBy}` : '';
            const statusClass = `status-${status.toLowerCase().replace(' ', '-')}`;

            // MODIFICATION START: Conditionally render validate button
            const validateButtonHtml = (window.isValidator && window.validatorMode && status === 'Pending' && text !== 'N/A')
                ? `<button class="btn-validate text-xs p-1 mt-1 rounded validate-term-btn" data-term-id="${termId}" data-lang="${langKey}">Validate</button>`
                : '';
            // MODIFICATION END

            return `
                <td>
                    <div class="flex flex-col items-start">
                        <span>${text}</span>
                        <span class="${statusClass} text-xs">${status} ${validatedBy}</span>
                        ${validateButtonHtml}
                    </div>
                </td>
            `;
        }

        async function saveTerm(termId, courseId, definition, hebrew, pronunciation, english, russian, arabic, french, mandarin, spanish, hindi) {
            if (!window.isFirebaseReady || !window.db) {
                showMessageBox("Application not ready. Please wait.", "warning");
                return;
            }
            try {
                const termData = {
                    courseId: courseId,
                    definition: definition,
                    hebrew: { text: hebrew || null, status: hebrew ? 'Pending' : 'Not Provided', validatedBy: null },
                    pronunciation: pronunciation || null,
                    english: { text: english || null, status: english ? 'Pending' : 'Not Provided', validatedBy: null },
                    russian: { text: russian || null, status: russian ? 'Pending' : 'Not Provided', validatedBy: null },
                    arabic: { text: arabic || null, status: arabic ? 'Pending' : 'Not Provided', validatedBy: null },
                    french: { text: french || null, status: french ? 'Pending' : 'Not Provided', validatedBy: null },
                    mandarin: { text: mandarin || null, status: mandarin ? 'Pending' : 'Not Provided', validatedBy: null },
                    spanish: { text: spanish || null, status: spanish ? 'Pending' : 'Not Provided', validatedBy: null },
                    hindi: { text: hindi || null, status: hindi ? 'Pending' : 'Not Provided', validatedBy: null }
                };

                const termsRef = collection(window.db, 'artifacts', APP_ID, 'public', 'data', 'terms');
                if (termId) {
                    await updateDoc(doc(termsRef, termId), termData);
                    showMessageBox("Term updated successfully!", "success");
                } else {
                    const newTermRef = doc(termsRef);
                    await setDoc(newTermRef, { id: newTermRef.id, ...termData }); // Add id field
                    showMessageBox("Term added successfully!", "success");
                }
                addEditTermForm.reset();
                window.currentTermId = null; // Clear editing state
                viewCourseDetails(courseId); // Go back to course details
            } catch (e) {
                console.error("Error saving term: ", e);
                showMessageBox("Error saving term. Please try again.", "error");
            }
        }

        async function editTerm(termId) {
            window.currentTermId = termId;
            const term = window.appData.terms.find(t => t.id === termId);
            if (term) {
                addEditTermTitle.textContent = 'Edit Term';
                termDefinitionInput.value = term.definition;
                termHebrewInput.value = term.hebrew ? term.hebrew.text : '';
                termPronunciationInput.value = term.pronunciation || '';
                termEnglishInput.value = term.english ? term.english.text : '';
                termRussianInput.value = term.russian ? term.russian.text : '';
                termArabicInput.value = term.arabic ? term.arabic.text : '';
                termFrenchInput.value = term.french ? term.french.text : '';
                termMandarinInput.value = term.mandarin ? term.mandarin.text : '';
                termSpanishInput.value = term.spanish ? term.spanish.text : '';
                termHindiInput.value = term.hindi ? term.hindi.text : '';
                showView(addEditTermView);
            } else {
                showMessageBox("Term not found.", "error");
            }
        }

        // MODIFICATION START: Validate Term Function
        async function validateTerm(termId, language) {
            if (!window.isFirebaseReady || !window.db || !window.userId) {
                showMessageBox("Cannot validate: Please ensure you are authenticated and a validator.", "warning");
                return;
            }
            if (!window.isValidator || !window.validatorMode) {
                showMessageBox("You are not authorized to validate terms. Enable Validator Mode if you are a validator.", "error");
                return;
            }

            try {
                const termRef = doc(window.db, 'artifacts', APP_ID, 'public', 'data', 'terms', termId);
                const updateData = {};
                updateData[`${language}.status`] = 'Validated';
                updateData[`${language}.validatedBy`] = window.userId; // Store the user ID of the validator

                await updateDoc(termRef, updateData);
                showMessageBox(`'${language}' translation validated successfully!`, "success");
                // The onSnapshot listener for terms will re-render the list automatically
            } catch (e) {
                console.error(`Error validating ${language} for term ${termId}:`, e);
                showMessageBox(`Error validating ${language} translation. Please try again.`, "error");
            }
        }
        // MODIFICATION END

        // MODIFICATION START: Delete Term Function
        async function deleteTerm(termId) {
            if (!window.isFirebaseReady || !window.db || !window.userId) {
                showMessageBox("Cannot delete: Please ensure you are authenticated and a validator.", "warning");
                return;
            }
            if (!window.isValidator || !window.validatorMode) {
                showMessageBox("You are not authorized to delete terms. Enable Validator Mode if you are a validator.", "error");
                return;
            }

            const confirmDelete = confirm("Are you sure you want to delete this term? This action cannot be undone.");
            if (!confirmDelete) {
                return;
            }

            try {
                const termRef = doc(window.db, 'artifacts', APP_ID, 'public', 'data', 'terms', termId);
                await deleteDoc(termRef);
                showMessageBox("Term deleted successfully!", "success");
                // The onSnapshot listener for terms will re-render the list automatically
            } catch (e) {
                console.error(`Error deleting term ${termId}:`, e);
                showMessageBox("Error deleting term. Please try again.", "error");
            }
        }
        // MODIFICATION END

        // Event Listeners
        showAddCourseFormBtn.onclick = () => showView(addCourseView);
        cancelAddCourseBtn.onclick = () => {
            addCourseForm.reset();
            showView(homeView);
        };
        addCourseForm.onsubmit = async (e) => {
            e.preventDefault();
            await addCourse(courseNameInput.value);
        };

        showAddTermFormBtn.onclick = () => {
            addEditTermTitle.textContent = 'Add New Term';
            addEditTermForm.reset();
            window.currentTermId = null;
            showView(addEditTermView);
        };
        cancelAddEditTermBtn.onclick = () => {
            addEditTermForm.reset();
            window.currentTermId = null; // Clear editing state
            if (currentCourseId) {
                viewCourseDetails(currentCourseId); // Go back to course details if a course was selected
            } else {
                showView(homeView); // Otherwise go to home
            }
        };
        addEditTermForm.onsubmit = async (e) => {
            e.preventDefault();
            await saveTerm(
                window.currentTermId,
                window.currentCourseId,
                termDefinitionInput.value,
                termHebrewInput.value,
                termPronunciationInput.value,
                termEnglishInput.value,
                termRussianInput.value,
                termArabicInput.value,
                termFrenchInput.value,
                termMandarinInput.value,
                termSpanishInput.value,
                termHindiInput.value
            );
        };
        backToCoursesBtn.onclick = () => {
            window.currentCourseId = null;
            courseSearchInput.value = ''; // Clear search when going back
            showView(homeView);
        };
        courseSearchInput.onkeyup = () => {
            renderTerms(window.currentCourseId, courseSearchInput.value.trim());
        };

        // Global Search
        const globalSearchInput = document.getElementById('globalSearchInput');
        const searchResultsList = document.getElementById('searchResultsList');
        const noSearchResultsMessage = document.getElementById('noSearchResultsMessage');
        const clearSearchBtn = document.getElementById('clearSearchBtn');

        globalSearchInput.onkeyup = () => {
            const searchTerm = globalSearchInput.value.trim().toLowerCase();
            searchResultsList.innerHTML = '';
            
            if (searchTerm.length === 0) {
                noSearchResultsMessage.classList.add('hidden');
                return;
            }

            const matchingTerms = window.appData.terms.filter(term =>
                term.definition.toLowerCase().includes(searchTerm) ||
                (term.hebrew && term.hebrew.text.toLowerCase().includes(searchTerm)) ||
                (term.english && term.english.text.toLowerCase().includes(searchTerm)) ||
                (term.russian && term.russian.text.toLowerCase().includes(searchTerm)) ||
                (term.arabic && term.arabic.text.toLowerCase().includes(searchTerm)) ||
                (term.french && term.french.text.toLowerCase().includes(searchTerm)) ||
                (term.mandarin && term.mandarin.text.toLowerCase().includes(searchTerm)) ||
                (term.spanish && term.spanish.text.toLowerCase().includes(searchTerm)) ||
                (term.hindi && term.hindi.text.toLowerCase().includes(searchTerm))
            );

            if (matchingTerms.length > 0) {
                noSearchResultsMessage.classList.add('hidden');
                matchingTerms.forEach(term => {
                    const termCard = document.createElement('div');
                    termCard.classList.add('card', 'p-4');
                    const course = window.appData.courses.find(c => c.id === term.courseId);
                    termCard.innerHTML = `
                        <h3 class="text-lg font-semibold mb-2">${term.definition}</h3>
                        <p class="text-sm text-gray-600 mb-2">Course: ${course ? course.name : 'Unknown Course'}</p>
                        <p class="text-sm"><strong>Hebrew:</strong> ${term.hebrew ? term.hebrew.text : 'N/A'} <span class="status-${term.hebrew ? term.hebrew.status.toLowerCase().replace(' ', '-') : 'not-provided'} text-xs">${term.hebrew ? term.hebrew.status : ''}</span></p>
                        <p class="text-sm"><strong>English:</strong> ${term.english ? term.english.text : 'N/A'} <span class="status-${term.english ? term.english.status.toLowerCase().replace(' ', '-') : 'not-provided'} text-xs">${term.english ? term.english.status : ''}</span></p>
                        `;
                    searchResultsList.appendChild(termCard);
                });
            } else {
                noSearchResultsMessage.classList.remove('hidden');
            }
        };

        clearSearchBtn.onclick = () => {
            globalSearchInput.value = '';
            searchResultsList.innerHTML = '';
            noSearchResultsMessage.classList.remove('hidden');
        };

        // Navigation Buttons
        const homeButton = document.getElementById('homeButton');
        // MODIFICATION START: Renamed validatorAuthButton to validatorModeToggleButton
        const validatorModeToggleButton = document.getElementById('validatorModeToggleButton');
        // MODIFICATION END
        const becomeValidatorButton = document.getElementById('becomeValidator');
        const challengeGameButton = document.getElementById('challengeGameButton');
        const searchButton = document.getElementById('searchButton');
        const learnHebrewButton = document.getElementById('learnHebrewButton');

        homeButton.onclick = () => {
            showView(homeView);
            window.currentCourseId = null; // Clear current course context
        };

        // MODIFICATION START: Logic for Validator Mode Toggle
        validatorModeToggleButton.onclick = () => {
            if (!window.isValidator) {
                showMessageBox("You are not authorized to enable validator mode.", "error");
                return;
            }
            window.validatorMode = !window.validatorMode;
            updateUIForUserRole(); // Update button text and class, and re-render terms
            showMessageBox(`Validator Mode ${window.validatorMode ? 'ENABLED' : 'DISABLED'}`, "info");
        };
        // MODIFICATION END

        // MODIFICATION START: Logic for Become a Validator Button and Trust Agreement Modal
        const trustAgreementModal = document.getElementById('trustAgreementModal');
        const agreeToTrustTermsCheckbox = document.getElementById('agreeToTrustTerms');
        const confirmTrustAgreementButton = document.getElementById('confirmTrustAgreement');
        const cancelTrustAgreementButton = document.getElementById('cancelTrustAgreement');

        becomeValidatorButton.onclick = () => {
            if (!window.userId) {
                showMessageBox("Please wait for authentication to complete before becoming a validator.", "warning");
                return;
            }
            trustAgreementModal.classList.remove('hidden');
            agreeToTrustTermsCheckbox.checked = false; // Reset checkbox state
            confirmTrustAgreementButton.disabled = true; // Disable confirm button initially
        };

        agreeToTrustTermsCheckbox.onchange = () => {
            confirmTrustAgreementButton.disabled = !agreeToTrustTermsCheckbox.checked;
        };

        confirmTrustAgreementButton.onclick = async () => {
            if (agreeToTrustTermsCheckbox.checked) {
                await updateUserRole(true, "V2025Key", "Congratulations! You are now a validator and have been issued the V2025 Key.");
                trustAgreementModal.classList.add('hidden');
            } else {
                showMessageBox("You must agree to the terms to become a validator.", "warning");
            }
        };

        cancelTrustAgreementButton.onclick = () => {
            trustAgreementModal.classList.add('hidden');
        };
        // MODIFICATION END


        // "Linguini Challenge" button click handler
        const challengeGameStartScreen = document.getElementById('challengeGameStartScreen');
        const challengeGamePlayScreen = document.getElementById('challengeGamePlayScreen');
        const challengeGameOverScreen = document.getElementById('challengeGameOverScreen');
        const challengeGameLanguageSelect = document.getElementById('challengeGameLanguageSelect');
        const challengeGameCourseSelect = document.getElementById('challengeGameCourseSelect');
        const startGameButton = document.getElementById('startGameButton');
        const challengeQuestion = document.getElementById('challengeQuestion');
        const challengeOptions = document.getElementById('challengeOptions');
        const challengeFeedback = document.getElementById('challengeFeedback');
        const nextQuestionButton = document.getElementById('nextQuestionButton');
        const challengeScoreDisplay = document.getElementById('challengeScore');
        const challengeTotalQuestionsDisplay = document.getElementById('challengeTotalQuestions');
        const restartGameButton = document.getElementById('restartGameButton');
        const backToHomeFromChallenge = document.getElementById('backToHomeFromChallenge');

        let currentChallengeTerms = [];
        let currentChallengeIndex = 0;
        let currentChallengeScore = 0;
        let challengeGameLanguage = '';
        let challengeGameCourseId = '';

        function populateChallengeGameLanguageSelect() {
            const languages = ['hebrew', 'english', 'russian', 'arabic', 'french', 'mandarin', 'spanish', 'hindi'];
            challengeGameLanguageSelect.innerHTML = '<option value="">Select Language</option>'; // Default option
            languages.forEach(lang => {
                const option = document.createElement('option');
                option.value = lang;
                option.textContent = lang.charAt(0).toUpperCase() + lang.slice(1);
                challengeGameLanguageSelect.appendChild(option);
            });

            // Populate course select
            challengeGameCourseSelect.innerHTML = '<option value="">All Courses</option>';
            window.appData.courses.forEach(course => {
                const option = document.createElement('option');
                option.value = course.id;
                option.textContent = course.name;
                challengeGameCourseSelect.appendChild(option);
            });
        }

        async function startChallengeGame() {
            challengeGameLanguage = challengeGameLanguageSelect.value;
            challengeGameCourseId = challengeGameCourseSelect.value;

            if (!challengeGameLanguage) {
                showMessageBox("Please select a language for the challenge.", "warning");
                return;
            }

            let termsToUse = window.appData.terms.filter(term => {
                const langData = term[challengeGameLanguage];
                return langData && langData.text && langData.status === 'Validated'; // Only use validated terms
            });

            if (challengeGameCourseId) {
                termsToUse = termsToUse.filter(term => term.courseId === challengeGameCourseId);
            }

            if (termsToUse.length < 4) { // Need at least 4 terms for options
                showMessageBox("Not enough validated terms in the selected language/course for a challenge. Please add more or choose a different selection.", "warning");
                return;
            }

            currentChallengeTerms = shuffleArray(termsToUse);
            currentChallengeIndex = 0;
            currentChallengeScore = 0;

            showView(challengeGameView);
            challengeGameStartScreen.classList.add('hidden');
            challengeGameOverScreen.classList.add('hidden');
            challengeGamePlayScreen.classList.remove('hidden');

            loadChallengeQuestion();
        }

        function loadChallengeQuestion() {
            if (currentChallengeIndex >= currentChallengeTerms.length) {
                endChallengeGame();
                return;
            }

            challengeFeedback.textContent = '';
            nextQuestionButton.classList.add('hidden');
            challengeOptions.innerHTML = '';

            const currentTerm = currentChallengeTerms[currentChallengeIndex];
            const correctTranslation = currentTerm[challengeGameLanguage].text;
            challengeQuestion.textContent = `What is the ${challengeGameLanguage} translation for "${currentTerm.definition}"?`;

            // Generate 3 random incorrect options
            const incorrectOptions = window.appData.terms
                .filter(term => term.id !== currentTerm.id && term[challengeGameLanguage] && term[challengeGameLanguage].text && term[challengeGameLanguage].status === 'Validated')
                .map(term => term[challengeGameLanguage].text);
            const shuffledIncorrect = shuffleArray(incorrectOptions).slice(0, 3);

            // Combine correct and incorrect, then shuffle
            const allOptions = shuffleArray([...shuffledIncorrect, correctTranslation]);

            allOptions.forEach(optionText => {
                const button = document.createElement('button');
                button.classList.add('game-option-button');
                button.textContent = optionText;
                button.onclick = () => checkChallengeAnswer(optionText, correctTranslation, button);
                challengeOptions.appendChild(button);
            });
        }

        function checkChallengeAnswer(selectedAnswer, correctAnswer, clickedButton) {
            // Disable all buttons after an answer is selected
            document.querySelectorAll('.game-option-button').forEach(button => button.disabled = true);

            if (selectedAnswer === correctAnswer) {
                currentChallengeScore++;
                clickedButton.classList.add('correct');
                challengeFeedback.textContent = "Correct!";
                playSuccessSound();
            } else {
                clickedButton.classList.add('incorrect');
                challengeFeedback.textContent = `Incorrect. The correct answer was: "${correctAnswer}"`;
                // Highlight the correct answer
                document.querySelectorAll('.game-option-button').forEach(button => {
                    if (button.textContent === correctAnswer) {
                        button.classList.add('correct');
                    }
                });
                playErrorSound();
            }
            nextQuestionButton.classList.remove('hidden');
        }

        function endChallengeGame() {
            showView(challengeGameView);
            challengeGamePlayScreen.classList.add('hidden');
            challengeGameOverScreen.classList.remove('hidden');
            challengeScoreDisplay.textContent = currentChallengeScore;
            challengeTotalQuestionsDisplay.textContent = currentChallengeTerms.length;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Sound effects
        const synth = new Tone.Synth().toDestination();
        function playSuccessSound() {
            synth.triggerAttackRelease("C5", "8n");
        }
        function playErrorSound() {
            synth.triggerAttackRelease("C3", "8n");
        }

        challengeGameButton.onclick = () => {
            showView(challengeGameView);
            challengeGameStartScreen.classList.remove('hidden');
            challengeGamePlayScreen.classList.add('hidden');
            challengeGameOverScreen.classList.add('hidden');
            populateChallengeGameLanguageSelect(); // Ensure dropdown is fresh
        };
        startGameButton.onclick = startChallengeGame;
        nextQuestionButton.onclick = () => {
            currentChallengeIndex++;
            loadChallengeQuestion();
        };
        restartGameButton.onclick = startChallengeGame; // Reuses start game logic
        backToHomeFromChallenge.onclick = () => {
            showView(homeView);
            window.currentCourseId = null;
        };

        // "Learn Hebrew" Game Logic
        const learnHebrewStartScreen = document.getElementById('learnHebrewStartScreen');
        const learnHebrewPlayScreen = document.getElementById('learnHebrewPlayScreen');
        const learnHebrewEndScreen = document.getElementById('learnHebrewEndScreen');
        const learnHebrewCourseSelect = document.getElementById('learnHebrewCourseSelect');
        const startLearnHebrewButton = document.getElementById('startLearnHebrewButton');
        const hebrewTermDisplay = document.getElementById('hebrewTermDisplay');
        const pronunciationDisplay = document.getElementById('pronunciationDisplay');
        const revealAnswerButton = document.getElementById('revealAnswerButton');
        const learnHebrewFeedback = document.getElementById('learnHebrewFeedback');
        const nextHebrewTermButton = document.getElementById('nextHebrewTermButton');
        const restartLearnHebrewButton = document.getElementById('restartLearnHebrewButton');
        const backToHomeFromLearnHebrew = document.getElementById('backToHomeFromLearnHebrew');

        let currentLearnHebrewTerms = [];
        let currentLearnHebrewIndex = 0;

        function populateLearnHebrewLanguageSelect() {
            learnHebrewCourseSelect.innerHTML = '<option value="">All Courses</option>';
            window.appData.courses.forEach(course => {
                const option = document.createElement('option');
                option.value = course.id;
                option.textContent = course.name;
                learnHebrewCourseSelect.appendChild(option);
            });
        }

        function startLearnHebrew() {
            const selectedCourseId = learnHebrewCourseSelect.value;
            let termsToUse = window.appData.terms.filter(term => {
                // Only include terms that have a Hebrew translation and it is validated
                return term.hebrew && term.hebrew.text && term.hebrew.status === 'Validated';
            });

            if (selectedCourseId) {
                termsToUse = termsToUse.filter(term => term.courseId === selectedCourseId);
            }

            if (termsToUse.length === 0) {
                showMessageBox("No validated Hebrew terms found in the selected course (or any course). Please add and validate some Hebrew terms.", "warning");
                return;
            }

            currentLearnHebrewTerms = shuffleArray(termsToUse);
            currentLearnHebrewIndex = 0;

            showView(learnHebrewView);
            learnHebrewStartScreen.classList.add('hidden');
            learnHebrewEndScreen.classList.add('hidden');
            learnHebrewPlayScreen.classList.remove('hidden');

            loadNextHebrewTerm();
        }

        function loadNextHebrewTerm() {
            if (currentLearnHebrewIndex >= currentLearnHebrewTerms.length) {
                endLearnHebrewSession();
                return;
            }

            const currentTerm = currentLearnHebrewTerms[currentLearnHebrewIndex];
            hebrewTermDisplay.textContent = currentTerm.hebrew.text;
            pronunciationDisplay.textContent = `(${currentTerm.pronunciation || 'No pronunciation'})`;
            learnHebrewFeedback.textContent = '';
            revealAnswerButton.classList.remove('hidden');
            nextHebrewTermButton.classList.add('hidden');

            // Hide the definition initially
            hebrewTermDisplay.title = ""; // Clear title to prevent tooltip
        }

        revealAnswerButton.onclick = () => {
            const currentTerm = currentLearnHebrewTerms[currentLearnHebrewIndex];
            learnHebrewFeedback.textContent = `Definition: ${currentTerm.definition}`;
            revealAnswerButton.classList.add('hidden');
            nextHebrewTermButton.classList.remove('hidden');
            // Show the definition in a tooltip as well
            hebrewTermDisplay.title = currentTerm.definition;
        };

        nextHebrewTermButton.onclick = () => {
            currentLearnHebrewIndex++;
            loadNextHebrewTerm();
        };

        function endLearnHebrewSession() {
            showView(learnHebrewView);
            learnHebrewPlayScreen.classList.add('hidden');
            learnHebrewEndScreen.classList.remove('hidden');
        }

        learnHebrewButton.onclick = () => {
            showView(learnHebrewView);
            learnHebrewStartScreen.classList.remove('hidden');
            learnHebrewPlayScreen.classList.add('hidden');
            learnHebrewEndScreen.classList.add('hidden');
            populateLearnHebrewLanguageSelect(); // Ensure dropdown is fresh
        };
        startLearnHebrewButton.onclick = startLearnHebrew;
        restartLearnHebrewButton.onclick = startLearnHebrew;
        backToHomeFromLearnHebrew.onclick = () => {
            showView(homeView);
            window.currentCourseId = null;
        };
        
        // "Search" button click handler
        searchButton.onclick = () => {
            showView(searchView);
            globalSearchInput.value = ''; // Clear search input when entering search view
            searchResultsList.innerHTML = '';
            noSearchResultsMessage.classList.remove('hidden');
        };
    </script>
</body>
</html>
