<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linguini - Technion Educational Site</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>

    <style>
        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Lightest gray for overall background */
            color: #343A40; /* Dark gray for main text */
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem; /* Increased padding */
        }

        /* Card styling - more prominent shadow, softer corners */
        .card {
            background-color: #ffffff;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); /* Softer, more spread out shadow */
            padding: 2rem; /* Increased padding */
            margin-bottom: 2rem; /* Increased margin */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px); /* Slight lift on hover */
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }

        /* Input and textarea styling - refined borders, clear focus */
        input[type="text"], textarea, select {
            border: 1px solid #CED4DA; /* Lighter gray border */
            border-radius: 0.5rem; /* Slightly more rounded */
            padding: 0.75rem 1rem;
            width: 100%;
            font-size: 1rem;
            color: #343A40;
            background-color: #ffffff;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        input[type="text"]:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #4CAF50; /* Accent green for focus */
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.25); /* Green shadow for focus */
        }

        /* Checkbox styling */
        input[type="checkbox"] {
            margin-right: 0.5rem;
            width: 1.25rem; /* Standard size */
            height: 1.25rem;
            accent-color: #4CAF50; /* Green accent for checked state */
        }


        /* Button styling - primary accent color, subtle hover effects */
        button {
            background-color: #4CAF50; /* Primary accent green */
            color: white;
            padding: 0.85rem 1.75rem; /* More generous padding */
            border-radius: 0.625rem; /* rounded-lg */
            font-weight: 600;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.2s ease-in-out;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* Soft shadow */
            display: inline-flex; /* For icons to be centered */
            align-items: center;
            justify-content: center;
            gap: 0.5rem; /* Space between icon and text */
        }
        button:hover {
            background-color: #43A047; /* Darker green on hover */
            transform: translateY(-2px); /* Slightly more pronounced lift */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Secondary button style */
        .btn-secondary {
            background-color: #98B4AA; /* Muted blue-gray */
            color: #343A40; /* Dark text for contrast */
            box-shadow: none; /* No shadow by default for secondary */
        }
        .btn-secondary:hover {
            background-color: #7A908D; /* Darker muted blue-gray */
            color: white; /* Text turns white on hover for better contrast */
            transform: translateY(-1px);
        }
        .btn-secondary:active {
            transform: translateY(0);
        }

        /* Specific button styles (kept for functionality, integrated with new palette) */
        .btn-validate { background-color: #28A745; } /* Bootstrap success green */
        .btn-validate:hover { background-color: #218838; }
        .btn-edit { background-color: #FFC107; color: #343A40; } /* Bootstrap warning yellow, dark text */
        .btn-edit:hover { background-color: #E0A800; }
        .btn-delete { background-color: #DC3545; } /* Bootstrap danger red */
        .btn-delete:hover { background-color: #C82333; }

        /* Status colors */
        .status-pending { color: #FFC107; font-weight: 500; }
        .status-validated { color: #28A745; font-weight: 500; }
        .status-not-provided { color: #6C757D; font-style: italic; } /* Muted gray */
        .status-overall-fully-validated { color: #198754; font-weight: 600; } /* Darker green */
        .status-overall-partially-validated { color: #FFC107; font-weight: 600; }
        .status-overall-pending { color: #DC3545; font-weight: 600; }

        /* Message box styling */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 2.5rem; /* More padding */
            border-radius: 0.75rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25); /* Deeper shadow */
            z-index: 1000;
            text-align: center;
            min-width: 320px;
            max-width: 90%;
            border: 1px solid #E9ECEF; /* Subtle border */
        }
        .message-box-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6); /* Darker overlay */
            z-index: 999;
        }

        /* Table styling - refined borders and padding */
        .term-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem; /* More space */
            border-radius: 0.5rem; /* Rounded table corners */
            overflow: hidden; /* Ensures rounded corners are visible */
        }
        .term-table th, .term-table td {
            border: 1px solid #E9ECEF; /* Lighter border for cells */
            padding: 1rem; /* More padding */
            text-align: left;
            vertical-align: middle;
        }
        .term-table th {
            background-color: #F0F2F5; /* Very light gray for header */
            font-weight: 600;
            color: #343A40;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.05em;
        }
        .term-table tr:nth-child(even) {
            background-color: #F8F9FA; /* Subtle zebra striping */
        }

        /* Custom header background color */
        .bg-header-custom {
            background-color: #faeddb;
            color: #343A40; /* Text color for header content */
            padding: 1rem 0; /* Reduced padding for a tighter header */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); /* Lighter header shadow */
        }
        .bg-header-custom .container {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
        .bg-header-custom button {
            background-color: #ffffff; /* White background for header buttons */
            color: #4CAF50; /* Green text for header buttons */
            padding: 0.6rem 1.2rem; /* Adjusted padding for header buttons */
            font-weight: 500;
            font-size: 0.95rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
        }
        .bg-header-custom button:hover {
            background-color: #F0F2F5; /* Light gray on hover */
            color: #388E3C; /* Darker green on hover */
            transform: translateY(-1px);
        }

        /* Game specific styles (Linguini Challenge and Learn Hebrew) */
        .game-option-button, .learn-hebrew-option-button {
            @apply bg-4CAF50 text-white py-4 px-6 rounded-lg text-2xl font-bold w-full transition-all duration-200 ease-in-out shadow-md; /* Larger text, more padding, shadow */
        }
        .game-option-button:hover, .learn-hebrew-option-button:hover {
            @apply bg-43A047 transform scale-102 shadow-lg; /* Darker green, slight scale, deeper shadow */
        }
        .game-option-button.correct, .learn-hebrew-option-button.correct {
            @apply bg-28A745; /* Success green */
        }
        .game-option-button.incorrect, .learn-hebrew-option-button.incorrect {
            @apply bg-DC3545; /* Danger red */
        }

        /* Learn Hebrew specific styles */
        #hebrewTermDisplay {
            font-size: 6rem; /* Even larger for impact */
            line-height: 1;
            margin-bottom: 0.5rem;
        }
        #pronunciationDisplay {
            font-size: 1.8rem;
            color: #6C757D;
        }
        #learnHebrewFeedback {
            font-size: 1.8rem;
        }

        /* Flexbox for footer content */
        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem; /* Space between text and mascot */
        }

        /* Remi the mouse specific style */
        .remi-mascot {
            height: 4rem; /* Adjust size as needed */
            width: auto;
            border-radius: 9999px; /* Fully rounded */
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* Debug Info Styling */
        #debugInfo {
            font-size: 0.75rem;
            color: #A0A0A0;
            margin-top: 1rem;
            text-align: center;
        }
        #debugInfo span {
            font-weight: bold;
            color: #E0E0E0;
        }

        /* New Modal Specific Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            visibility: hidden; /* Hidden by default */
            opacity: 0;
            transition: visibility 0s, opacity 0.3s ease-in-out;
        }

        .modal.show {
            visibility: visible;
            opacity: 1;
        }

        .modal-content {
            background-color: white;
            padding: 2.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
            width: 90%;
            max-width: 500px;
            position: relative;
            animation: slideIn 0.3s ease-out forwards;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6C757D;
            transition: color 0.2s;
        }

        .close-button:hover {
            color: #343A40;
        }

        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #343A40;
        }

        .form-group input[type="text"],
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #CED4DA;
            border-radius: 0.5rem;
            font-size: 1rem;
        }

        .form-group input[type="text"]:focus,
        .form-group textarea:focus {
            border-color: #4CAF50;
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        .form-group input[type="checkbox"] {
            vertical-align: middle;
        }

        #secretKeyDisplay {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #e6ffe6; /* Light green background */
            border: 1px solid #4CAF50; /* Green border */
            border-radius: 0.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: #28A745;
            text-align: center;
            word-break: break-all; /* Ensure long key wraps */
            display: none; /* Hidden by default */
        }

        #validationMessage {
            color: #DC3545; /* Red for errors */
            margin-top: 1rem;
            font-weight: 500;
            display: none; /* Hidden by default */
        }
    </style>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-analytics.js";
        // Also import Auth and Firestore for your app's functionality
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-auth.js";
        import { getFirestore, collection, query, getDocs, doc, getDoc, addDoc, setDoc, updateDoc, deleteDoc, onSnapshot, where } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-firestore.js";

        // Your web app's Firebase configuration (hardcoded directly)
        const firebaseConfig = {
            apiKey: "AIzaSyD9ijB7vwoQbog5JUCO76F5vMlvsvusodk",
            authDomain: "linguini-database.firebaseapp.com",
            projectId: "linguini-database",
            storageBucket: "linguini-database.firebasestorage.app",
            messagingSenderId: "363537478736",
            appId: "1:363537478736:web:a62c9290a9574f969d8d55",
            measurementId: "G-0D0KLF5W1V"
        };

        // Define a constant for the app ID directly from firebaseConfig
        const APP_ID = firebaseConfig.appId;

        // Global variables for Firebase instances and user ID
        window.firebaseApp = null;
        window.db = null;
        window.auth = null;
        window.userId = null;
        window.isFirebaseReady = false; // Flag to ensure Firestore operations run only after auth

        // Initial application data to seed Firestore if empty
        window.initialAppData = {
            courses: [
                { id: 'c1', name: 'Calculus 1' },
                { id: 'c2', name: 'Algebra 1' },
                { id: 'c3', name: 'Intro to CS' },
                { id: 'c4', name: 'Physics 1' },
                { id: 'c5', name: 'Chemistry 1' },
                { id: 'c6', name: 'Biology 1' }
            ],
            terms: [
                // Calculus 1 Terms (c1)
                {
                    id: 't1', courseId: 'c1', definition: 'The rate at which the value of a function changes with respect to a change in the independent variable.',
                    hebrew: { text: 'נגזרת', status: 'Pending', validatedBy: null },
                    pronunciation: 'nigzeret',
                    english: { text: 'Derivative', status: 'Pending', validatedBy: null },
                    russian: { text: 'Производная', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مشتقة', status: 'Pending', validatedBy: null },
                    french: { text: 'Dérivée', status: 'Pending', validatedBy: null },
                    mandarin: { text: '导数', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Derivada', status: 'Pending', validatedBy: null },
                    hindi: { text: 'व्युत्पन्न', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't2', courseId: 'c1', definition: 'A mathematical object that can be interpreted as an area, a generalization of mass, or the total change of a quantity whose rate of change is known.',
                    hebrew: { text: 'אינטגרל', status: 'Pending', validatedBy: null },
                    pronunciation: 'integral',
                    english: { text: 'Integral', status: 'Pending', validatedBy: null },
                    russian: { text: 'Интеграл', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تكامل', status: 'Pending', validatedBy: null },
                    french: { text: 'Intégrale', status: 'Pending', validatedBy: null },
                    mandarin: { text: '积分', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Integral', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अभिन्न', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't12', courseId: 'c1', definition: 'A limit of a function in calculus that defines the value a function approaches as the input (or index) approaches some value.',
                    hebrew: { text: 'גבול', status: 'Pending', validatedBy: null },
                    pronunciation: 'gvul',
                    english: { text: 'Limit', status: 'Pending', validatedBy: null },
                    russian: { text: 'Предел', status: 'Pending', validatedBy: null },
                    arabic: { text: 'نهاية', status: 'Pending', validatedBy: null },
                    french: { text: 'Limite', status: 'Pending', validatedBy: null },
                    mandarin: { text: '极限', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Límite', status: 'Pending', validatedBy: null },
                    hindi: { text: 'सीमा', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't21', courseId: 'c1', definition: 'The inverse operation of differentiation, used to find functions whose derivative is known.',
                    hebrew: { text: 'אנטי-נגזרת', status: 'Pending', validatedBy: null },
                    pronunciation: 'anti-nigzeret',
                    english: { text: 'Antiderivative', status: 'Pending', validatedBy: null },
                    russian: { text: 'Первообразная', status: 'Pending', validatedBy: null },
                    arabic: { text: 'المشتقة العكسية', status: 'Pending', validatedBy: null },
                    french: { text: 'Primitive', status: 'Pending', validatedBy: null },
                    mandarin: { text: '反导数', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Antiderivada', status: 'Pending', validatedBy: null },
                    hindi: { text: 'प्रति-अवकalaj', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_5', courseId: 'c1', definition: 'The concept of continuity is fundamental to calculus and describes functions that do not have abrupt changes in value.',
                    hebrew: { text: 'רציפות', status: 'Pending', validatedBy: null },
                    pronunciation: 'retsifut',
                    english: { text: 'Continuity', status: 'Pending', validatedBy: null },
                    russian: { text: 'Непрерывность', status: 'Pending', validatedBy: null },
                    arabic: { text: 'استمرارية', status: 'Pending', validatedBy: null },
                    french: { text: 'Continuité', status: 'Pending', validatedBy: null },
                    mandarin: { text: '连续性', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Continuidad', status: 'Pending', validatedBy: null },
                    hindi: { text: 'निरंतरता', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_6', courseId: 'c1', definition: 'The process of finding the maximum or minimum value of a function.',
                    hebrew: { text: 'אופטימיזציה', status: 'Pending', validatedBy: null },
                    pronunciation: 'optimitzatsya',
                    english: { text: 'Optimization', status: 'Pending', validatedBy: null },
                    russian: { text: 'Оптимизация', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تحسين', status: 'Pending', validatedBy: null },
                    french: { text: 'Optimisation', status: 'Pending', validatedBy: null },
                    mandarin: { text: '优化', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Optimización', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अनुकूलन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_7', courseId: 'c1', definition: 'The set of all points where a function is defined.',
                    hebrew: { text: 'תחום הגדרה', status: 'Pending', validatedBy: null },
                    pronunciation: 'tchum hagdara',
                    english: { text: 'Domain', status: 'Pending', validatedBy: null },
                    russian: { text: 'Область определения', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مجال التعريف', status: 'Pending', validatedBy: null },
                    french: { text: 'Domaine de définition', status: 'Pending', validatedBy: null },
                    mandarin: { text: '定义域', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Dominio', status: 'Pending', validatedBy: null },
                    hindi: { text: 'डोमेन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_8', courseId: 'c1', definition: 'The set of all possible output values of a function.',
                    hebrew: { text: 'טווח', status: 'Pending', validatedBy: null },
                    pronunciation: 'tvach',
                    english: { text: 'Range', status: 'Pending', validatedBy: null },
                    russian: { text: 'Область значений', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مدى', status: 'Pending', validatedBy: null },
                    french: { text: 'Image', status: 'Pending', validatedBy: null },
                    mandarin: { text: '值域', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Rango', status: 'Pending', validatedBy: null },
                    hindi: { text: 'श्रेणी', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_9', courseId: 'c1', definition: 'A vertical asymptote is a vertical line that the graph of a function approaches but never touches as the input value approaches a certain number.',
                    hebrew: { text: 'אסימפטוטה אנכית', status: 'Pending', validatedBy: null },
                    pronunciation: 'asimptota anachit',
                    english: { text: 'Vertical Asymptote', status: 'Pending', validatedBy: null },
                    russian: { text: 'Вертикальная асимптота', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مقارب رأسي', status: 'Pending', validatedBy: null },
                    french: { text: 'Asymptote verticale', status: 'Pending', validatedBy: null },
                    mandarin: { text: '垂直渐近线', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Asíntota vertical', status: 'Pending', validatedBy: null },
                    hindi: { text: 'ऊर्ध्वाधर स्पर्शोन्मुख', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_10', courseId: 'c1', definition: 'A horizontal asymptote is a horizontal line that the graph of a function approaches as the input value tends towards positive or negative infinity.',
                    hebrew: { text: 'אסימפטוטה אופקית', status: 'Pending', validatedBy: null },
                    pronunciation: 'asimptota ofkit',
                    english: { text: 'Horizontal Asymptote', status: 'Pending', validatedBy: null },
                    russian: { text: 'Горизонтальная асимптота', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مقارب أفقي', status: 'Pending', validatedBy: null },
                    french: { text: 'Asymptote horizontale', status: 'Pending', validatedBy: null },
                    mandarin: { text: '水平渐近线', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Asíntota horizontal', status: 'Pending', validatedBy: null },
                    hindi: { text: 'क्षैतिज स्पर्शोन्मुख', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_11', courseId: 'c1', definition: 'The definite integral can be interpreted as the area of the region bounded by the graph of a function, the x-axis, and vertical lines.',
                    hebrew: { text: 'אינטגרל מסוים', status: 'Pending', validatedBy: null },
                    pronunciation: 'integral meyuham',
                    english: { text: 'Definite Integral', status: 'Pending', validatedBy: null },
                    russian: { text: 'Определенный интеграл', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تكامل محدد', status: 'Pending', validatedBy: null },
                    french: { text: 'Intégrale définie', status: 'Pending', validatedBy: null },
                    mandarin: { text: '定积分', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Integral definida', status: 'Pending', validatedBy: null },
                    hindi: { text: 'निश्चित समाकल', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c1_12', courseId: 'c1', definition: 'A tangent line to a curve at a given point is a straight line that "just touches" the curve at that point.',
                    hebrew: { text: 'קו משיק', status: 'Pending', validatedBy: null },
                    pronunciation: 'kav mashik',
                    english: { text: 'Tangent Line', status: 'Pending', validatedBy: null },
                    russian: { text: 'Касательная', status: 'Pending', validatedBy: null },
                    arabic: { text: 'خط مماس', status: 'Pending', validatedBy: null },
                    french: { text: 'Tangente', status: 'Pending', validatedBy: null },
                    mandarin: { text: '切线', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Recta tangente', status: 'Pending', validatedBy: null },
                    hindi: { text: 'स्पर्श रेखा', status: 'Pending', validatedBy: null }
                },

                // Algebra 1 Terms (c2)
                {
                    id: 't3', courseId: 'c2', definition: 'A rectangular array of numbers, symbols, or expressions, arranged in rows and columns.',
                    hebrew: { text: 'מטריצה', status: 'Pending', validatedBy: null },
                    pronunciation: 'matritza',
                    english: { text: 'Matrix', status: 'Pending', validatedBy: null },
                    russian: { text: 'Матрица', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مصفوفة', status: 'Pending', validatedBy: null },
                    french: { text: 'Matrice', status: 'Pending', validatedBy: null },
                    mandarin: { text: '矩阵', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Matriz', status: 'Pending', validatedBy: null },
                    hindi: { text: 'आव्यूह', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't13', courseId: 'c2', definition: 'A scalar value that is a function of the entries of a square matrix.',
                    hebrew: { text: 'דטרמיננטה', status: 'Pending', validatedBy: null },
                    pronunciation: 'determinanta',
                    english: { text: 'Determinant', status: 'Pending', validatedBy: null },
                    russian: { text: 'Определитель', status: 'Pending', validatedBy: null },
                    arabic: { text: 'محدد', status: 'Pending', validatedBy: null },
                    french: { text: 'Déterminant', status: 'Pending', validatedBy: null },
                    mandarin: { text: '行列式', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Determinante', status: 'Pending', validatedBy: null },
                    hindi: { text: 'निर्धारक', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't22', courseId: 'c2', definition: 'A vector space is a set of objects, called vectors, on which two operations are defined: vector addition and scalar multiplication.',
                    hebrew: { text: 'מרחב וקטורי', status: 'Pending', validatedBy: null },
                    pronunciation: 'merchav vektori',
                    english: { text: 'Vector Space', status: 'Pending', validatedBy: null },
                    russian: { text: 'Векторное пространство', status: 'Pending', validatedBy: null },
                    arabic: { text: 'فضاء متجه', status: 'Pending', validatedBy: null },
                    french: { text: 'Espace vectoriel', status: 'Pending', validatedBy: null },
                    mandarin: { text: '向量空间', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Espacio vectorial', status: 'Pending', validatedBy: null },
                    hindi: { text: 'सदिश समष्टि', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_4', courseId: 'c2', definition: 'An equation containing variables raised to the first power, with no products of variables.',
                    hebrew: { text: 'משוואה ליניארית', status: 'Pending', validatedBy: null },
                    pronunciation: 'mishvaah linearit',
                    english: { text: 'Linear Equation', status: 'Pending', validatedBy: null },
                    russian: { text: 'Линейное уравнение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'معادلة خطية', status: 'Pending', validatedBy: null },
                    french: { text: 'Équation linéaire', status: 'Pending', validatedBy: null },
                    mandarin: { text: '线性方程', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Ecuación lineal', status: 'Pending', validatedBy: null },
                    hindi: { text: 'रेखीय समीकरण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_5', courseId: 'c2', definition: 'A collection of linear equations involving the same set of variables.',
                    hebrew: { text: 'מערכת משוואות', status: 'Pending', validatedBy: null },
                    pronunciation: 'maarechet mishvaot',
                    english: { text: 'System of Equations', status: 'Pending', validatedBy: null },
                    russian: { text: 'Система уравнений', status: 'Pending', validatedBy: null },
                    arabic: { text: 'نظام معادلات', status: 'Pending', validatedBy: null },
                    french: { text: 'Système d\'équations', status: 'Pending', validatedBy: null },
                    mandarin: { text: '方程组', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Sistema de ecuaciones', status: 'Pending', validatedBy: null },
                    hindi: { text: 'समीकरणों का तंत्र', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_6', courseId: 'c2', definition: 'A number that, when multiplied by another number, yields 1.',
                    hebrew: { text: 'הופכי', status: 'Pending', validatedBy: null },
                    pronunciation: 'hofchi',
                    english: { text: 'Reciprocal', status: 'Pending', validatedBy: null },
                    russian: { text: 'Взаимный', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مقلوب', status: 'Pending', validatedBy: null },
                    french: { text: 'Inverse', status: 'Pending', validatedBy: null },
                    mandarin: { text: '倒数', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Recíproco', status: 'Pending', validatedBy: null },
                    hindi: { text: 'व्युत्क्रम', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_7', courseId: 'c2', definition: 'A value that describes the steepness and direction of a line.',
                    hebrew: { text: 'שיפוע', status: 'Pending', validatedBy: null },
                    pronunciation: 'shipuach',
                    english: { text: 'Slope', status: 'Pending', validatedBy: null },
                    russian: { text: 'Наклон', status: 'Pending', validatedBy: null },
                    arabic: { text: 'ميل', status: 'Pending', validatedBy: null },
                    french: { text: 'Pente', status: 'Pending', validatedBy: null },
                    mandarin: { text: '斜率', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Pendiente', status: 'Pending', validatedBy: null },
                    hindi: { text: 'ढलान', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c2_8', courseId: 'c2', definition: 'A mathematical statement that two expressions are equal.',
                    hebrew: { text: 'שוויון', status: 'Pending', validatedBy: null },
                    pronunciation: 'shivyon',
                    english: { text: 'Equality', status: 'Pending', validatedBy: null },
                    russian: { text: 'Равенство', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مساواة', status: 'Pending', validatedBy: null },
                    french: { text: 'Égalité', status: 'Pending', validatedBy: null },
                    mandarin: { text: '相等', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Igualdad', status: 'Pending', validatedBy: null },
                    hindi: { text: 'समानता', status: 'Pending', validatedBy: null }
                },
                // Intro to CS Terms (c3)
                {
                    id: 't4', courseId: 'c3', definition: 'A step-by-step procedure for solving a problem or accomplishing a task.',
                    hebrew: { text: 'אלגוריתם', status: 'Pending', validatedBy: null },
                    pronunciation: 'algoritm',
                    english: { text: 'Algorithm', status: 'Pending', validatedBy: null },
                    russian: { text: 'Алгоритм', status: 'Pending', validatedBy: null },
                    arabic: { text: 'خوارزمية', status: 'Pending', validatedBy: null },
                    french: { text: 'Algorithme', status: 'Pending', validatedBy: null },
                    mandarin: { text: '算法', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Algoritmo', status: 'Pending', validatedBy: null },
                    hindi: { text: 'एल्गोरिथम', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't14', courseId: 'c3', definition: 'A set of instructions that a computer can understand and execute.',
                    hebrew: { text: 'קוד', status: 'Pending', validatedBy: null },
                    pronunciation: 'kod',
                    english: { text: 'Code', status: 'Pending', validatedBy: null },
                    russian: { text: 'Код', status: 'Pending', validatedBy: null },
                    arabic: { text: 'رمز', status: 'Pending', validatedBy: null },
                    french: { text: 'Code', status: 'Pending', validatedBy: null },
                    mandarin: { text: '代码', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Código', status: 'Pending', validatedBy: null },
                    hindi: { text: 'कोड', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't23', courseId: 'c3', definition: 'The process of finding and fixing errors or bugs in computer program code.',
                    hebrew: { text: 'דיבוג', status: 'Pending', validatedBy: null },
                    pronunciation: 'dibug',
                    english: { text: 'Debugging', status: 'Pending', validatedBy: null },
                    russian: { text: 'Отладка', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تصحيح الأخطاء', status: 'Pending', validatedBy: null },
                    french: { text: 'Débogage', status: 'Pending', validatedBy: null },
                    mandarin: { text: '调试', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Depuración', status: 'Pending', validatedBy: null },
                    hindi: { text: 'डीबगिंग', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_4', courseId: 'c3', definition: 'A programming paradigm based on the concept of "objects", which can contain data and code.',
                    hebrew: { text: 'תכנות מונחה עצמים', status: 'Pending', validatedBy: null },
                    pronunciation: 'tichnut muncheh atsamim',
                    english: { text: 'Object-Oriented Programming (OOP)', status: 'Pending', validatedBy: null },
                    russian: { text: 'Объектно-ориентированное программирование (ООП)', status: 'Pending', validatedBy: null },
                    arabic: { text: 'البرمجة الشيئية', status: 'Pending', validatedBy: null },
                    french: { text: 'Programmation orientée objet (POO)', status: 'Pending', validatedBy: null },
                    mandarin: { text: '面向对象编程', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Programación orientada a objetos (POO)', status: 'Pending', validatedBy: null },
                    hindi: { text: 'ऑब्जेक्ट-ओरिएंटेड प्रोग्रामिंग (ओओपी)', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_5', courseId: 'c3', definition: 'A variable is a storage location paired with an associated symbolic name, which contains some known or unknown quantity of information referred to as a value.',
                    hebrew: { text: 'משתנה', status: 'Pending', validatedBy: null },
                    pronunciation: 'mishtaneh',
                    english: { text: 'Variable', status: 'Pending', validatedBy: null },
                    russian: { text: 'Переменная', status: 'Pending', validatedBy: null },
                    arabic: { text: 'متغير', status: 'Pending', validatedBy: null },
                    french: { text: 'Variable', status: 'Pending', validatedBy: null },
                    mandarin: { text: '变量', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Variable', status: 'Pending', validatedBy: null },
                    hindi: { text: 'चर', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_6', courseId: 'c3', definition: 'A sequence of characters, either as a literal constant or as some kind of variable.',
                    hebrew: { text: 'מחרוזת', status: 'Pending', validatedBy: null },
                    pronunciation: 'machrozet',
                    english: { text: 'String', status: 'Pending', validatedBy: null },
                    russian: { text: 'Строка', status: 'Pending', validatedBy: null },
                    arabic: { text: 'سلسلة نصية', status: 'Pending', validatedBy: null },
                    french: { text: 'Chaîne de caractères', status: 'Pending', validatedBy: null },
                    mandarin: { text: '字符串', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Cadena de texto', status: 'Pending', validatedBy: null },
                    hindi: { text: 'स्ट्रिंग', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_7', courseId: 'c3', definition: 'A fundamental data type in computer programming that represents true or false values.',
                    hebrew: { text: 'בוליאני', status: 'Pending', validatedBy: null },
                    pronunciation: 'boolean-i',
                    english: { text: 'Boolean', status: 'Pending', validatedBy: null },
                    russian: { text: 'Булево значение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'قيمة منطقية', status: 'Pending', validatedBy: null },
                    french: { text: 'Booléen', status: 'Pending', validatedBy: null },
                    mandarin: { text: '布尔值', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Booleano', status: 'Pending', validatedBy: null },
                    hindi: { text: 'बूलियन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_8', courseId: 'c3', definition: 'A named section of a program that performs a specific task.',
                    hebrew: { text: 'פונקציה', status: 'Pending', validatedBy: null },
                    pronunciation: 'funktsia',
                    english: { text: 'Function', status: 'Pending', validatedBy: null },
                    russian: { text: 'Функция', status: 'Pending', validatedBy: null },
                    arabic: { text: 'دالة', status: 'Pending', validatedBy: null },
                    french: { text: 'Fonction', status: 'Pending', validatedBy: null },
                    mandarin: { text: '函数', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Función', status: 'Pending', validatedBy: null },
                    hindi: { text: 'फ़ंक्शन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_9', courseId: 'c3', definition: 'A conditional statement in computer programming that executes a block of code if a specified condition is true.',
                    hebrew: { text: 'תנאי If', status: 'Pending', validatedBy: null },
                    pronunciation: 'tnai if',
                    english: { text: 'If Statement', status: 'Pending', validatedBy: null },
                    russian: { text: 'Условный оператор If', status: 'Pending', validatedBy: null },
                    arabic: { text: 'عبارة If', status: 'Pending', validatedBy: null },
                    french: { text: 'Instruction If', status: 'Pending', validatedBy: null },
                    mandarin: { text: 'If语句', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Sentencia If', status: 'Pending', validatedBy: null },
                    hindi: { text: 'इफ़ स्टेटमेंट', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c3_10', courseId: 'c3', definition: 'A control flow statement for specifying iteration, which allows code to be executed repeatedly.',
                    hebrew: { text: 'לולאה', status: 'Pending', validatedBy: null },
                    pronunciation: 'lulaa',
                    english: { text: 'Loop', status: 'Pending', validatedBy: null },
                    russian: { text: 'Цикл', status: 'Pending', validatedBy: null },
                    arabic: { text: 'حلقة', status: 'Pending', validatedBy: null },
                    french: { text: 'Boucle', status: 'Pending', validatedBy: null },
                    mandarin: { text: '循环', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Bucle', status: 'Pending', validatedBy: null },
                    hindi: { text: 'लूप', status: 'Pending', validatedBy: null }
                },

                // Physics 1 Terms (c4)
                {
                    id: 't5', courseId: 'c4', definition: 'The rate at which an object changes its position.',
                    hebrew: { text: 'מהירות', status: 'Pending', validatedBy: null },
                    pronunciation: 'mehirut',
                    english: { text: 'Velocity', status: 'Pending', validatedBy: null },
                    russian: { text: 'Скорость', status: 'Pending', validatedBy: null },
                    arabic: { text: 'سرعة', status: 'Pending', validatedBy: null },
                    french: { text: 'Vitesse', status: 'Pending', validatedBy: null },
                    mandarin: { text: '速度', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Velocidad', status: 'Pending', validatedBy: null },
                    hindi: { text: 'वेग', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't15', courseId: 'c4', definition: 'The rate of change of velocity per unit of time.',
                    hebrew: { text: 'תאוצה', status: 'Pending', validatedBy: null },
                    pronunciation: 'teutza',
                    english: { text: 'Acceleration', status: 'Pending', validatedBy: null },
                    russian: { text: 'Ускорение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تسارع', status: 'Pending', validatedBy: null },
                    french: { text: 'Accélération', status: 'Pending', validatedBy: null },
                    mandarin: { text: '加速度', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Aceleración', status: 'Pending', validatedBy: null },
                    hindi: { text: 'त्वरण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't24', courseId: 'c4', definition: 'A measure of the quantity of matter in an object.',
                    hebrew: { text: 'מסה', status: 'Pending', validatedBy: null },
                    pronunciation: 'masa',
                    english: { text: 'Mass', status: 'Pending', validatedBy: null },
                    russian: { text: 'Масса', status: 'Pending', validatedBy: null },
                    arabic: { text: 'كتلة', status: 'Pending', validatedBy: null },
                    french: { text: 'Masse', status: 'Pending', validatedBy: null },
                    mandarin: { text: '质量', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Masa', status: 'Pending', validatedBy: null },
                    hindi: { text: 'द्रव्यमान', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_4', courseId: 'c4', definition: 'The force that opposes the motion of a body across a surface or through a resisting medium.',
                    hebrew: { text: 'חיכוך', status: 'Pending', validatedBy: null },
                    pronunciation: 'chikuch',
                    english: { text: 'Friction', status: 'Pending', validatedBy: null },
                    russian: { text: 'Трение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'احت friction', status: 'Pending', validatedBy: null },
                    french: { text: 'Frottement', status: 'Pending', validatedBy: null },
                    mandarin: { text: '摩擦力', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Fricción', status: 'Pending', validatedBy: null },
                    hindi: { text: 'घर्षण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_5', courseId: 'c4', definition: 'The energy possessed by an object due to its motion.',
                    hebrew: { text: 'אנרגיה קינטית', status: 'Pending', validatedBy: null },
                    pronunciation: 'energia kinetit',
                    english: { text: 'Kinetic Energy', status: 'Pending', validatedBy: null },
                    russian: { text: 'Кинетическая энергия', status: 'Pending', validatedBy: null },
                    arabic: { text: 'طاقة حركية', status: 'Pending', validatedBy: null },
                    french: { text: 'Énergie cinétique', status: 'Pending', validatedBy: null },
                    mandarin: { text: '动能', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Energía cinética', status: 'Pending', validatedBy: null },
                    hindi: { text: 'गतिज ऊर्जा', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_6', courseId: 'c4', definition: 'The energy stored in an object due to its position or configuration.',
                    hebrew: { text: 'אנרגיה פוטנציאלית', status: 'Pending', validatedBy: null },
                    pronunciation: 'energia potentialit',
                    english: { text: 'Potential Energy', status: 'Pending', validatedBy: null },
                    russian: { text: 'Потенциальная энергия', status: 'Pending', validatedBy: null },
                    arabic: { text: 'طاقة كامنة', status: 'Pending', validatedBy: null },
                    french: { text: 'Énergie potentielle', status: 'Pending', validatedBy: null },
                    mandarin: { text: '势能', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Energía potencial', status: 'Pending', validatedBy: null },
                    hindi: { text: 'स्थितिज ऊर्जा', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_7', courseId: 'c4', definition: 'The fundamental force of attraction between any two objects with mass.',
                    hebrew: { text: 'כבידה', status: 'Pending', validatedBy: null },
                    pronunciation: 'k_vida',
                    english: { text: 'Gravity', status: 'Pending', validatedBy: null },
                    russian: { text: 'Гравитация', status: 'Pending', validatedBy: null },
                    arabic: { text: 'جاذبية', status: 'Pending', validatedBy: null },
                    french: { text: 'Gravité', status: 'Pending', validatedBy: null },
                    mandarin: { text: '引力', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Gravedad', status: 'Pending', validatedBy: null },
                    hindi: { text: 'गुरुत्वाकर्षण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_8', courseId: 'c4', definition: 'The property of matter by which it continues in its existing state of rest or uniform motion in a straight line, unless that state is changed by an external force.',
                    hebrew: { text: 'אינרציה', status: 'Pending', validatedBy: null },
                    pronunciation: 'inertsia',
                    english: { text: 'Inertia', status: 'Pending', validatedBy: null },
                    russian: { text: 'Инерция', status: 'Pending', validatedBy: null },
                    arabic: { text: 'عطالة', status: 'Pending', validatedBy: null },
                    french: { text: 'Inertie', status: 'Pending', validatedBy: null },
                    mandarin: { text: '惯性', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Inercia', status: 'Pending', validatedBy: null },
                    hindi: { text: 'जड़त्व', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_9', courseId: 'c4', definition: 'The unit of force in the International System of Units (SI).',
                    hebrew: { text: 'ניוטון', status: 'Pending', validatedBy: null },
                    pronunciation: 'niuton',
                    english: { text: 'Newton', status: 'Pending', validatedBy: null },
                    russian: { text: 'Ньютон', status: 'Pending', validatedBy: null },
                    arabic: { text: 'نيوتن', status: 'Pending', validatedBy: null },
                    french: { text: 'Newton', status: 'Pending', validatedBy: null },
                    mandarin: { text: '牛顿', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Newton', status: 'Pending', validatedBy: null },
                    hindi: { text: 'न्यूटन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c4_10', courseId: 'c4', definition: 'The SI unit of energy, equivalent to the work done by a force of one newton when its point of application moves one meter in the direction of the force.',
                    hebrew: { text: 'ג'אול', status: 'Pending', validatedBy: null },
                    pronunciation: 'joule',
                    english: { text: 'Joule', status: 'Pending', validatedBy: null },
                    russian: { text: 'Джоуль', status: 'Pending', validatedBy: null },
                    arabic: { text: 'جول', status: 'Pending', validatedBy: null },
                    french: { text: 'Joule', status: 'Pending', validatedBy: null },
                    mandarin: { text: '焦耳', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Julio', status: 'Pending', validatedBy: null },
                    hindi: { text: 'जूल', status: 'Pending', validatedBy: null }
                },

                // Chemistry 1 Terms (c5)
                {
                    id: 't6', courseId: 'c5', definition: 'The smallest unit of ordinary matter that forms a chemical element.',
                    hebrew: { text: 'אטום', status: 'Pending', validatedBy: null },
                    pronunciation: 'atom',
                    english: { text: 'Atom', status: 'Pending', validatedBy: null },
                    russian: { text: 'Атом', status: 'Pending', validatedBy: null },
                    arabic: { text: 'ذرة', status: 'Pending', validatedBy: null },
                    french: { text: 'Atome', status: 'Pending', validatedBy: null },
                    mandarin: { text: '原子', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Átomo', status: 'Pending', validatedBy: null },
                    hindi: { text: 'परमाणु', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't16', courseId: 'c5', definition: 'A group of two or more atoms held together by chemical bonds.',
                    hebrew: { text: 'מולקולה', status: 'Pending', validatedBy: null },
                    pronunciation: 'molekula',
                    english: { text: 'Molecule', status: 'Pending', validatedBy: null },
                    russian: { text: 'Молекула', status: 'Pending', validatedBy: null },
                    arabic: { text: 'جزيء', status: 'Pending', validatedBy: null },
                    french: { text: 'Molécule', status: 'Pending', validatedBy: null },
                    mandarin: { text: '分子', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Molécula', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अणु', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't25', courseId: 'c5', definition: 'A substance consisting of atoms which all have the same number of protons.',
                    hebrew: { text: 'יסוד כימי', status: 'Pending', validatedBy: null },
                    pronunciation: 'yesod kimi',
                    english: { text: 'Chemical Element', status: 'Pending', validatedBy: null },
                    russian: { text: 'Химический элемент', status: 'Pending', validatedBy: null },
                    arabic: { text: 'عنصر كيميائي', status: 'Pending', validatedBy: null },
                    french: { text: 'Élément chimique', status: 'Pending', validatedBy: null },
                    mandarin: { text: '化学元素', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Elemento químico', status: 'Pending', validatedBy: null },
                    hindi: { text: 'रासायनिक तत्व', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_4', courseId: 'c5', definition: 'A table that organizes all known chemical elements by atomic number.',
                    hebrew: { text: 'טבלה מחזורית', status: 'Pending', validatedBy: null },
                    pronunciation: 'tavla machzorit',
                    english: { text: 'Periodic Table', status: 'Pending', validatedBy: null },
                    russian: { text: 'Периодическая таблица', status: 'Pending', validatedBy: null },
                    arabic: { text: 'الجدول الدوري', status: 'Pending', validatedBy: null },
                    french: { text: 'Tableau périodique', status: 'Pending', validatedBy: null },
                    mandarin: { text: '元素周期表', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Tabla periódica', status: 'Pending', validatedBy: null },
                    hindi: { text: 'आवर्त सारणी', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_5', courseId: 'c5', definition: 'A substance formed when two or more chemical elements are chemically bonded together.',
                    hebrew: { text: 'תרכובת', status: 'Pending', validatedBy: null },
                    pronunciation: 'tirkovet',
                    english: { text: 'Compound', status: 'Pending', validatedBy: null },
                    russian: { text: 'Соединение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مركب', status: 'Pending', validatedBy: null },
                    french: { text: 'Composé', status: 'Pending', validatedBy: null },
                    mandarin: { text: '化合物', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Compuesto', status: 'Pending', validatedBy: null },
                    hindi: { text: 'यौगिक', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_6', courseId: 'c5', definition: 'The process that involves rearrangement of the atomic and molecular structure of substances.',
                    hebrew: { text: 'תגובה כימית', status: 'Pending', validatedBy: null },
                    pronunciation: 'tguva kimit',
                    english: { text: 'Chemical Reaction', status: 'Pending', validatedBy: null },
                    russian: { text: 'Химическая реакция', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تفاعل كيميائي', status: 'Pending', validatedBy: null },
                    french: { text: 'Réaction chimique', status: 'Pending', validatedBy: null },
                    mandarin: { text: '化学反应', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Reacción química', status: 'Pending', validatedBy: null },
                    hindi: { text: 'रासायनिक प्रतिक्रिया', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_7', courseId: 'c5', definition: 'A substance that produces hydrogen ions (H+) when dissolved in water.',
                    hebrew: { text: 'חומצה', status: 'Pending', validatedBy: null },
                    pronunciation: 'chumtza',
                    english: { text: 'Acid', status: 'Pending', validatedBy: null },
                    russian: { text: 'Кислота', status: 'Pending', validatedBy: null },
                    arabic: { text: 'حمض', status: 'Pending', validatedBy: null },
                    french: { text: 'Acide', status: 'Pending', validatedBy: null },
                    mandarin: { text: '酸', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Ácido', status: 'Pending', validatedBy: null },
                    hindi: { text: 'अम्ल', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_8', courseId: 'c5', definition: 'A substance that produces hydroxide ions (OH-) when dissolved in water.',
                    hebrew: { text: 'בסיס', status: 'Pending', validatedBy: null },
                    pronunciation: 'basis',
                    english: { text: 'Base', status: 'Pending', validatedBy: null },
                    russian: { text: 'Основание', status: 'Pending', validatedBy: null },
                    arabic: { text: 'قاعدة', status: 'Pending', validatedBy: null },
                    french: { text: 'Base', status: 'Pending', validatedBy: null },
                    mandarin: { text: '碱', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Base', status: 'Pending', validatedBy: null },
                    hindi: { text: 'क्षार', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_9', courseId: 'c5', definition: 'A numerical scale used to specify the acidity or basicity of an aqueous solution.',
                    hebrew: { text: 'pH', status: 'Pending', validatedBy: null },
                    pronunciation: 'pi-eych',
                    english: { text: 'pH', status: 'Pending', validatedBy: null },
                    russian: { text: 'pH', status: 'Pending', validatedBy: null },
                    arabic: { text: 'pH', status: 'Pending', validatedBy: null },
                    french: { text: 'pH', status: 'Pending', validatedBy: null },
                    mandarin: { text: 'pH', status: 'Pending', validatedBy: null },
                    spanish: { text: 'pH', status: 'Pending', validatedBy: null },
                    hindi: { text: 'पीएच', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c5_10', courseId: 'c5', definition: 'A measurement of the amount of substance in a sample.',
                    hebrew: { text: 'מול', status: 'Pending', validatedBy: null },
                    pronunciation: 'mol',
                    english: { text: 'Mole', status: 'Pending', validatedBy: null },
                    russian: { text: 'Моль', status: 'Pending', validatedBy: null },
                    arabic: { text: 'مول', status: 'Pending', validatedBy: null },
                    french: { text: 'Mole', status: 'Pending', validatedBy: null },
                    mandarin: { text: '摩尔', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Mol', status: 'Pending', validatedBy: null },
                    hindi: { text: 'मोल', status: 'Pending', validatedBy: null }
                },

                // Biology 1 Terms (c6)
                {
                    id: 't7', courseId: 'c6', definition: 'The basic structural, functional, and biological unit of all known organisms.',
                    hebrew: { text: 'תא', status: 'Pending', validatedBy: null },
                    pronunciation: 'ta',
                    english: { text: 'Cell', status: 'Pending', validatedBy: null },
                    russian: { text: 'Клетка', status: 'Pending', validatedBy: null },
                    arabic: { text: 'خلية', status: 'Pending', validatedBy: null },
                    french: { text: 'Cellule', status: 'Pending', validatedBy: null },
                    mandarin: { text: '细胞', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Célula', status: 'Pending', validatedBy: null },
                    hindi: { text: 'कोशिका', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't17', courseId: 'c6', definition: 'A self-replicating material that is present in nearly all living organisms as the main constituent of chromosomes. It is the carrier of genetic information.',
                    hebrew: { text: 'DNA', status: 'Pending', validatedBy: null },
                    pronunciation: 'di-en-ey',
                    english: { text: 'DNA', status: 'Pending', validatedBy: null },
                    russian: { text: 'ДНК', status: 'Pending', validatedBy: null },
                    arabic: { text: 'DNA', status: 'Pending', validatedBy: null },
                    french: { text: 'ADN', status: 'Pending', validatedBy: null },
                    mandarin: { text: 'DNA', status: 'Pending', validatedBy: null },
                    spanish: { text: 'ADN', status: 'Pending', validatedBy: null },
                    hindi: { text: 'डीएनए', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't26', courseId: 'c6', definition: 'The process by which green plants and some other organisms use sunlight to synthesize foods from carbon dioxide and water.',
                    hebrew: { text: 'פוטוסינתזה', status: 'Pending', validatedBy: null },
                    pronunciation: 'fotosinteza',
                    english: { text: 'Photosynthesis', status: 'Pending', validatedBy: null },
                    russian: { text: 'Фотосинтез', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تمثيل ضوئي', status: 'Pending', validatedBy: null },
                    french: { text: 'Photosynthèse', status: 'Pending', validatedBy: null },
                    mandarin: { text: '光合作用', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Fotosíntesis', status: 'Pending', validatedBy: null },
                    hindi: { text: 'प्रकाश संश्लेषण', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_4', courseId: 'c6', definition: 'An organelle found in large numbers in most eukaryotic cells, in which the biochemical processes of respiration and energy production occur.',
                    hebrew: { text: 'מיטוכונדריה', status: 'Pending', validatedBy: null },
                    pronunciation: 'mitochondria',
                    english: { text: 'Mitochondria', status: 'Pending', validatedBy: null },
                    russian: { text: 'Митохондрия', status: 'Pending', validatedBy: null },
                    arabic: { text: 'ميتوكوندريا', status: 'Pending', validatedBy: null },
                    french: { text: 'Mitochondrie', status: 'Pending', validatedBy: null },
                    mandarin: { text: '线粒体', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Mitocondria', status: 'Pending', validatedBy: null },
                    hindi: { text: 'माइटोकॉन्ड्रिया', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_5', courseId: 'c6', definition: 'A living organism that creates its own food, usually through photosynthesis.',
                    hebrew: { text: 'אוטוטרוף', status: 'Pending', validatedBy: null },
                    pronunciation: 'autotroph',
                    english: { text: 'Autotroph', status: 'Pending', validatedBy: null },
                    russian: { text: 'Автотроф', status: 'Pending', validatedBy: null },
                    arabic: { text: 'ذاتي التغذية', status: 'Pending', validatedBy: null },
                    french: { text: 'Autotrophe', status: 'Pending', validatedBy: null },
                    mandarin: { text: '自养生物', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Autótrofo', status: 'Pending', validatedBy: null },
                    hindi: { text: 'स्वपोषी', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_6', courseId: 'c6', definition: 'An organism that obtains food by consuming other organisms or organic matter.',
                    hebrew: { text: 'הטרוטרוף', status: 'Pending', validatedBy: null },
                    pronunciation: 'heterotroph',
                    english: { text: 'Heterotroph', status: 'Pending', validatedBy: null },
                    russian: { text: 'Гетеротроф', status: 'Pending', validatedBy: null },
                    arabic: { text: 'غيري التغذية', status: 'Pending', validatedBy: null },
                    french: { text: 'Hétérotrophe', status: 'Pending', validatedBy: null },
                    mandarin: { text: '异养生物', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Heterótrofo', status: 'Pending', validatedBy: null },
                    hindi: { text: 'परपोषी', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_7', courseId: 'c6', definition: 'The process of maintaining a stable, relatively constant internal environment.',
                    hebrew: { text: 'הומאוסטזיס', status: 'Pending', validatedBy: null },
                    pronunciation: 'homeostasis',
                    english: { text: 'Homeostasis', status: 'Pending', validatedBy: null },
                    russian: { text: 'Гомеостаз', status: 'Pending', validatedBy: null },
                    arabic: { text: 'استتباب', status: 'Pending', validatedBy: null },
                    french: { text: 'Homéostasie', status: 'Pending', validatedBy: null },
                    mandarin: { text: '内稳态', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Homeostasis', status: 'Pending', validatedBy: null },
                    hindi: { text: 'समस्थापन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_8', courseId: 'c6', definition: 'The process by which organisms with heritable traits better suited to the environment tend to survive and reproduce more than their less well-suited peers.',
                    hebrew: { text: 'ברירה טבעית', status: 'Pending', validatedBy: null },
                    pronunciation: 'brira tiv\'it',
                    english: { text: 'Natural Selection', status: 'Pending', validatedBy: null },
                    russian: { text: 'Естественный отбор', status: 'Pending', validatedBy: null },
                    arabic: { text: 'انتخاب طبيعي', status: 'Pending', validatedBy: null },
                    french: { text: 'Sélection naturelle', status: 'Pending', validatedBy: null },
                    mandarin: { text: '自然选择', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Selección natural', status: 'Pending', validatedBy: null },
                    hindi: { text: 'प्राकृतिक चयन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_9', courseId: 'c6', definition: 'The process of producing new organisms from existing ones.',
                    hebrew: { text: 'רבייה', status: 'Pending', validatedBy: null },
                    pronunciation: 'reviyah',
                    english: { text: 'Reproduction', status: 'Pending', validatedBy: null },
                    russian: { text: 'Размножение', status: 'Pending', validatedBy: null },
                    arabic: { text: 'تكاثر', status: 'Pending', validatedBy: null },
                    french: { text: 'Reproduction', status: 'Pending', validatedBy: null },
                    mandarin: { text: '繁殖', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Reproducción', status: 'Pending', validatedBy: null },
                    hindi: { text: 'प्रजनन', status: 'Pending', validatedBy: null }
                },
                {
                    id: 't_c6_10', courseId: 'c6', definition: 'A mature haploid male or female germ cell which is able to unite with another of the opposite sex in sexual reproduction to form a zygote.',
                    hebrew: { text: 'גמטה', status: 'Pending', validatedBy: null },
                    pronunciation: 'gameta',
                    english: { text: 'Gamete', status: 'Pending', validatedBy: null },
                    russian: { text: 'Гамета', status: 'Pending', validatedBy: null },
                    arabic: { text: 'خلية جنسية', status: 'Pending', validatedBy: null },
                    french: { text: 'Gamet', status: 'Pending', validatedBy: null },
                    mandarin: { text: '配子', status: 'Pending', validatedBy: null },
                    spanish: { text: 'Gámeto', status: 'Pending', validatedBy: null },
                    hindi: { text: 'युग्मक', status: 'Pending', validatedBy: null }
                }
            ]
        };

        // Firebase Initialization and Auth Logic
        window.addEventListener('DOMContentLoaded', async () => {
            try {
                window.firebaseApp = initializeApp(firebaseConfig);
                // getAnalytics(window.firebaseApp); // Uncomment if you need analytics
                window.auth = getAuth(window.firebaseApp);
                window.db = getFirestore(window.firebaseApp);

                // Check for custom auth token first (e.g., from Canvas)
                const initialAuthToken = localStorage.getItem('__initial_auth_token');
                if (initialAuthToken) {
                    await signInWithCustomToken(window.auth, initialAuthToken);
                    console.log('Signed in with custom token.');
                } else {
                    // Fallback to anonymous sign-in for general web access
                    await signInAnonymously(window.auth);
                    console.log('Signed in anonymously.');
                }

                onAuthStateChanged(window.auth, (user) => {
                    if (user) {
                        window.userId = user.uid;
                        window.isFirebaseReady = true;
                        console.log('Firebase ready. User ID:', window.userId);
                        document.getElementById('debugInfo').innerHTML = `Firebase Initialized | User ID: <span>${window.userId}</span>`;
                        initializeLinguiniApp(); // Initialize your main app logic only after Firebase is ready
                    } else {
                        console.log('No user signed in. Functionality may be limited.');
                        document.getElementById('debugInfo').innerHTML = 'Firebase Initialization: <span>Error or No User</span>';
                        // Optionally disable parts of the UI or show an error message
                        showErrorMessage('Error signing in. Functionality may be limited.');
                    }
                });

            } catch (error) {
                console.error("Error initializing Firebase or signing in:", error);
                showErrorMessage('Error signing in. Functionality may be limited: ' + error.message);
                document.getElementById('debugInfo').innerHTML = `Firebase Initialization: <span>Error (${error.message})</span>`;
            }
        });

        async function initializeLinguiniApp() {
            // Ensure data seeding and UI rendering happens only after Firebase is ready
            if (!window.isFirebaseReady) {
                console.warn('Firebase not ready. Skipping app initialization.');
                return;
            }

            // Function to seed initial data if collections are empty
            async function seedInitialData() {
                const coursesCollectionRef = collection(window.db, `artifacts/${APP_ID}/public/data/courses`);
                const termsCollectionRef = collection(window.db, `artifacts/${APP_ID}/public/data/terms`);

                // Check if courses exist
                const courseDocs = await getDocs(coursesCollectionRef);
                if (courseDocs.empty) {
                    console.log('Seeding initial courses...');
                    for (const course of window.initialAppData.courses) {
                        await setDoc(doc(coursesCollectionRef, course.id), course);
                    }
                    console.log('Courses seeded.');
                } else {
                    console.log('Courses already exist, skipping seeding.');
                }

                // Check if terms exist
                const termDocs = await getDocs(termsCollectionRef);
                if (termDocs.empty) {
                    console.log('Seeding initial terms...');
                    for (const term of window.initialAppData.terms) {
                        await setDoc(doc(termsCollectionRef, term.id), term);
                    }
                    console.log('Terms seeded.');
                } else {
                    console.log('Terms already exist, skipping seeding.');
                }
            }

            await seedInitialData();

            // All your existing app logic that depends on Firebase goes here
            // e.g., loadCourses, renderTerms, setupEventListeners, etc.
            window.loadCourses = async () => {
                if (!window.isFirebaseReady) {
                    console.warn('Firebase not ready. Cannot load courses.');
                    return [];
                }
                const coursesCol = collection(window.db, `artifacts/${APP_ID}/public/data/courses`);
                const courseSnapshot = await getDocs(coursesCol);
                const courses = courseSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                console.log('Loaded Courses:', courses);
                return courses;
            };

            window.loadTerms = async (courseId) => {
                if (!window.isFirebaseReady) {
                    console.warn('Firebase not ready. Cannot load terms.');
                    return [];
                }
                const termsCol = collection(window.db, `artifacts/${APP_ID}/public/data/terms`);
                const q = query(termsCol, where("courseId", "==", courseId));
                const termSnapshot = await getDocs(q);
                const terms = termSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                console.log(`Loaded Terms for ${courseId}:`, terms);
                return terms;
            };

            // Existing functions (renderCoursesDropdown, renderTermsTable, etc.)
            // Make sure these are called *after* `initializeLinguiniApp` finishes.
            // You might need to move them inside or call them from here.
            renderCoursesDropdown();
            renderTermsTable(selectedCourseId); // Assuming selectedCourseId is available globally or derived.

            // Set up real-time listener for terms to update UI
            const termsCollectionRef = collection(window.db, `artifacts/${APP_ID}/public/data/terms`);
            onSnapshot(termsCollectionRef, (snapshot) => {
                console.log("Real-time update received for terms!");
                // Re-render the terms table or specific parts that need updating
                renderTermsTable(selectedCourseId);
            }, (error) => {
                console.error("Error listening to terms:", error);
                showErrorMessage("Error updating terms in real-time. Please refresh.");
            });

            // Set up real-time listener for courses to update UI
            const coursesCollectionRef = collection(window.db, `artifacts/${APP_ID}/public/data/courses`);
            onSnapshot(coursesCollectionRef, (snapshot) => {
                console.log("Real-time update received for courses!");
                renderCoursesDropdown();
            }, (error) => {
                console.error("Error listening to courses:", error);
                showErrorMessage("Error updating courses in real-time. Please refresh.");
            });
        }
    </script>
</head>
<body class="antialiased">
    <div class="bg-header-custom py-4">
        <div class="container flex justify-between items-center">
            <h1 class="text-4xl font-bold tracking-tight text-green-700">Linguini</h1>
            <nav class="space-x-4">
                <button class="btn-secondary" onclick="showSection('browse-terms')">Browse Terms</button>
                <button class="btn-secondary" onclick="showSection('add-term')">Add Term</button>
                <button class="btn-secondary" onclick="showSection('linguini-challenge')">Linguini Challenge</button>
                <button class="btn-secondary" onclick="showSection('learn-hebrew')">Learn Hebrew</button>
                <button class="btn-secondary" onclick="openValidatorForm()">Become a Validator</button>
            </nav>
        </div>
    </div>

    <main class="container my-8">
        <section id="browse-terms" class="card active-section">
            <h2 class="text-3xl font-semibold mb-6 text-center text-gray-800">Browse Scientific Terms</h2>
            <div class="mb-6">
                <label for="course-select" class="block text-lg font-medium text-gray-700 mb-2">Select a Course:</label>
                <select id="course-select" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 text-base" onchange="renderTermsTable(this.value)">
                    </select>
            </div>
            <div id="terms-table-container" class="overflow-x-auto">
                </div>
        </section>

        <section id="add-term" class="card hidden-section">
            <h2 class="text-3xl font-semibold mb-6 text-center text-gray-800">Add New Term</h2>
            <form id="add-term-form" class="space-y-6">
                <div>
                    <label for="new-term-course" class="block text-lg font-medium text-gray-700 mb-2">Course:</label>
                    <select id="new-term-course" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 text-base">
                        </select>
                </div>
                <div>
                    <label for="new-term-definition" class="block text-lg font-medium text-gray-700 mb-2">Definition:</label>
                    <textarea id="new-term-definition" rows="3" class="focus:ring-green-500 focus:border-green-500" placeholder="Enter the definition of the term..."></textarea>
                </div>
                <div>
                    <label for="new-term-hebrew" class="block text-lg font-medium text-gray-700 mb-2">Hebrew Term:</label>
                    <input type="text" id="new-term-hebrew" placeholder="Enter Hebrew term">
                </div>
                <div>
                    <label for="new-term-pronunciation" class="block text-lg font-medium text-gray-700 mb-2">Pronunciation (e.g., 'nigzeret'):</label>
                    <input type="text" id="new-term-pronunciation" placeholder="Enter pronunciation">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="new-term-english" class="block text-lg font-medium text-gray-700 mb-2">English Term:</label>
                        <input type="text" id="new-term-english" placeholder="Enter English term">
                    </div>
                    <div>
                        <label for="new-term-russian" class="block text-lg font-medium text-gray-700 mb-2">Russian Term:</label>
                        <input type="text" id="new-term-russian" placeholder="Enter Russian term">
                    </div>
                    <div>
                        <label for="new-term-arabic" class="block text-lg font-medium text-gray-700 mb-2">Arabic Term:</label>
                        <input type="text" id="new-term-arabic" placeholder="Enter Arabic term">
                    </div>
                    <div>
                        <label for="new-term-french" class="block text-lg font-medium text-gray-700 mb-2">French Term:</label>
                        <input type="text" id="new-term-french" placeholder="Enter French term">
                    </div>
                    <div>
                        <label for="new-term-mandarin" class="block text-lg font-medium text-gray-700 mb-2">Mandarin Term:</label>
                        <input type="text" id="new-term-mandarin" placeholder="Enter Mandarin term">
                    </div>
                    <div>
                        <label for="new-term-spanish" class="block text-lg font-medium text-gray-700 mb-2">Spanish Term:</label>
                        <input type="text" id="new-term-spanish" placeholder="Enter Spanish term">
                    </div>
                    <div>
                        <label for="new-term-hindi" class="block text-lg font-medium text-gray-700 mb-2">Hindi Term:</label>
                        <input type="text" id="new-term-hindi" placeholder="Enter Hindi term">
                    </div>
                </div>
                <div class="text-center">
                    <button type="submit" class="w-full sm:w-auto">Add Term</button>
                </div>
            </form>
        </section>

        <section id="linguini-challenge" class="card hidden-section text-center">
            <h2 class="text-3xl font-semibold mb-6 text-center text-gray-800">Linguini Challenge!</h2>
            <p class="text-lg mb-4 text-gray-700">Select the correct translation for the given definition.</p>
            <div class="mb-8">
                <label for="challenge-course-select" class="block text-lg font-medium text-gray-700 mb-2">Select a Course for Challenge:</label>
                <select id="challenge-course-select" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 text-base" onchange="startLinguiniChallenge()">
                    </select>
            </div>

            <div id="challenge-display" class="hidden">
                <p id="challenge-definition" class="text-2xl font-bold mb-6 text-gray-900"></p>
                <div id="challenge-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    </div>
                <p id="challenge-feedback" class="text-xl font-semibold mt-6"></p>
                <button onclick="startLinguiniChallenge()" class="mt-8">Next Challenge</button>
            </div>
            <div id="no-challenge-terms" class="text-center text-xl text-gray-600 mt-4 hidden">
                No terms available for this course to start the challenge. Please add some terms.
            </div>
            <button id="start-challenge-button" class="mt-8 hidden" onclick="startLinguiniChallenge()">Start Challenge</button>
        </section>

        <section id="learn-hebrew" class="card hidden-section text-center">
            <h2 class="text-3xl font-semibold mb-6 text-center text-gray-800">Learn Hebrew Scientific Terms</h2>
            <p class="text-lg mb-4 text-gray-700">Test your knowledge of Hebrew scientific terms.</p>
            <div class="mb-8">
                <label for="learn-hebrew-course-select" class="block text-lg font-medium text-gray-700 mb-2">Select a Course for Learning:</label>
                <select id="learn-hebrew-course-select" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 text-base" onchange="startLearnHebrew()">
                    </select>
            </div>

            <div id="learn-hebrew-display" class="hidden">
                <p id="hebrewTermDisplay" class="font-bold mb-2 text-gray-900" dir="rtl"></p>
                <p id="pronunciationDisplay" class="text-gray-600 mb-6"></p>
                <div id="learn-hebrew-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    </div>
                <p id="learnHebrewFeedback" class="font-semibold mt-6"></p>
                <button onclick="startLearnHebrew()" class="mt-8">Next Term</button>
            </div>
            <div id="no-learn-hebrew-terms" class="text-center text-xl text-gray-600 mt-4 hidden">
                No terms available for this course to start Hebrew learning. Please add some terms.
            </div>
            <button id="start-learn-hebrew-button" class="mt-8 hidden" onclick="startLearnHebrew()">Start Learning</button>
        </section>
    </main>

    <div id="validatorModal" class="modal">
        <div class="modal-content">
            <button class="close-button" onclick="closeValidatorForm()">&times;</button>
            <h2 class="text-2xl font-semibold mb-6 text-center text-gray-800">Become a Validator</h2>
            <form id="validatorForm" class="space-y-4">
                <div class="form-group">
                    <label for="validatorName">Your Name:</label>
                    <input type="text" id="validatorName" required>
                </div>
                <div class="form-group">
                    <label for="validatorNativeLanguage">Native Language:</label>
                    <input type="text" id="validatorNativeLanguage" required>
                </div>
                <div class="form-group">
                    <label for="validatorTechnionMail">Technion Mail:</label>
                    <input type="text" id="validatorTechnionMail" placeholder="e.g., user@campus.technion.ac.il" required>
                </div>
                <div class="form-group flex items-start">
                    <input type="checkbox" id="validatorTrustAgreement" class="mt-1" required>
                    <label for="validatorTrustAgreement" class="ml-2 text-gray-700 text-sm">
                        I agree to insert only valid and true terms and will adhere to the Linguini community guidelines.
                    </label>
                </div>
                <button type="submit" class="w-full">Submit Application</button>
                <p id="validationMessage" class="text-center"></p>
                <div id="secretKeyDisplay" class="font-mono">
                    Secret Key: <span id="theSecretKey"></span>
                </div>
            </form>
        </div>
    </div>

    <footer class="bg-gray-100 text-gray-600 py-6 mt-12 shadow-inner">
        <div class="container text-center footer-content">
            <p>&copy; 2024 Linguini - Technion Educational Site</p>
            <img src="https://lh3.googleusercontent.com/pw/AP1GczODWJkF10QjS02-aK3wQcE6X4pW-V4_E6oR9C7i_fK_e_i_4t7x5F4y4l7j3v5f9cQy-g6p-y-7x7m-4w=s128-p-k" alt="Remi the Mouse Mascot" class="remi-mascot">
        </div>
        <div id="debugInfo" class="container">
            Firebase Initialization: <span>Pending...</span>
        </div>
    </footer>

    <script>
        // Global variables and helper functions
        let allCourses = [];
        let allTerms = [];
        let selectedCourseId = '';

        // Helper to show/hide sections
        function showSection(sectionId) {
            document.querySelectorAll('section').forEach(section => {
                section.classList.add('hidden-section');
                section.classList.remove('active-section');
            });
            document.getElementById(sectionId).classList.remove('hidden-section');
            document.getElementById(sectionId).classList.add('active-section');
        }

        // Message box for showing errors/success
        let messageTimeout;
        function showMessage(message, type = 'success', duration = 3000) {
            const messageBox = document.getElementById('messageBox');
            const messageText = document.getElementById('messageText');
            const messageBackdrop = document.getElementById('messageBoxBackdrop');

            if (!messageBox) {
                // If messageBox doesn't exist, create it
                const msgBoxDiv = document.createElement('div');
                msgBoxDiv.id = 'messageBox';
                msgBoxDiv.className = 'message-box hidden';
                msgBoxDiv.innerHTML = `
                    <p id="messageText" class="text-lg font-semibold"></p>
                    <button onclick="closeMessageBox()" class="mt-4 px-4 py-2 bg-gray-200 rounded-md">Close</button>
                `;
                document.body.appendChild(msgBoxDiv);

                const msgBackdropDiv = document.createElement('div');
                msgBackdropDiv.id = 'messageBoxBackdrop';
                msgBackdropDiv.className = 'message-box-backdrop hidden';
                document.body.appendChild(msgBackdropDiv);

                // Re-get references after creation
                messageBox = document.getElementById('messageBox');
                messageText = document.getElementById('messageText');
                messageBackdrop = document.getElementById('messageBoxBackdrop');
            }

            messageText.textContent = message;
            messageText.className = 'text-lg font-semibold'; // Reset classes
            if (type === 'success') {
                messageText.classList.add('text-green-600');
            } else if (type === 'error') {
                messageText.classList.add('text-red-600');
            } else {
                messageText.classList.add('text-gray-800');
            }

            messageBox.classList.remove('hidden');
            messageBackdrop.classList.remove('hidden');

            clearTimeout(messageTimeout);
            messageTimeout = setTimeout(() => {
                closeMessageBox();
            }, duration);
        }

        function closeMessageBox() {
            document.getElementById('messageBox').classList.add('hidden');
            document.getElementById('messageBoxBackdrop').classList.add('hidden');
            clearTimeout(messageTimeout);
        }

        function showErrorMessage(message) {
            showMessage(message, 'error', 5000);
        }
        function showSuccessMessage(message) {
            showMessage(message, 'success', 3000);
        }

        // Firebase Functions for Courses and Terms (to be called after Firebase is ready)
        async function loadCoursesAndTerms() {
            try {
                allCourses = await window.loadCourses();
                if (allCourses.length > 0) {
                    selectedCourseId = allCourses[0].id; // Set default
                    renderCoursesDropdown();
                    renderTermsTable(selectedCourseId);
                    populateCourseSelects(); // Populate all course dropdowns
                } else {
                    console.warn('No courses found in Firestore. Please ensure data is seeded.');
                }
            } catch (error) {
                console.error("Error loading courses and terms:", error);
                showErrorMessage("Failed to load initial data. Please refresh.");
            }
        }

        // Function to populate all course select dropdowns
        function populateCourseSelects() {
            const courseSelects = [
                document.getElementById('course-select'),
                document.getElementById('new-term-course'),
                document.getElementById('challenge-course-select'),
                document.getElementById('learn-hebrew-course-select')
            ];

            courseSelects.forEach(selectElement => {
                selectElement.innerHTML = ''; // Clear existing options
                if (allCourses.length === 0) {
                    const option = document.createElement('option');
                    option.value = '';
                    option.textContent = 'No courses available';
                    selectElement.appendChild(option);
                    selectElement.disabled = true;
                } else {
                    selectElement.disabled = false;
                    allCourses.forEach(course => {
                        const option = document.createElement('option');
                        option.value = course.id;
                        option.textContent = course.name;
                        selectElement.appendChild(option);
                    });
                    // Set the selected value for dropdowns that have a default
                    if (selectElement.id === 'course-select' || selectElement.id === 'challenge-course-select' || selectElement.id === 'learn-hebrew-course-select') {
                        selectElement.value = selectedCourseId;
                    }
                }
            });
        }


        async function renderCoursesDropdown() {
            await loadCoursesAndTerms(); // Reload and re-render all dropdowns
        }

        async function renderTermsTable(courseId) {
            selectedCourseId = courseId; // Update global selected course
            allTerms = await window.loadTerms(courseId);

            const tableContainer = document.getElementById('terms-table-container');
            if (allTerms.length === 0) {
                tableContainer.innerHTML = '<p class="text-center text-gray-600 text-lg mt-4">No terms found for this course. Be the first to add one!</p>';
                return;
            }

            let tableHTML = `
                <table class="term-table">
                    <thead>
                        <tr>
                            <th>Definition</th>
                            <th>Hebrew</th>
                            <th>Pronunciation</th>
                            <th>English</th>
                            <th>Russian</th>
                            <th>Arabic</th>
                            <th>French</th>
                            <th>Mandarin</th>
                            <th>Spanish</th>
                            <th>Hindi</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            allTerms.forEach(term => {
                tableHTML += `
                    <tr data-term-id="${term.id}" data-course-id="${term.courseId}">
                        <td>${term.definition}</td>
                        <td><span class="${term.hebrew.status === 'Validated' ? 'status-validated' : 'status-pending'}">${term.hebrew.text || 'N/A'}</span></td>
                        <td>${term.pronunciation || 'N/A'}</td>
                        <td><span class="${term.english.status === 'Validated' ? 'status-validated' : 'status-pending'}">${term.english.text || 'N/A'}</span></td>
                        <td><span class="${term.russian.status === 'Validated' ? 'status-validated' : 'status-pending'}">${term.russian.text || 'N/A'}</span></td>
                        <td><span class="${term.arabic.status === 'Validated' ? 'status-validated' : 'status-pending'}">${term.arabic.text || 'N/A'}</span></td>
                        <td><span class="${term.french.status === 'Validated' ? 'status-validated' : 'status-pending'}">${term.french.text || 'N/A'}</span></td>
                        <td><span class="${term.mandarin.status === 'Validated' ? 'status-validated' : 'status-pending'}">${term.mandarin.text || 'N/A'}</span></td>
                        <td><span class="${term.spanish.status === 'Validated' ? 'status-validated' : 'status-pending'}">${term.spanish.text || 'N/A'}</span></td>
                        <td><span class="${term.hindi.status === 'Validated' ? 'status-validated' : 'status-pending'}">${term.hindi.text || 'N/A'}</span></td>
                        <td class="whitespace-nowrap">
                            <button class="btn-validate" onclick="showValidationForm('${term.id}', '${term.courseId}')">Validate</button>
                            <button class="btn-edit" onclick="showEditTermForm('${term.id}', '${term.courseId}')">Edit</button>
                            <button class="btn-delete" onclick="deleteTerm('${term.id}', '${term.courseId}')">Delete</button>
                        </td>
                    </tr>
                `;
            });

            tableHTML += `
                    </tbody>
                </table>
            `;
            tableContainer.innerHTML = tableHTML;
        }

        // Functions for adding, editing, validating, deleting terms
        document.getElementById('add-term-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!window.isFirebaseReady) {
                showErrorMessage('Firebase not ready. Cannot add term.');
                return;
            }

            const courseId = document.getElementById('new-term-course').value;
            const definition = document.getElementById('new-term-definition').value;
            const hebrew = document.getElementById('new-term-hebrew').value;
            const pronunciation = document.getElementById('new-term-pronunciation').value;
            const english = document.getElementById('new-term-english').value;
            const russian = document.getElementById('new-term-russian').value;
            const arabic = document.getElementById('new-term-arabic').value;
            const french = document.getElementById('new-term-french').value;
            const mandarin = document.getElementById('new-term-mandarin').value;
            const spanish = document.getElementById('new-term-spanish').value;
            const hindi = document.getElementById('new-term-hindi').value;

            if (!courseId || !definition || !hebrew || !pronunciation || !english) {
                showErrorMessage('Please fill in at least Course, Definition, Hebrew, Pronunciation, and English fields.');
                return;
            }

            try {
                const termsCollectionRef = collection(window.db, `artifacts/${APP_ID}/public/data/terms`);
                await addDoc(termsCollectionRef, {
                    courseId,
                    definition,
                    hebrew: { text: hebrew, status: 'Pending', validatedBy: null },
                    pronunciation,
                    english: { text: english, status: 'Pending', validatedBy: null },
                    russian: { text: russian || null, status: russian ? 'Pending' : 'Not Provided', validatedBy: null },
                    arabic: { text: arabic || null, status: arabic ? 'Pending' : 'Not Provided', validatedBy: null },
                    french: { text: french || null, status: french ? 'Pending' : 'Not Provided', validatedBy: null },
                    mandarin: { text: mandarin || null, status: mandarin ? 'Pending' : 'Not Provided', validatedBy: null },
                    spanish: { text: spanish || null, status: spanish ? 'Pending' : 'Not Provided', validatedBy: null },
                    hindi: { text: hindi || null, status: hindi ? 'Pending' : 'Not Provided', validatedBy: null },
                    createdAt: new Date()
                });
                showSuccessMessage('Term added successfully!');
                document.getElementById('add-term-form').reset(); // Clear form
                renderTermsTable(courseId); // Re-render table for the selected course
            } catch (error) {
                console.error('Error adding term:', error);
                showErrorMessage('Error adding term: ' + error.message);
            }
        });

        async function showEditTermForm(termId, courseId) {
            // Placeholder for Edit functionality (similar to add, but pre-populating fields)
            alert(`Edit functionality for term ${termId} in course ${courseId} is not yet fully implemented in UI.`);
            // You'd typically open a modal or navigate to an edit page here.
            // Example of fetching the term to pre-populate:
            // const termRef = doc(window.db, `artifacts/${APP_ID}/public/data/terms`, termId);
            // const termSnap = await getDoc(termRef);
            // if (termSnap.exists()) {
            //     const termData = termSnap.data();
            //     // Populate a form with termData
            // }
        }

        async function showValidationForm(termId, courseId) {
            // Placeholder for Validate functionality
            alert(`Validation functionality for term ${termId} in course ${courseId} is not yet fully implemented in UI.`);
            // You'd typically open a modal with fields to validate (e.g., set status to 'Validated')
            // Example of updating validation status:
            // const termRef = doc(window.db, `artifacts/${APP_ID}/public/data/terms`, termId);
            // await updateDoc(termRef, {
            //     'hebrew.status': 'Validated',
            //     'hebrew.validatedBy': window.userId // Store who validated it
            // });
            // showSuccessMessage('Hebrew term validated!');
            // renderTermsTable(courseId);
        }

        async function deleteTerm(termId, courseId) {
            if (!confirm('Are you sure you want to delete this term?')) {
                return;
            }
            if (!window.isFirebaseReady) {
                showErrorMessage('Firebase not ready. Cannot delete term.');
                return;
            }
            try {
                const termRef = doc(window.db, `artifacts/${APP_ID}/public/data/terms`, termId);
                await deleteDoc(termRef);
                showSuccessMessage('Term deleted successfully!');
                renderTermsTable(courseId); // Re-render table
            } catch (error) {
                console.error('Error deleting term:', error);
                showErrorMessage('Error deleting term: ' + error.message);
            }
        }

        // Linguini Challenge Logic
        let challengeTerms = [];
        let currentChallengeIndex = -1;
        let correctTranslation = '';

        async function startLinguiniChallenge() {
            if (!window.isFirebaseReady) {
                showErrorMessage('Firebase not ready. Cannot start challenge.');
                return;
            }

            const challengeCourseId = document.getElementById('challenge-course-select').value;
            if (!challengeCourseId) {
                document.getElementById('no-challenge-terms').textContent = 'Please select a course.';
                document.getElementById('no-challenge-terms').classList.remove('hidden');
                document.getElementById('challenge-display').classList.add('hidden');
                document.getElementById('start-challenge-button').classList.remove('hidden'); // Show start button
                return;
            }

            challengeTerms = await window.loadTerms(challengeCourseId);
            if (challengeTerms.length === 0) {
                document.getElementById('no-challenge-terms').textContent = 'No terms available for this course to start the challenge. Please add some terms.';
                document.getElementById('no-challenge-terms').classList.remove('hidden');
                document.getElementById('challenge-display').classList.add('hidden');
                document.getElementById('start-challenge-button').classList.remove('hidden'); // Show start button
                return;
            }

            document.getElementById('no-challenge-terms').classList.add('hidden');
            document.getElementById('start-challenge-button').classList.add('hidden');
            document.getElementById('challenge-display').classList.remove('hidden');

            currentChallengeIndex = (currentChallengeIndex + 1) % challengeTerms.length;
            const term = challengeTerms[currentChallengeIndex];

            document.getElementById('challenge-definition').textContent = term.definition;
            document.getElementById('challenge-feedback').textContent = '';

            const optionsContainer = document.getElementById('challenge-options');
            optionsContainer.innerHTML = '';

            const allLanguages = ['hebrew', 'english', 'russian', 'arabic', 'french', 'mandarin', 'spanish', 'hindi'];
            const availableTranslations = allLanguages.filter(lang => term[lang] && term[lang].text && term[lang].status === 'Validated');

            if (availableTranslations.length === 0) {
                document.getElementById('challenge-feedback').textContent = 'No validated translations available for this term. Skipping...';
                setTimeout(startLinguiniChallenge, 1500); // Try next term
                return;
            }

            const correctLang = availableTranslations[Math.floor(Math.random() * availableTranslations.length)];
            correctTranslation = term[correctLang].text;

            let shuffledOptions = [correctTranslation];
            while (shuffledOptions.length < 4 && allTerms.length >= 4) {
                const randomTerm = allTerms[Math.floor(Math.random() * allTerms.length)];
                const randomLang = allLanguages[Math.floor(Math.random() * allLanguages.length)];
                const randomTranslation = randomTerm[randomLang]?.text;

                if (randomTranslation && randomTranslation !== correctTranslation && !shuffledOptions.includes(randomTranslation)) {
                    shuffledOptions.push(randomTranslation);
                }
            }

            // If we still don't have 4 unique options, fill with N/A or less options
            while (shuffledOptions.length < 4) {
                shuffledOptions.push(`Option ${shuffledOptions.length + 1}`); // Fallback
            }

            // Shuffle options
            for (let i = shuffledOptions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledOptions[i], shuffledOptions[j]] = [shuffledOptions[j], shuffledOptions[i]];
            }

            shuffledOptions.forEach(optionText => {
                const button = document.createElement('button');
                button.className = 'game-option-button';
                button.textContent = optionText;
                button.onclick = () => checkChallengeAnswer(button, optionText);
                optionsContainer.appendChild(button);
            });
        }

        function checkChallengeAnswer(button, selectedAnswer) {
            const feedbackElement = document.getElementById('challenge-feedback');
            document.querySelectorAll('.game-option-button').forEach(btn => btn.disabled = true); // Disable all buttons

            if (selectedAnswer === correctTranslation) {
                button.classList.add('correct');
                feedbackElement.textContent = 'Correct!';
                feedbackElement.className = 'text-xl font-semibold mt-6 text-green-600';
                playSuccessSound();
            } else {
                button.classList.add('incorrect');
                feedbackElement.textContent = `Incorrect. The correct answer was "${correctTranslation}".`;
                feedbackElement.className = 'text-xl font-semibold mt-6 text-red-600';
                playFailureSound();
                // Highlight the correct answer
                document.querySelectorAll('.game-option-button').forEach(btn => {
                    if (btn.textContent === correctTranslation) {
                        btn.classList.add('correct');
                    }
                });
            }
        }

        // Learn Hebrew Logic
        let learnHebrewTerms = [];
        let currentHebrewIndex = -1;
        let correctHebrewTranslation = '';
        let correctHebrewPronunciation = '';

        async function startLearnHebrew() {
            if (!window.isFirebaseReady) {
                showErrorMessage('Firebase not ready. Cannot start learning.');
                return;
            }

            const learnHebrewCourseId = document.getElementById('learn-hebrew-course-select').value;
            if (!learnHebrewCourseId) {
                document.getElementById('no-learn-hebrew-terms').textContent = 'Please select a course.';
                document.getElementById('no-learn-hebrew-terms').classList.remove('hidden');
                document.getElementById('learn-hebrew-display').classList.add('hidden');
                document.getElementById('start-learn-hebrew-button').classList.remove('hidden'); // Show start button
                return;
            }

            learnHebrewTerms = await window.loadTerms(learnHebrewCourseId);
            // Filter to only terms with validated Hebrew
            learnHebrewTerms = learnHebrewTerms.filter(term => term.hebrew && term.hebrew.text && term.hebrew.status === 'Validated');

            if (learnHebrewTerms.length === 0) {
                document.getElementById('no-learn-hebrew-terms').textContent = 'No validated Hebrew terms available for this course. Please add and validate some terms.';
                document.getElementById('no-learn-hebrew-terms').classList.remove('hidden');
                document.getElementById('learn-hebrew-display').classList.add('hidden');
                document.getElementById('start-learn-hebrew-button').classList.remove('hidden'); // Show start button
                return;
            }

            document.getElementById('no-learn-hebrew-terms').classList.add('hidden');
            document.getElementById('start-learn-hebrew-button').classList.add('hidden');
            document.getElementById('learn-hebrew-display').classList.remove('hidden');

            currentHebrewIndex = (currentHebrewIndex + 1) % learnHebrewTerms.length;
            const term = learnHebrewTerms[currentHebrewIndex];

            document.getElementById('hebrewTermDisplay').textContent = term.hebrew.text;
            document.getElementById('pronunciationDisplay').textContent = `(${term.pronunciation})`;
            document.getElementById('learnHebrewFeedback').textContent = '';

            const optionsContainer = document.getElementById('learn-hebrew-options');
            optionsContainer.innerHTML = '';

            correctHebrewTranslation = term.definition; // Correct answer is the definition

            let shuffledOptions = [correctHebrewTranslation];
            while (shuffledOptions.length < 4 && learnHebrewTerms.length >= 4) {
                const randomTerm = learnHebrewTerms[Math.floor(Math.random() * learnHebrewTerms.length)];
                const randomDefinition = randomTerm.definition;

                if (randomDefinition && randomDefinition !== correctHebrewTranslation && !shuffledOptions.includes(randomDefinition)) {
                    shuffledOptions.push(randomDefinition);
                }
            }

            while (shuffledOptions.length < 4) {
                shuffledOptions.push(`Definition ${shuffledOptions.length + 1}`); // Fallback
            }

            // Shuffle options
            for (let i = shuffledOptions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledOptions[i], shuffledOptions[j]] = [shuffledOptions[j], shuffledOptions[i]];
            }

            shuffledOptions.forEach(optionText => {
                const button = document.createElement('button');
                button.className = 'learn-hebrew-option-button';
                button.textContent = optionText;
                button.onclick = () => checkLearnHebrewAnswer(button, optionText);
                optionsContainer.appendChild(button);
            });
        }

        function checkLearnHebrewAnswer(button, selectedAnswer) {
            const feedbackElement = document.getElementById('learnHebrewFeedback');
            document.querySelectorAll('.learn-hebrew-option-button').forEach(btn => btn.disabled = true); // Disable all buttons

            if (selectedAnswer === correctHebrewTranslation) {
                button.classList.add('correct');
                feedbackElement.textContent = 'Correct!';
                feedbackElement.className = 'text-xl font-semibold mt-6 text-green-600';
                playSuccessSound();
            } else {
                button.classList.add('incorrect');
                feedbackElement.textContent = `Incorrect. The correct answer was "${correctHebrewTranslation}".`;
                feedbackElement.className = 'text-xl font-semibold mt-6 text-red-600';
                playFailureSound();
                // Highlight the correct answer
                document.querySelectorAll('.learn-hebrew-option-button').forEach(btn => {
                    if (btn.textContent === correctHebrewTranslation) {
                        btn.classList.add('correct');
                    }
                });
            }
        }

        // Sound Effects (using Tone.js)
        const synth = new Tone.Synth().toDestination();

        function playSuccessSound() {
            synth.triggerAttackRelease('C5', '8n'); // A higher, pleasant tone
        }

        function playFailureSound() {
            synth.triggerAttackRelease('C3', '8n'); // A lower, less pleasant tone
        }

        // Initial UI rendering
        document.addEventListener('DOMContentLoaded', () => {
            // Your existing DOmContentLoaded logic that sets up initial UI
            showSection('browse-terms'); // Default section
            // `initializeLinguiniApp` is called *after* Firebase init within the module script
        });


        // New Validator Form Logic
        const SECRET_KEY = "LinguiniValidator2024!"; // Define your secret key here

        function openValidatorForm() {
            document.getElementById('validatorModal').classList.add('show');
            // Reset form and messages
            document.getElementById('validatorForm').reset();
            document.getElementById('validationMessage').style.display = 'none';
            document.getElementById('secretKeyDisplay').style.display = 'none';
        }

        function closeValidatorForm() {
            document.getElementById('validatorModal').classList.remove('show');
        }

        document.getElementById('validatorForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const name = document.getElementById('validatorName').value.trim();
            const nativeLanguage = document.getElementById('validatorNativeLanguage').value.trim();
            const technionMail = document.getElementById('validatorTechnionMail').value.trim();
            const trustAgreement = document.getElementById('validatorTrustAgreement').checked;

            const validationMessageElem = document.getElementById('validationMessage');
            const secretKeyDisplayElem = document.getElementById('secretKeyDisplay');
            const theSecretKeyElem = document.getElementById('theSecretKey');

            validationMessageElem.style.display = 'none';
            secretKeyDisplayElem.style.display = 'none';

            let isValid = true;
            let message = '';

            // 3. Technion Mail validation
            const technionMailRegex = /@campus\.technion\.ac\.il$/;
            if (!technionMailRegex.test(technionMail)) {
                isValid = false;
                message = 'Invalid Technion Mail. It must end with @campus.technion.ac.il';
            }

            // 4. Trust Agreement validation
            if (!trustAgreement) {
                isValid = false;
                if (message) message += '<br>'; // Add line break if there's a previous message
                message += 'You must agree to the trust agreement to become a validator.';
            }

            if (isValid) {
                theSecretKeyElem.textContent = SECRET_KEY;
                secretKeyDisplayElem.style.display = 'block';
                validationMessageElem.textContent = 'Congratulations! Here is your secret key: V2025';
                validationMessageElem.style.color = '#28A745'; // Green for success
                validationMessageElem.style.display = 'block';
            } else {
                validationMessageElem.innerHTML = message;
                validationMessageElem.style.color = '#DC3545'; // Red for error
                validationMessageElem.style.display = 'block';
            }
        });
    </script>
</body>
</html>
